







1、取客户资料

select b.ClientName, b.Mobile, a.CarNO, a.UnderpanNO, b.Address, 
       a.CarModel, a.EngineNO
from WX_ClientCars a
inner join WX_Client b
on a.ClientCode = b.ClientCode
where a.CompCode = 'COM20161107000001'




2、取供应商资料

select clientcode, ClientName, ClientName, case when paymode =  '05180002' then '月结' else '现结' end,
       case when billsort = '05190001' then '增票' when billsort = '05190002' then '普票' 
	   when billsort = '05190003' then '收据' end, supper, areacode + '-' + telephone as tel
from WBStore..PJ_Supplier where CompCode = 'COM20161107000001' and isused = 1 and auditstatus = 1


3、维修记录

select a.serviceno, a.CLIENTNAME, d.Mobile, a.carno, c.UnderpanNO, b.itemsub, 
       b.partsub, b.AgioSum, b.BanlanSum, a.MTDATE, a.leavedate, a.MTADVISOR, a.DISTANCE--, a.outrep
from WBRepair..WX_Maintain a
inner join WBRepair..WX_Settlement b
on a.serviceno = b.serviceno 
inner join WBRepair..WX_ClientCars c
on a.carno = c.carno
inner join WBRepair..WX_Client d
on c.clientcode = d.clientcode
where a.CompCode = 'COM20161107000001' and a.tenorsn = 6


4、维修项目记录

select a.serviceno, c.itemname, c.itemsum, c.itemsubtotal, c.teamname, a.MTADVISOR
from WBRepair..WX_Maintain a
inner join WBRepair..WX_Settlement b
on a.serviceno = b.serviceno 
inner join WBRepair..WX_Item c
on a.serviceno = c.serviceno
where a.CompCode = 'COM20161107000001' and a.tenorsn = 6


5、维修配件记录

select a.serviceno, c.partname, e.name, c.amount, c.perprice, c.unitcode, c.subtotal
from WBRepair..WX_Maintain a
inner join WBRepair..WX_Settlement b
on a.serviceno = b.serviceno 
inner join WBRepair..WX_Part c
on a.serviceno = c.serviceno
left join wbstandard..st_part d
on c.partid = d.id
left join wbstandard..st_partbrand e
on d.partbrandid =e.id
where a.CompCode = 'COM20161107000001' and a.tenorsn = 6



























