!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.M800Core=t():e.M800Core=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n=window.webpackJsonpM800_name_;window.webpackJsonpM800_name_=function(r,o,a){for(var s,u,c,d=0,l=[];d<r.length;d++)u=r[d],i[u]&&l.push(i[u][0]),i[u]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);for(n&&n(r,o,a);l.length;)l.shift()();if(a)for(d=0;d<a.length;d++)c=t(t.s=a[d]);return c};var r={},i={2:0};return t.m=e,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t.oe=function(e){throw console.error(e),e},t(t.s=351)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCError=t.CallCreationError=t.UnexpectedResponseError=t.NotAvailableError=t.NotSupportedError=t.InterruptError=t.CryptoError=t.ValidationError=t.TimeoutError=t.OptimisticConcurrencyError=t.NotImplementedError=t.NotFoundError=t.InvalidOperationError=t.ForbiddenError=t.ConflictError=t.AuthenticationRequiredError=t.ArgumentError=void 0;var i=n(189),o=r(i),a=n(535),s=r(a),u=n(537),c=r(u),d=n(538),l=r(d),f=n(539),h=r(f),p=n(540),v=r(p),m=n(545),g=r(m),_=n(546),y=r(_),b=n(547),w=r(b),$=n(548),E=r($),S=n(291),O=r(S),A=n(558),M=r(A),x=n(559),T=r(x),I=n(560),C=r(I),R=n(561),N=r(R),k=n(193);t.ArgumentError=o.default,t.AuthenticationRequiredError=s.default,t.ConflictError=c.default,t.ForbiddenError=l.default,t.InvalidOperationError=h.default,t.NotFoundError=v.default,t.NotImplementedError=g.default,t.OptimisticConcurrencyError=y.default,t.TimeoutError=w.default,t.ValidationError=E.default,t.CryptoError=O.default,t.InterruptError=M.default,t.NotSupportedError=T.default,t.NotAvailableError=C.default,t.UnexpectedResponseError=N.default,t.CallCreationError=k.CallCreationError,t.WebRTCError=k.WebRTCError,t.default={ArgumentError:o.default,AuthenticationRequiredError:s.default,ConflictError:c.default,ForbiddenError:l.default,InvalidOperationError:h.default,NotFoundError:v.default,NotImplementedError:g.default,OptimisticConcurrencyError:y.default,TimeoutError:w.default,ValidationError:E.default,CryptoError:O.default,InterruptError:M.default,NotSupportedError:T.default,NotAvailableError:C.default,UnexpectedResponseError:N.default,CallCreationError:k.CallCreationError,WebRTCError:k.WebRTCError}},function(e,t,n){var r=!1;(function(){!function(e,t){if("function"==typeof r&&r.amd)r([],t);else{var n=t();e.Strophe=n.Strophe,e.$build=n.$build,e.$iq=n.$iq,e.$msg=n.$msg,e.$pres=n.$pres,e.SHA1=n.SHA1,e.MD5=n.MD5,e.b64_hmac_sha1=n.b64_hmac_sha1,e.b64_sha1=n.b64_sha1,e.str_hmac_sha1=n.str_hmac_sha1,e.str_sha1=n.str_sha1}}(this,function(){/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
var t,n,r;return function(e){function i(e,t){return w.call(e,t)}function o(e,t){var n,r,i,o,a,s,u,c,d,l,f,h,p=t&&t.split("/"),v=y.map,m=v&&v["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&E.test(e[a])&&(e[a]=e[a].replace(E,"")),"."===e[0].charAt(0)&&p&&(h=p.slice(0,p.length-1),e=h.concat(e)),d=0;d<e.length;d++)if("."===(f=e[d]))e.splice(d,1),d-=1;else if(".."===f){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((p||m)&&v){for(n=e.split("/"),d=n.length;d>0;d-=1){if(r=n.slice(0,d).join("/"),p)for(l=p.length;l>0;l-=1)if((i=v[p.slice(0,l).join("/")])&&(i=i[r])){o=i,s=d;break}if(o)break;!u&&m&&m[r]&&(u=m[r],c=d)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function a(t,n){return function(){var r=$.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),p.apply(e,r.concat([t,n]))}}function s(e){return function(t){return o(t,e)}}function u(e){return function(t){g[e]=t}}function c(t){if(i(_,t)){var n=_[t];delete _[t],b[t]=!0,h.apply(e,n)}if(!i(g,t)&&!i(b,t))throw new Error("No "+t);return g[t]}function d(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return e?d(e):[]}function f(e){return function(){return y&&y.config&&y.config[e]||{}}}var h,p,v,m,g={},_={},y={},b={},w=Object.prototype.hasOwnProperty,$=[].slice,E=/\.js$/;v=function(e,t){var n,r=d(e),i=r[0],a=t[1];return e=r[1],i&&(i=o(i,a),n=c(i)),i?e=n&&n.normalize?n.normalize(e,s(a)):o(e,a):(e=o(e,a),r=d(e),i=r[0],e=r[1],i&&(n=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},m={require:function(e){return a(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:f(e)}}},h=function(t,n,r,o){var s,d,f,h,p,y,w,$=[],E=typeof r;if(o=o||t,y=l(o),"undefined"===E||"function"===E){for(n=!n.length&&r.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=v(n[p],y),"require"===(d=h.f))$[p]=m.require(t);else if("exports"===d)$[p]=m.exports(t),w=!0;else if("module"===d)s=$[p]=m.module(t);else if(i(g,d)||i(_,d)||i(b,d))$[p]=c(d);else{if(!h.p)throw new Error(t+" missing "+d);h.p.load(h.n,a(o,!0),u(d),{}),$[p]=g[d]}f=r?r.apply(g[t],$):void 0,t&&(s&&s.exports!==e&&s.exports!==g[t]?g[t]=s.exports:f===e&&w||(g[t]=f))}else t&&(g[t]=r)},t=n=p=function(t,n,r,i,o){if("string"==typeof t)return m[t]?m[t](n):c(v(t,l(n)).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?h(e,t,n,r):setTimeout(function(){h(e,t,n,r)},4),p},p.config=function(e){return p(e)},t._defined=g,r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),i(g,e)||i(_,e)||(_[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("node_modules/almond/almond.js",function(){}),function(e,t){if("function"!=typeof r||!r.amd)return t(e);r("strophe-polyfill",[],function(){return t(e)})}(this,function(e){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=Array.prototype.concat,i=n.call(arguments,1);return function(){return t.apply(e||this,r.call(i,n.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<o;){var a;r in i&&(a=i[r],e.call(n,a,r,i)),r++}});var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.btoa||(e.btoa=function(e){var n,r,i,o,a,s,u,c="",d=0;do{n=e.charCodeAt(d++),r=e.charCodeAt(d++),i=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|r>>4,s=(15&r)<<2|i>>6,u=63&i,isNaN(r)?(a=(3&n)<<4,s=u=64):isNaN(i)&&(u=64),c=c+t.charAt(o)+t.charAt(a)+t.charAt(s)+t.charAt(u)}while(d<e.length);return c}),e.atob||(e.atob=function(e){var n,r,i,o,a,s,u,c="",d=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=t.indexOf(e.charAt(d++)),a=t.indexOf(e.charAt(d++)),s=t.indexOf(e.charAt(d++)),u=t.indexOf(e.charAt(d++)),n=o<<2|a>>4,r=(15&a)<<4|s>>2,i=(3&s)<<6|u,c+=String.fromCharCode(n),64!==s&&(c+=String.fromCharCode(r)),64!==u&&(c+=String.fromCharCode(i))}while(d<e.length);return c})}),function(t,n){"function"==typeof r&&r.amd?r("strophe-sha1",[],function(){return n()}):e.exports=n()}(0,function(){function e(e,r){e[r>>5]|=128<<24-r%32,e[15+(r+64>>9<<4)]=r;var a,s,u,c,d,l,f,h,p=new Array(80),v=1732584193,m=-271733879,g=-1732584194,_=271733878,y=-1009589776;for(a=0;a<e.length;a+=16){for(c=v,d=m,l=g,f=_,h=y,s=0;s<80;s++)p[s]=s<16?e[a+s]:o(p[s-3]^p[s-8]^p[s-14]^p[s-16],1),u=i(i(o(v,5),t(s,m,g,_)),i(i(y,p[s]),n(s))),y=_,_=g,g=o(m,30),m=v,v=u;v=i(v,c),m=i(m,d),g=i(g,l),_=i(_,f),y=i(y,h)}return[v,m,g,_,y]}function t(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function n(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function r(t,n){var r=a(t);r.length>16&&(r=e(r,8*t.length));for(var i=new Array(16),o=new Array(16),s=0;s<16;s++)i[s]=909522486^r[s],o[s]=1549556828^r[s];var u=e(i.concat(a(n)),512+8*n.length);return e(o.concat(u),672)}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function a(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function s(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function u(e){for(var t,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",o=0;o<4*e.length;o+=3)for(t=(e[o>>2]>>8*(3-o%4)&255)<<16|(e[o+1>>2]>>8*(3-(o+1)%4)&255)<<8|e[o+2>>2]>>8*(3-(o+2)%4)&255,n=0;n<4;n++)8*o+6*n>32*e.length?i+="=":i+=r.charAt(t>>6*(3-n)&63);return i}return{b64_hmac_sha1:function(e,t){return u(r(e,t))},b64_sha1:function(t){return u(e(a(t),8*t.length))},binb2str:s,core_hmac_sha1:r,str_hmac_sha1:function(e,t){return s(r(e,t))},str_sha1:function(t){return s(e(a(t),8*t.length))}}}),function(t,n){"function"==typeof r&&r.amd?r("strophe-md5",[],function(){return n()}):e.exports=n()}(0,function(){var e=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},t=function(e,t){return e<<t|e>>>32-t},n=function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},r=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},i=function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n},o=function(n,r,i,o,a,s){return e(t(e(e(r,n),e(o,s)),a),i)},a=function(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)},s=function(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)},u=function(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)},c=function(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)},d=function(t,n){t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;for(var r,i,o,d,l=1732584193,f=-271733879,h=-1732584194,p=271733878,v=0;v<t.length;v+=16)r=l,i=f,o=h,d=p,l=a(l,f,h,p,t[v+0],7,-680876936),p=a(p,l,f,h,t[v+1],12,-389564586),h=a(h,p,l,f,t[v+2],17,606105819),f=a(f,h,p,l,t[v+3],22,-1044525330),l=a(l,f,h,p,t[v+4],7,-176418897),p=a(p,l,f,h,t[v+5],12,1200080426),h=a(h,p,l,f,t[v+6],17,-1473231341),f=a(f,h,p,l,t[v+7],22,-45705983),l=a(l,f,h,p,t[v+8],7,1770035416),p=a(p,l,f,h,t[v+9],12,-1958414417),h=a(h,p,l,f,t[v+10],17,-42063),f=a(f,h,p,l,t[v+11],22,-1990404162),l=a(l,f,h,p,t[v+12],7,1804603682),p=a(p,l,f,h,t[v+13],12,-40341101),h=a(h,p,l,f,t[v+14],17,-1502002290),f=a(f,h,p,l,t[v+15],22,1236535329),l=s(l,f,h,p,t[v+1],5,-165796510),p=s(p,l,f,h,t[v+6],9,-1069501632),h=s(h,p,l,f,t[v+11],14,643717713),f=s(f,h,p,l,t[v+0],20,-373897302),l=s(l,f,h,p,t[v+5],5,-701558691),p=s(p,l,f,h,t[v+10],9,38016083),h=s(h,p,l,f,t[v+15],14,-660478335),f=s(f,h,p,l,t[v+4],20,-405537848),l=s(l,f,h,p,t[v+9],5,568446438),p=s(p,l,f,h,t[v+14],9,-1019803690),h=s(h,p,l,f,t[v+3],14,-187363961),f=s(f,h,p,l,t[v+8],20,1163531501),l=s(l,f,h,p,t[v+13],5,-1444681467),p=s(p,l,f,h,t[v+2],9,-51403784),h=s(h,p,l,f,t[v+7],14,1735328473),f=s(f,h,p,l,t[v+12],20,-1926607734),l=u(l,f,h,p,t[v+5],4,-378558),p=u(p,l,f,h,t[v+8],11,-2022574463),h=u(h,p,l,f,t[v+11],16,1839030562),f=u(f,h,p,l,t[v+14],23,-35309556),l=u(l,f,h,p,t[v+1],4,-1530992060),p=u(p,l,f,h,t[v+4],11,1272893353),h=u(h,p,l,f,t[v+7],16,-155497632),f=u(f,h,p,l,t[v+10],23,-1094730640),l=u(l,f,h,p,t[v+13],4,681279174),p=u(p,l,f,h,t[v+0],11,-358537222),h=u(h,p,l,f,t[v+3],16,-722521979),f=u(f,h,p,l,t[v+6],23,76029189),l=u(l,f,h,p,t[v+9],4,-640364487),p=u(p,l,f,h,t[v+12],11,-421815835),h=u(h,p,l,f,t[v+15],16,530742520),f=u(f,h,p,l,t[v+2],23,-995338651),l=c(l,f,h,p,t[v+0],6,-198630844),p=c(p,l,f,h,t[v+7],10,1126891415),h=c(h,p,l,f,t[v+14],15,-1416354905),f=c(f,h,p,l,t[v+5],21,-57434055),l=c(l,f,h,p,t[v+12],6,1700485571),p=c(p,l,f,h,t[v+3],10,-1894986606),h=c(h,p,l,f,t[v+10],15,-1051523),f=c(f,h,p,l,t[v+1],21,-2054922799),l=c(l,f,h,p,t[v+8],6,1873313359),p=c(p,l,f,h,t[v+15],10,-30611744),h=c(h,p,l,f,t[v+6],15,-1560198380),f=c(f,h,p,l,t[v+13],21,1309151649),l=c(l,f,h,p,t[v+4],6,-145523070),p=c(p,l,f,h,t[v+11],10,-1120210379),h=c(h,p,l,f,t[v+2],15,718787259),f=c(f,h,p,l,t[v+9],21,-343485551),l=e(l,r),f=e(f,i),h=e(h,o),p=e(p,d);return[l,f,h,p]};return{hexdigest:function(e){return i(d(n(e),8*e.length))},hash:function(e){return r(d(n(e),8*e.length))}}}),function(t,n){"function"==typeof r&&r.amd?r("strophe-utils",[],function(){return n()}):e.exports=n()}(0,function(){return{utf16to8:function(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),n>=0&&n<=127?r+=e.charAt(t):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},addCookies:function(e){var t,n,r,i,o,a,s;for(t in e||{})o="",a="",s="",n=e[t],r="object"==typeof n,i=escape(unescape(r?n.value:n)),r&&(o=n.expires?";expires="+n.expires:"",a=n.domain?";domain="+n.domain:"",s=n.path?";path="+n.path:""),document.cookie=t+"="+i+o+a+s}}}),function(t,i){if("function"==typeof r&&r.amd)r("strophe-core",["strophe-sha1","strophe-md5","strophe-utils"],function(){return i.apply(this,arguments)});else{e.exports=i(n("./sha1"),n("./md5"),n("./utils"))}}(0,function(e,t,n){function r(e,t){return new s.Builder(e,t)}function i(e){return new s.Builder("message",e)}function o(e){return new s.Builder("iq",e)}function a(e){return new s.Builder("presence",e)}var s;return s={VERSION:"1.2.16",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<s.XHTML.tags.length;t++)if(e===s.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if(void 0!==s.XHTML.attributes[e]&&s.XHTML.attributes[e].length>0)for(var n=0;n<s.XHTML.attributes[e].length;n++)if(t===s.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<s.XHTML.css.length;t++)if(e===s.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){s.NS[e]=t},forEachChild:function(e,t,n){var r,i;for(r=0;r<e.childNodes.length;r++)i=e.childNodes[r],i.nodeType!==s.ElementType.NORMAL||t&&!this.isTagEqual(i,t)||n(i)},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return s._xmlGenerator||(s._xmlGenerator=s._makeGenerator()),s._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(e){if(!e)return null;var t,n,r,i=s.xmlGenerator().createElement(e);for(t=1;t<arguments.length;t++){var o=arguments[t];if(o)if("string"==typeof o||"number"==typeof o)i.appendChild(s.xmlTextNode(o));else if("object"==typeof o&&"function"==typeof o.sort)for(n=0;n<o.length;n++){var a=o[n];"object"==typeof a&&"function"==typeof a.sort&&void 0!==a[1]&&null!==a[1]&&i.setAttribute(a[0],a[1])}else if("object"==typeof o)for(r in o)o.hasOwnProperty(r)&&void 0!==o[r]&&null!==o[r]&&i.setAttribute(r,o[r])}return i},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;")},xmlunescape:function(e){return e=e.replace(/\&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&apos;/g,"'"),e=e.replace(/&quot;/g,'"')},xmlTextNode:function(e){return s.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;if(DOMParser){t=(new DOMParser).parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===s.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===s.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return s.xmlescape(t)},copyElement:function(e){var t,n;if(e.nodeType===s.ElementType.NORMAL){for(n=s.xmlElement(e.tagName),t=0;t<e.attributes.length;t++)n.setAttribute(e.attributes[t].nodeName,e.attributes[t].value);for(t=0;t<e.childNodes.length;t++)n.appendChild(s.copyElement(e.childNodes[t]))}else e.nodeType===s.ElementType.TEXT&&(n=s.xmlGenerator().createTextNode(e.nodeValue));return n},createHtml:function(e){var t,n,r,i,o,a,u,c,d,l,f;if(e.nodeType===s.ElementType.NORMAL)if(i=e.nodeName.toLowerCase(),s.XHTML.validTag(i))try{for(n=s.xmlElement(i),t=0;t<s.XHTML.attributes[i].length;t++)if(o=s.XHTML.attributes[i][t],void 0!==(a=e.getAttribute(o))&&null!==a&&""!==a&&!1!==a&&0!==a)if("style"===o&&"object"==typeof a&&void 0!==a.cssText&&(a=a.cssText),"style"===o){for(u=[],c=a.split(";"),r=0;r<c.length;r++)d=c[r].split(":"),l=d[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),s.XHTML.validCSS(l)&&(f=d[1].replace(/^\s*/,"").replace(/\s*$/,""),u.push(l+": "+f));u.length>0&&(a=u.join("; "),n.setAttribute(o,a))}else n.setAttribute(o,a);for(t=0;t<e.childNodes.length;t++)n.appendChild(s.createHtml(e.childNodes[t]))}catch(e){n=s.xmlTextNode("")}else for(n=s.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(s.createHtml(e.childNodes[t]));else if(e.nodeType===s.ElementType.FRAGMENT)for(n=s.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(s.createHtml(e.childNodes[t]));else e.nodeType===s.ElementType.TEXT&&(n=s.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=s.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){void 0!==e.stack&&s.fatal(e.stack),e.sourceURL?s.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?s.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):s.fatal("error: "+e.message)},log:function(e,t){e===this.LogLevel.FATAL&&"object"==typeof window.console&&"function"==typeof window.console.error&&window.console.error(t)},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var n,r,i=e.nodeName;for(e.getAttribute("_realname")&&(i=e.getAttribute("_realname")),t="<"+i,n=0;n<e.attributes.length;n++)"_realname"!==e.attributes[n].nodeName&&(t+=" "+e.attributes[n].nodeName+"='"+s.xmlescape(e.attributes[n].value)+"'");if(e.childNodes.length>0){for(t+=">",n=0;n<e.childNodes.length;n++)switch(r=e.childNodes[n],r.nodeType){case s.ElementType.NORMAL:t+=s.serialize(r);break;case s.ElementType.TEXT:t+=s.xmlescape(r.nodeValue);break;case s.ElementType.CDATA:t+="<![CDATA["+r.nodeValue+"]]>"}t+="</"+i+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){s._connectionPlugins[e]=t}},s.Builder=function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=s.NS.CLIENT:t||(t={xmlns:s.NS.CLIENT})),this.nodeTree=s.xmlElement(e,t),this.node=this.nodeTree},s.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return s.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=s.xmlElement(e,t,n);return this.node.appendChild(r),"string"!=typeof n&&"number"!=typeof n&&(this.node=r),this},cnode:function(e){var t,n=s.xmlGenerator();try{t=void 0!==n.importNode}catch(e){t=!1}var r=t?n.importNode(e,!0):s.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=s.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=s.createHtml(t);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},s.Handler=function(e,t,n,r,i,o,a){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=i,this.options=a||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(s.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=o?s.getBareJidFromJid(o):null:this.from=o,this.user=!0},s.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=!1;if(!this.ns)return!0;var n=this;return s.forEachChild(e,null,function(e){n.getNamespace(e)===n.ns&&(t=!0)}),t=t||this.getNamespace(e)===this.ns},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=s.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!s.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(e){throw s._handleError(e),e}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},s.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},s.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},s.Connection=function(e,t){this.service=e,this.options=t||{};var r=this.options.protocol||"";0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===r.indexOf("ws")?this._proto=new s.Websocket(this):this._proto=new s.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),n.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms);for(var i in s._connectionPlugins)if(s._connectionPlugins.hasOwnProperty(i)){var o=s._connectionPlugins[i],a=function(){};a.prototype=o,this[i]=new a,this[i].init(this)}},s.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,i,o,a){this.jid=e,this.authzid=s.getBareJidFromJid(this.jid),this.authcid=a||s.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=s.getDomainFromJid(this.jid),this._changeConnectStatus(s.Status.CONNECTING,null),this._proto._connect(r,i,o)},attach:function(e,t,n,r,i,o,a){if(!(this._proto instanceof s.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(e,t,n,r,i,o,a)},restore:function(e,t,n,r,i){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(e,t,n,r,i)},_sessionCachingSupported:function(){if(this._proto instanceof s.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,r){var i=null,o=this;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendPresence"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler(function(e){i&&o.deleteTimedHandler(i),"error"===e.getAttribute("type")?n&&n(e):t&&t(e)},null,"presence",null,a);r&&(i=this.addTimedHandler(r,function(){return o.deleteHandler(s),n&&n(null),!1}))}return this.send(e),a},sendIQ:function(e,t,n,r){var i=null,o=this;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendIQ"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler(function(e){i&&o.deleteTimedHandler(i);var r=e.getAttribute("type");if("result"===r)t&&t(e);else{if("error"!==r)throw{name:"StropheError",message:"Got bad IQ type of "+r};n&&n(e)}},null,"iq",["error","result"],a);r&&(i=this.addTimedHandler(r,function(){return o.deleteHandler(s),n&&n(null),!1}))}return this.send(e),a},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(e,t){var n=new s.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,i,o,a){var u=new s.Handler(e,t,n,r,i,o,a);return this.addHandlers.push(u),u},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},e=e||[s.SASLAnonymous,s.SASLExternal,s.SASLMD5,s.SASLOAuthBearer,s.SASLXOAuth2,s.SASLPlain,s.SASLSHA1],e.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(s.Status.DISCONNECTING,e),s.info("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=a({xmlns:s.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else s.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t,n){for(var r in s._connectionPlugins)if(s._connectionPlugins.hasOwnProperty(r)){var i=this[r];if(i.statusChanged)try{i.statusChanged(e,t)}catch(e){s.error(r+" plugin caused an exception changing status: "+e)}}if(this.connect_callback)try{this.connect_callback(e,t,n)}catch(e){s._handleError(e),s.error("User connection callback caused an exception: "+e)}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),s.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(s.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){s.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){this.xmlInput!==s.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==s.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(s.serialize(n)));for(var r,i;this.removeHandlers.length>0;)i=this.removeHandlers.pop(),(r=this.handlers.indexOf(i))>=0&&this.handlers.splice(r,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var o,a,u=n.getAttribute("type");if(null!==u&&"terminate"===u){if(this.disconnecting)return;return o=n.getAttribute("condition"),a=n.getElementsByTagName("conflict"),null!==o?("remote-stream-error"===o&&a.length>0&&(o="conflict"),this._changeConnectStatus(s.Status.CONNFAIL,o)):this._changeConnectStatus(s.Status.CONNFAIL,s.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(o)}var c=this;s.forEachChild(n,null,function(e){var t,n;for(n=c.handlers,c.handlers=[],t=0;t<n.length;t++){var r=n[t];try{!r.isMatch(e)||!c.authenticated&&r.user?c.handlers.push(r):r.run(e)&&c.handlers.push(r)}catch(e){s.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}},mechanisms:{},_connect_cb:function(e,t,n){s.info("_connect_cb was called"),this.connected=!0;var r;try{r=this._proto._reqToData(e)}catch(e){if("badformat"!==e)throw e;this._changeConnectStatus(s.Status.CONNFAIL,s.ErrorCondition.BAD_FORMAT),this._doDisconnect(s.ErrorCondition.BAD_FORMAT)}if(r){this.xmlInput!==s.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==s.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(s.serialize(r)));if(this._proto._connect_cb(r)!==s.Status.CONNFAIL){if(!(r.getElementsByTagNameNS?r.getElementsByTagNameNS(s.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0))return void this._proto._no_auth_received(t);var i,o,a=[],u=r.getElementsByTagName("mechanism");if(u.length>0)for(i=0;i<u.length;i++)o=s.getText(u[i]),this.mechanisms[o]&&a.push(this.mechanisms[o]);if(0===a.length&&0===r.getElementsByTagName("auth").length)return void this._proto._no_auth_received(t);!1!==this.do_authentication&&this.authenticate(a)}}},sortMechanismsByPriority:function(e){var t,n,r,i;for(t=0;t<e.length-1;++t){for(r=t,n=t+1;n<e.length;++n)e[n].prototype.priority>e[r].prototype.priority&&(r=n);r!==t&&(i=e[t],e[t]=e[r],e[r]=i)}return e},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);var t=0,n=!1;for(t=0;t<e.length;++t)if(e[t].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[t],this._sasl_mechanism.onStart(this);var i=r("auth",{xmlns:s.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var o=this._sasl_mechanism.onChallenge(this,null);i.t(btoa(o))}this.send(i.tree()),n=!0;break}return n},_attemptLegacyAuth:function(){null===s.getNodeFromJid(this.jid)?(this._changeConnectStatus(s.Status.CONNFAIL,s.ErrorCondition.MISSING_JID_NODE),this.disconnect(s.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(s.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(o({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:s.NS.AUTH}).c("username",{}).t(s.getNodeFromJid(this.jid)).tree()))},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(e){var t=atob(s.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),i=r("response",{xmlns:s.NS.SASL});return""!==n&&i.t(btoa(n)),this.send(i.tree()),!0},_auth1_cb:function(e){var t=o({type:"set",id:"_auth_2"}).c("query",{xmlns:s.NS.AUTH}).c("username",{}).t(s.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return s.getResourceFromJid(this.jid)||(this.jid=s.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(s.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){if(this._sasl_data["server-signature"]){var t,n=atob(s.getText(e)),r=/([a-z]+)=([^,]+)(,|$)/,i=n.match(r);if("v"===i[1]&&(t=i[2]),t!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}s.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var o=[],a=function(e,t){for(;e.length;)this.deleteHandler(e.pop());return this._sasl_auth1_cb.bind(this)(t),!1};return o.push(this._addSysHandler(function(e){a.bind(this)(o,e)}.bind(this),null,"stream:features",null,null)),o.push(this._addSysHandler(function(e){a.bind(this)(o,e)}.bind(this),s.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var t,n;for(t=0;t<e.childNodes.length;t++)n=e.childNodes[t],"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(s.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=s.getResourceFromJid(this.jid);return r?this.send(o({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:s.NS.BIND}).c("resource",{}).t(r).tree()):this.send(o({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:s.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"===e.getAttribute("type")){s.info("SASL binding failed.");var t,n=e.getElementsByTagName("conflict");return n.length>0&&(t=s.ErrorCondition.CONFLICT),this._changeConnectStatus(s.Status.AUTHFAIL,t,e),!1}var r,i=e.getElementsByTagName("bind");if(!(i.length>0))return s.info("SASL binding failed."),this._changeConnectStatus(s.Status.AUTHFAIL,null,e),!1;r=i[0].getElementsByTagName("jid"),r.length>0&&(this.jid=s.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(o({type:"set",id:"_session_auth_2"}).c("session",{xmlns:s.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(s.Status.CONNECTED,null)))},_sasl_session_cb:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(s.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return s.info("Session creation failed."),this._changeConnectStatus(s.Status.AUTHFAIL,null,e),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(s.Status.AUTHFAIL,null,e),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(s.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(s.Status.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new s.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,i){var o=new s.Handler(e,t,n,r,i);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return s.info("_onDisconnectTimeout was called"),this._changeConnectStatus(s.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e,t,n,r;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)t=this.removeTimeds.pop(),(e=this.timedHandlers.indexOf(t))>=0&&this.timedHandlers.splice(e,1);var i=(new Date).getTime();for(r=[],e=0;e<this.timedHandlers.length;e++)t=this.timedHandlers[e],!this.authenticated&&t.user||(n=t.lastCalled+t.period,n-i<=0?t.run()&&r.push(t):r.push(t));this.timedHandlers=r,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100))}},s.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},s.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},s.SASLAnonymous=function(){},s.SASLAnonymous.prototype=new s.SASLMechanism("ANONYMOUS",!1,20),s.SASLAnonymous.prototype.test=function(e){return null===e.authcid},s.SASLPlain=function(){},s.SASLPlain.prototype=new s.SASLMechanism("PLAIN",!0,50),s.SASLPlain.prototype.test=function(e){return null!==e.authcid},s.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,n.utf16to8(t)},s.SASLSHA1=function(){},s.SASLSHA1.prototype=new s.SASLMechanism("SCRAM-SHA-1",!0,70),s.SASLSHA1.prototype.test=function(e){return null!==e.authcid},s.SASLSHA1.prototype.onChallenge=function(r,i,o){var a=o||t.hexdigest(1234567890*Math.random()),s="n="+n.utf16to8(r.authcid);return s+=",r=",s+=a,r._sasl_data.cnonce=a,r._sasl_data["client-first-message-bare"]=s,s="n,,"+s,this.onChallenge=function(t,r){for(var i,o,a,s,u,c,d,l,f,h,p,v,m="c=biws,",g=t._sasl_data["client-first-message-bare"]+","+r+",",_=t._sasl_data.cnonce,y=/([a-z]+)=([^,]+)(,|$)/;r.match(y);){var b=r.match(y);switch(r=r.replace(b[0],""),b[1]){case"r":i=b[2];break;case"s":o=b[2];break;case"i":a=b[2]}}if(i.substr(0,_.length)!==_)return t._sasl_data={},t._sasl_failure_cb();for(m+="r="+i,g+=m,o=atob(o),o+="\0\0\0",f=n.utf16to8(t.pass),s=c=e.core_hmac_sha1(f,o),d=1;d<a;d++){for(u=e.core_hmac_sha1(f,e.binb2str(c)),l=0;l<5;l++)s[l]^=u[l];c=u}for(s=e.binb2str(s),h=e.core_hmac_sha1(s,"Client Key"),p=e.str_hmac_sha1(s,"Server Key"),v=e.core_hmac_sha1(e.str_sha1(e.binb2str(h)),g),t._sasl_data["server-signature"]=e.b64_hmac_sha1(p,g),l=0;l<5;l++)h[l]^=v[l];return m+=",p="+btoa(e.binb2str(h))}.bind(this),s},s.SASLMD5=function(){},s.SASLMD5.prototype=new s.SASLMechanism("DIGEST-MD5",!1,60),s.SASLMD5.prototype.test=function(e){return null!==e.authcid},s.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},s.SASLMD5.prototype.onChallenge=function(e,r,i){for(var o,a=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,s=i||t.hexdigest(""+1234567890*Math.random()),u="",c=null,d="";r.match(a);)switch(o=r.match(a),r=r.replace(o[0],""),o[2]=o[2].replace(/^"(.+)"$/,"$1"),o[1]){case"realm":u=o[2];break;case"nonce":d=o[2];break;case"qop":o[2];break;case"host":c=o[2]}var l=e.servtype+"/"+e.domain;null!==c&&(l=l+"/"+c);var f=n.utf16to8(e.authcid+":"+u+":"+this._connection.pass),h=t.hash(f)+":"+d+":"+s,p="AUTHENTICATE:"+l,v="";return v+="charset=utf-8,",v+="username="+this._quote(n.utf16to8(e.authcid))+",",v+="realm="+this._quote(u)+",",v+="nonce="+this._quote(d)+",",v+="nc=00000001,",v+="cnonce="+this._quote(s)+",",v+="digest-uri="+this._quote(l)+",",v+="response="+t.hexdigest(t.hexdigest(h)+":"+d+":00000001:"+s+":auth:"+t.hexdigest(p))+",",v+="qop=auth",this.onChallenge=function(){return""},v},s.SASLOAuthBearer=function(){},s.SASLOAuthBearer.prototype=new s.SASLMechanism("OAUTHBEARER",!0,40),s.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},s.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",t+="",n.utf16to8(t)},s.SASLExternal=function(){},s.SASLExternal.prototype=new s.SASLMechanism("EXTERNAL",!0,10),s.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},s.SASLXOAuth2=function(){},s.SASLXOAuth2.prototype=new s.SASLMechanism("X-OAUTH2",!0,30),s.SASLXOAuth2.prototype.test=function(e){return null!==e.pass},s.SASLXOAuth2.prototype.onChallenge=function(e){var t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,n.utf16to8(t)},{Strophe:s,$build:r,$iq:o,$msg:i,$pres:a,SHA1:e,MD5:t,b64_hmac_sha1:e.b64_hmac_sha1,b64_sha1:e.b64_sha1,str_hmac_sha1:e.str_hmac_sha1,str_sha1:e.str_sha1}}),function(t,i){if("function"==typeof r&&r.amd)r("strophe-bosh",["strophe-core"],function(e){return i(e.Strophe,e.$build)});else{var o=n("./core");e.exports=i(o.Strophe,o.$build)}}(0,function(e,t){return e.Request=function(t,n,r,i){this.id=++e._requestId,this.xmlData=t,this.data=e.serialize(t),this.origFunc=n,this.func=n,this.rid=r,this.date=NaN,this.sends=i||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},e.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,"parsererror"===t.tagName)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),e.error("responseXML: "+e.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText){if(e.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),!(t=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement))throw new Error("Parsing produced null node");if(t.querySelector("parsererror"))throw e.error("invalid response received: "+t.querySelector("parsererror").textContent),e.error("responseText: "+this.xhr.responseText),"badformat"}return t},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},e.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},e.Bosh.prototype={strip:null,_buildBody:function(){var n=t("body",{rid:this.rid++,xmlns:e.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(t,n,r){this.wait=t||this.wait,this.hold=n||this.hold,this.errors=0;var i=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":e.NS.BOSH});r&&i.attrs({route:r});var o=this._conn._connect_cb;this._requests.push(new e.Request(i.tree(),this._onRequestStateChange.bind(this,o.bind(this._conn)),i.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(t,n,r,i,o,a,s){this._conn.jid=t,this.sid=n,this.rid=r,this._conn.connect_callback=i,this._conn.domain=e.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=o||this.wait,this.hold=a||this.hold,this.window=s||this.window,this._conn._changeConnectStatus(e.Status.ATTACHED,null)},_restore:function(t,n,r,i,o){var a=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(void 0!==a&&null!==a&&a.rid&&a.sid&&a.jid&&(void 0===t||null===t||e.getBareJidFromJid(a.jid)===e.getBareJidFromJid(t)||null===e.getNodeFromJid(t)&&e.getDomainFromJid(a.jid)===t)))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(a.jid,a.sid,a.rid,n,r,i,o)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(t){var n,r,i=t.getAttribute("type");if(null!==i&&"terminate"===i)return n=t.getAttribute("condition"),e.error("BOSH-Connection failed: "+n),r=t.getElementsByTagName("conflict"),null!==n?("remote-stream-error"===n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(e.Status.CONNFAIL,n)):this._conn._changeConnectStatus(e.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),e.Status.CONNFAIL;this.sid||(this.sid=t.getAttribute("sid"));var o=t.getAttribute("requests");o&&(this.window=parseInt(o,10));var a=t.getAttribute("hold");a&&(this.hold=parseInt(a,10));var s=t.getAttribute("wait");s&&(this.wait=parseInt(s,10));var u=t.getAttribute("inactivity");u&&(this.inactivity=parseInt(u,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t,n=this._getRequestStatus(e);(t=this._conn.protocolErrorHandlers.HTTP[n])&&t.call(this,n)},_hitError:function(t){this.errors++,e.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(t){e.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),t=t?t.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,t),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var e;this._requests.length>0;)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}},_onIdle:function(){var t=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===t.length&&!this._conn.disconnecting&&(e.info("no requests during idle cycle, sending blank request"),t.push(null)),!this._conn.paused){if(this._requests.length<2&&t.length>0){for(var n=this._buildBody(),r=0;r<t.length;r++)null!==t[r]&&("restart"===t[r]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":e.NS.BOSH}):n.cnode(t[r]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var i=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),i>Math.floor(e.TIMEOUT*this.wait)&&(e.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(e.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(t,n){var r;if(4===t.xhr.readyState)try{r=t.xhr.status}catch(t){e.error("Caught an error while retrieving a request's status, reqStatus: "+r)}return void 0===r&&(r="number"==typeof n?n:0),r},_onRequestStateChange:function(t,n){if(e.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)return void(n.abort=!1);if(4===n.xhr.readyState){var r=this._getRequestStatus(n);if(this.lastResponseHeaders=n.xhr.getAllResponseHeaders(),this.disconnecting&&r>=400)return this._hitError(r),void this._callProtocolErrorHandlers(n);var i=r>0&&r<500,o=n.sends>this._conn.maxRetries;if((i||o)&&(this._removeRequest(n),e.debug("request id "+n.id+" should now be removed")),200===r){var a=this._requests[0]===n;(this._requests[1]===n||a&&this._requests.length>0&&this._requests[0].age()>Math.floor(e.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),e.debug("request id "+n.id+"."+n.sends+" got 200"),t(n),this.errors=0}else 0===r||r>=400&&r<600||r>=12e3?(e.error("request id "+n.id+"."+n.sends+" error "+r+" happened"),this._hitError(r),this._callProtocolErrorHandlers(n),r>=400&&r<500&&(this._conn._changeConnectStatus(e.Status.DISCONNECTING,null),this._conn._doDisconnect())):e.error("request id "+n.id+"."+n.sends+" error "+r+" happened");i||o?o&&!this._conn.connected&&this._conn._changeConnectStatus(e.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(t){var n=this,r=this._requests[t],i=this._getRequestStatus(r,-1);if(r.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var o=r.age(),a=!isNaN(o)&&o>Math.floor(e.TIMEOUT*this.wait),s=null!==r.dead&&r.timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait),u=4===r.xhr.readyState&&(i<1||i>=500);if((a||s||u)&&(s&&e.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),r.abort=!0,r.xhr.abort(),r.xhr.onreadystatechange=function(){},this._requests[t]=new e.Request(r.xmlData,r.origFunc,r.rid,r.sends),r=this._requests[t]),0===r.xhr.readyState){e.debug("request id "+r.id+"."+r.sends+" posting");try{var c=this._conn.options.contentType||"text/xml; charset=utf-8";r.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==r.xhr.setRequestHeader&&r.xhr.setRequestHeader("Content-Type",c),this._conn.options.withCredentials&&(r.xhr.withCredentials=!0)}catch(t){return e.error("XHR open failed: "+t.toString()),this._conn.connected||this._conn._changeConnectStatus(e.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var d=function(){if(r.date=new Date,n._conn.options.customHeaders){var e=n._conn.options.customHeaders;for(var t in e)e.hasOwnProperty(t)&&r.xhr.setRequestHeader(t,e[t])}r.xhr.send(r.data)};if(r.sends>1){var l=1e3*Math.min(Math.floor(e.TIMEOUT*this.wait),Math.pow(r.sends,3));setTimeout(function(){d()},l)}else d();r.sends++,this._conn.xmlOutput!==e.Connection.prototype.xmlOutput&&(r.xmlData.nodeName===this.strip&&r.xmlData.childNodes.length?this._conn.xmlOutput(r.xmlData.childNodes[0]):this._conn.xmlOutput(r.xmlData)),this._conn.rawOutput!==e.Connection.prototype.rawOutput&&this._conn.rawOutput(r.data)}else e.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+r.xhr.readyState)},_removeRequest:function(t){e.debug("removing request");var n;for(n=this._requests.length-1;n>=0;n--)t===this._requests[n]&&this._requests.splice(n,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(e){if("parsererror"!==e)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(t){e.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});t&&n.cnode(t.tree());var r=new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(r),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?e.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):e.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},e}),function(t,i){if("function"==typeof r&&r.amd)r("strophe-websocket",["strophe-core"],function(e){return i(e.Strophe,e.$build)});else{var o=n("./core");e.exports=i(o.Strophe,o.$build)}}(0,function(e,t){return e.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==t.indexOf("/")?n+=window.location.pathname+t:n+=t,e.service=n}},e.Websocket.prototype={_buildStream:function(){return t("open",{xmlns:e.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(t,n){var r;if(r=t.getElementsByTagNameNS?t.getElementsByTagNameNS(e.NS.STREAM,"error"):t.getElementsByTagName("stream:error"),0===r.length)return!1;for(var i=r[0],o="",a="",s=0;s<i.childNodes.length;s++){var u=i.childNodes[s];if("urn:ietf:params:xml:ns:xmpp-streams"!==u.getAttribute("xmlns"))break;"text"===u.nodeName?a=u.textContent:o=u.nodeName}var c="WebSocket stream error: ";return c+=o||"unknown",a&&(c+=" - "+a),e.error(c),this._conn._changeConnectStatus(n,o),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(t){if(this._check_streamerror(t,e.Status.CONNFAIL))return e.Status.CONNFAIL},_handleStreamStart:function(t){var n=!1,r=t.getAttribute("xmlns");"string"!=typeof r?n="Missing xmlns in <open />":r!==e.NS.FRAMING&&(n="Wrong xmlns in <open />: "+r);var i=t.getAttribute("version");return"string"!=typeof i?n="Missing version in <open />":"1.0"!==i&&(n="Wrong version in <open />: "+i),!n||(this._conn._changeConnectStatus(e.Status.CONNFAIL,n),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(t){if(0===t.data.indexOf("<open ")||0===t.data.indexOf("<?xml")){var n=t.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===n)return;var r=(new DOMParser).parseFromString(n,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(t.data),this._handleStreamStart(r)&&this._connect_cb(r)}else if(0===t.data.indexOf("<close ")){var i=(new DOMParser).parseFromString(t.data,"text/xml").documentElement;this._conn.xmlInput(i),this._conn.rawInput(t.data);var o=i.getAttribute("see-other-uri");if(o){var a=this._conn.service,s=a.indexOf("wss:")>=0&&o.indexOf("wss:")>=0||a.indexOf("ws:")>=0;s&&(this._conn._changeConnectStatus(e.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=o,this._connect())}else this._conn._changeConnectStatus(e.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{var u=this._streamWrap(t.data),c=(new DOMParser).parseFromString(u,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(c,null,t.data)}},_disconnect:function(n){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){n&&this._conn.send(n);var r=t("close",{xmlns:e.NS.FRAMING});this._conn.xmlOutput(r.tree());var i=e.serialize(r);this._conn.rawOutput(i);try{this.socket.send(i)}catch(t){e.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){e.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.onerror=null,this.socket.close()}catch(e){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(t){this._conn.connected&&!this._conn.disconnecting?(e.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):t&&1006===t.code&&!this._conn.connected&&this.socket?(e.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(e.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):e.info("Websocket closed")},_no_auth_received:function(t){e.error("Server did not offer a supported authentication mechanism"),this._changeConnectStatus(e.Status.CONNFAIL,e.ErrorCondition.NO_AUTH_MECH),t&&t.call(this._conn),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(t){e.error("Websocket error "+t),this._conn._changeConnectStatus(e.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var t=this._conn._data;if(t.length>0&&!this._conn.paused){for(var n=0;n<t.length;n++)if(null!==t[n]){var r,i;r="restart"===t[n]?this._buildStream().tree():t[n],i=e.serialize(r),this._conn.xmlOutput(r),this._conn.rawOutput(i),this.socket.send(i)}this._conn._data=[]}},_onMessage:function(t){var n,r,i='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(t.data===i)return this._conn.rawInput(i),this._conn.xmlInput(t),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===t.data.search("<open ")){if(n=(new DOMParser).parseFromString(t.data,"text/xml").documentElement,!this._handleStreamStart(n))return}else r=this._streamWrap(t.data),n=(new DOMParser).parseFromString(r,"text/xml").documentElement;return this._check_streamerror(n,e.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===n.firstChild.nodeName&&"unavailable"===n.firstChild.getAttribute("type")?(this._conn.xmlInput(n),void this._conn.rawInput(e.serialize(n))):void this._conn._dataRecv(n,t.data)},_onOpen:function(){e.info("Websocket open");var t=this._buildStream();this._conn.xmlOutput(t.tree());var n=e.serialize(t);this._conn.rawOutput(n),this.socket.send(n)},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e}),function(t){if("function"==typeof r&&r.amd)r("strophe",["strophe-core","strophe-bosh","strophe-websocket"],function(e){return e});else{var i=n("./core");n("./bosh"),n("./websocket"),e.exports=i}}(),n(["strophe-polyfill"]),n("strophe")}),t.Strophe=Strophe,t.$build=$build,t.$iq=$iq,t.$msg=$msg,t.$pres=$pres,t.SHA1=SHA1,t.MD5=MD5,t.b64_hmac_sha1=b64_hmac_sha1,t.b64_sha1=b64_sha1,t.str_hmac_sha1=str_hmac_sha1,t.str_sha1=str_sha1}).call(window)},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(190),o=r(i),a=n(536),s=r(a);t.default="production"!==e.env.NODE_ENV?s.default:o.default}).call(t,n(39))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleStream=t.Logger=t.LoggerFactory=t.getDefaultLogger=void 0;var r=n(589),i=n(299),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(300);t.getDefaultLogger=r.getDefaultLogger,t.LoggerFactory=r.LoggerFactory,t.Logger=o.default,t.ConsoleStream=a.ConsoleStream},function(e,t,n){"use strict";var r,i,o,a,s,u,c,d=n(571),l=n(585),f=Function.prototype.apply,h=Function.prototype.call,p=Object.create,v=Object.defineProperty,m=Object.defineProperties,g=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return l(t),g.call(this,"__ee__")?n=this.__ee__:(n=_.value=p(null),v(this,"__ee__",_),_.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return l(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(l(t),!g.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},a=function(e){var t,n,r,i,o;if(g.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)f.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];f.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},u={on:d(r),once:d(i),off:d(o),emit:d(a)},c=m({},u),e.exports=t=function(e){return null==e?p(c):m(Object(e),u)},t.methods=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e.isWrapped?e:new g(e)}function a(e){var t=(0,u.$build)(e.name,e.attributes);return(0,d.default)(e.body)?t.t(e.body):(0,f.default)(e.body)?e.body.forEach(function(e){t.cnode(a(e)).up()}):(0,p.default)(e.body)&&t.cnode(a(e.body)).up(),t.tree()}Object.defineProperty(t,"__esModule",{value:!0}),t.build=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.buildStanza=a;var u=n(1),c=n(8),d=r(c),l=n(2),f=r(l),h=n(9),p=r(h),v=n(57),m=r(v),g=function(){function e(t){i(this,e),(0,m.default)("stanza",t,"Invalid Argument, 'stanza' cannot be "+t),this.stanza=t,this.isWrapped=!0}return s(e,[{key:"attr",value:function(e,t){return t?this.stanza.setAttribute(e,t):this.stanza.getAttribute(e)}},{key:"find",value:function(t,n){for(var r=this.stanza.getElementsByTagName(t),i=[],o=0,a=r.length;o<a;o++){var s=new e(r[o]);n&&s.attr("xmlns")!==n||i.push(s)}return i}},{key:"findFirst",value:function(e,t){var n=this.find(e,t)[0];return n||null}},{key:"children",value:function(){return Array.prototype.slice.call(this.stanza.childNodes).map(function(t){return new e(t)})}},{key:"name",value:function(){return this.stanza.tagName}},{key:"content",value:function(){return this.stanza.textContent}}]),e}();t.build=a,o.build=a,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(615);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(616);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(617);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var a=n(135);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,n){function r(e){return"string"==typeof e||!o(e)&&a(e)&&i(e)==s}var i=n(32),o=n(2),a=n(20),s="[object String]";e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function r(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function i(e){return"Object"===r(e)}function o(e){return"String"===r(e)}function a(e){return"Number"===r(e)}function s(e){return"Array"===r(e)}function u(e){return"Date"===r(e)}function c(e){return"Function"===r(e)}function d(e){return"Null"===r(e)}function l(e){return"Undefined"===r(e)}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))}function h(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,writable:!1,value:n})}function p(e,t){var n={};Object.keys(t).forEach(function(e){n[e]={configurable:!1,enumerable:!0,writable:!1,value:t[e]}}),Object.defineProperties(e,n)}function v(e,t){h(e,t,e[t])}function m(e,t){var n={};t.forEach(function(t){n[t]=e[t]}),p(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=i,t.isString=o,t.isNumber=a,t.isArray=s,t.isDate=u,t.isFunction=c,t.isNull=d,t.isUndefined=l,t.clone=f,t.defineFrozenProperty=h,t.defineFrozenProperties=p,t.freezeProperty=v,t.freezeProperties=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODE_CHANGED="mode",t.MESSAGE_RECEIVED="message",t.REQUEST_RECEIVED="request",t.PEER_JOINED="joined",t.PEER_LEFT="left",t.MODE_ACTIVE="active",t.MODE_PASSIVE="passive"},function(e,t,n){e.exports=n(594)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONNECTION_SESSION="m800-web-sdk/core/connection-session",t.DEFAULT_IM_ENDPOINTS="m800-web-sdk-default-im-endpoints",t.IM_ROOM_LIST="m800-web-sdk/ImManager/rooms",t.SSO_TOKEN="m800-web-sdk/core/sso-token",t.USER_TOKEN_RANDOM_KEYS="14352",t.USER_TOKEN_PREFIX="m800-web-sdk/user-token-",t.USER_INFO="m800-web-sdk-user",t.ALLOCATIONS="m800-web-sdk/allocations",t.UNQIUE_ID="m800-unique-id",t.TAB_PARTICIPANTS="peer.participants",t.TAB_ID="m800-strophe-bosh-id",t.TAB_MASTER_ID="m800-web-sdk/peer-master-id",t.APP_STATE="m800-web-sdk.app.state",t.BOSH_SESSION="strophe-bosh-session",t.CRYPTO_SALT_PREFIX="m800-web-sdk-salt",t.ROOM_LIST="m800-web-sdk/im/rooms",t.ROOM_ID_LIST="m800-web-sdk/im/room-id-list",t.CONTACT_LIST="m800-web-sdk/contact/contact-list",t.LAST_SEEN="m800-web-sdk/contact/last-seen",t.ACTIVE_DEVICE_LIST="m800-web-sdk/core/active-device-list",t.APP_CONFIG="m800-web-sdk/core/app-config",t.CALL_STATES="m800-web-sdk/call/call-states",t.CALL_OWNERS="m800-web-sdk/call/call-owners"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(24),l=r(d),f=n(259),h=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),t}(f.BaseError);t.default=h},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=t.namespace,i=t.name,o=t.type,a=t.id,s=t.from;return e.addHandler(n,r,i,o,a,s)}function o(e,t){e.deleteHandler(t)}function a(e,t,n,r){var o=[],a=function(e){return o.push(e)};return setTimeout(function(){for(;o.length>0;){var e=o.splice(0,1),t=d(e,1),r=t[0];n(r)}a=n},r),i(e,t,function(e){return a(e),!0})}function s(e){return e+":"+Date.now()+":"+Math.random()+":"+y}function u(e){return e+":"+Date.now()+":"+Math.random()+":"+b}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,h.default)("endpoint",e,g.isValidBaseUrl,"Invalid IM server url.");var r=e+"/http-bind/",i=new l.Strophe.Connection(r,{keepalive:!0,withCredentials:!!n.withCredentials});return i.Connect.setBoshBodyAttrs(t),i.xmlInput=function(e){_.trace("received stanza: \n"+(0,m.default)(e))},i.xmlOutput=function(e){_.trace("sent stanza: \n"+(0,m.default)(e))},i}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(1),f=n(3),h=r(f),p=n(4),v=n(309),m=r(v),g=n(40),_=p.LoggerFactory.getInstance().getLogger("util/strophe"),y="m800web-message",b="m800web-iq";t.default={addStanzaHandler:i,deleteStanzaHandler:o,addDelayedStanzaHandler:a,generateMessageId:s,generateIqId:u,createXmppConn:c},e.exports=t.default},function(e,t,n){var r=n(213),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;var r=n(396),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){e.exports={default:n(430),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(250),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(453),o=r(i),a=n(457),s=r(a),u=n(250),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},,function(e,t,n){function r(e){if(!o(e))return!1;var t=i(e);return t==s||t==u||t==a||t==c}var i=n(32),o=n(9),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):u(e)}var i=n(400),o=n(414),a=n(51),s=n(2),u=n(421);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(292),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default.newInstance({separator:".",recurrent:!0}),e.exports=t.default},function(e,t,n){!function(n,r){e.exports=t=r()}(0,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=0;i<t;i+=4){var o=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var i=(n<<16)+t&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}}(4294967296*(n||e.random()));n=987654071*o(),r.push(4294967296*o()|0)}return new a.init(r,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=4*o,u=i/s;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*o,d=e.min(4*c,i);if(c){for(var l=0;l<c;l+=o)this._doProcessBlock(r,l);var f=r.splice(0,c);n.sigBytes-=d}return new a.init(f,d)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(i.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e})},function(e,t,n){var r=n(163)("wks"),i=n(111),o=n(43).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if("string"==typeof e)return{message:e};if("object"===(void 0===e?"undefined":a(e))&&e||"function"==typeof e){var t={};return"string"==typeof e.name&&(t.name=e.name),"string"==typeof e.message&&(t.message=e.message),t}return e}function o(e){var t=e.name,n=e.message;return"Error"===t?new Error(n):((0,u.default)("name",t,function(e){return d.default[e]},"please specify webSDK defined error type or generic `Error` type."),new(0,d.default[t])(n))}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.serializeError=i,t.deserializeError=o;var s=n(3),u=r(s),c=n(0),d=r(c)},function(e,t,n){function r(e){return null==e?void 0===e?u:s:c&&c in Object(e)?o(e):a(e)}var i=n(63),o=n(366),a=n(367),s="[object Null]",u="[object Undefined]",c=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e){return null!=e&&o(e.length)&&!i(e)}var i=n(26),o=n(144);e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=e;n.length<t-1;){var i=Math.ceil(Math.random()*(r.length-(t-n.length-1)));n.push(r.substring(0,i)),r=r.substring(i)}return n.push(r),n}function i(e){return(0,s.default)(e)&&e.length>0}function o(e){if(!(0,s.default)(e))return e;switch(e){case"":return"";case"true":return!0;case"false":return!1;case"null":return null;case"undefined":return;default:var t=+e;return isNaN(t)?e:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.splitString=r,t.isNonEmptyString=i,t.toPrimitiveValue=o;var a=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return(0,o.default)(e).toString()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(125),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){return{setItem:function(t,n){return e.setItem(r(t),n)},getItem:function(t){return e.getItem(r(t))},removeItem:function(t){return e.removeItem(r(t))},clear:function(){return e.clear()},key:function(t){return e.key(t)}}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECEIPTS="urn:xmpp:receipts",t.CHAT_STATES="http://jabber.org/protocol/chatstates",t.RESULT_SET="http://jabber.org/protocol/rsm",t.JABBER_SEARCH="jabber:iq:search",t.JABBER_CLIENT="jabber:client",t.MAAII="urn:maaii",t.MAAII_SERVER_RECEIPTS="urn:maaii:receipts:server",t.MAAII_RECEIPTS="urn:maaii:receipts",t.MAAII_GROUP="urn:maaii:group",t.CARBONS="urn:xmpp:carbons:2",t.FORWARD="urn:xmpp:forward:0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CONNECTING="connecting",t.CONNECTED="connected",t.DISCONNECTED="disconnected"},function(e,t,n){function r(e){return a(e)?i(e):o(e)}var i=n(224),o=n(241),a=n(33);e.exports=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var d,l,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var h,p=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return!!(0,f.default)(e)&&/^https?:\/\/(?!-)[\w\d.-]{1,63}(:\d+)?/.test(e)}function o(e,t,n){if(!d.default.validate(e,t)){var r=d.default.error;throw new n(r.message+" "+r.dataPath)}}function a(e,t){return!!(0,f.default)(e)&&!!(0,h.parse)(e,t).country}function s(e){return e>=0&&e===Math.floor(e)}function u(e){return s(e)&&0!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidBaseUrl=i,t.validateBySchema=o,t.isValidPhoneNumber=a,t.isNonNegativeInteger=s,t.isPositiveInteger=u;var c=n(302),d=r(c),l=n(8),f=r(l),h=n(303)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STATUS_CHANGED="status-changed"},function(e,t,n){var r=n(43),i=n(16),o=n(149),a=n(66),s=n(54),u=function(e,t,n){var c,d,l,f=e&u.F,h=e&u.G,p=e&u.S,v=e&u.P,m=e&u.B,g=e&u.W,_=h?i:i[t]||(i[t]={}),y=_.prototype,b=h?r:p?r[t]:(r[t]||{}).prototype;h&&(n=t);for(c in n)(d=!f&&b&&void 0!==b[c])&&s(_,c)||(l=d?b[c]:n[c],_[c]=h&&"function"!=typeof b[c]?n[c]:m&&d?o(l,r):g&&b[c]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((_.virtual||(_.virtual={}))[c]=l,e&u.R&&y&&!y[c]&&a(y,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(52),i=n(232),o=n(150),a=Object.defineProperty;t.f=n(53)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(188),o=r(i),a=n(533),s=r(a),u=n(534),c=r(u),d=n(14),l=(0,s.default)(navigator.userAgent),f={get hardwareId(){return l.browser.name+" "+l.browser.version},get osId(){return l.os.name+" "+l.os.version},get uniqueId(){var e=localStorage.getItem(d.UNQIUE_ID);return e||(e=o.default.v4(),localStorage.setItem(d.UNQIUE_ID,e)),e},get platformId(){return"com.maaii.platform.web"},get language(){if("undefined"!=typeof navigator)return navigator.language||navigator.languages[0]||navigator.userLanguage},get timezone(){return c.default.determine().name()}};t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.salt||O,r=t.keySize||$,i={keySize:r/E};return(0,d.default)(e,n,i).toString()}function o(e,t){var n=(0,f.default)(e);return p.default.encrypt(n+e,t).toString()}function a(e,t){try{var n=p.default.decrypt(e,t).toString(m.default),r=n.substring(0,S),i=n.substring(S);if(r!==(0,f.default)(i).toString())throw new b.CryptoError("The data is corrupted and cannot be decrypted.");return i}catch(e){if(e instanceof b.CryptoError)throw e;throw new b.CryptoError("The data is corrupted and cannot be decrypted.",e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.generateKey=i,t.encrypt=o,t.decrypt=a;var u=n(188),c=n(566),d=r(c),l=n(125),f=r(l),h=n(294),p=r(h),v=n(296),m=r(v),g=n(34),_=n(35),y=r(_),b=n(0),w=n(14),$=128,E=32,S=64,O=function(){var e=[];if("undefined"!=typeof localStorage){var t=(0,y.default)(localStorage);"ioeau".split("").every(function(n){var r=t.getItem(w.CRYPTO_SALT_PREFIX+"/"+n);return!!r&&(e.push(r),!0)})}return e.length<5?null:e.join("")}()||function(){var e=(0,u.v4)(),t=(0,g.splitString)(e,5),n=s(t,5),r=n[0],i=n[1],o=n[2],a=n[3],c=n[4];if("undefined"!=typeof localStorage){var d=(0,y.default)(localStorage);d.setItem(w.CRYPTO_SALT_PREFIX+"/a",a),d.setItem(w.CRYPTO_SALT_PREFIX+"/e",o),d.setItem(w.CRYPTO_SALT_PREFIX+"/i",r),d.setItem(w.CRYPTO_SALT_PREFIX+"/o",i),d.setItem(w.CRYPTO_SALT_PREFIX+"/u",c)}return e}()},,function(e,t,n){function r(e,t){var n=o(e,t);return i(n)?n:void 0}var i=n(365),o=n(370);e.exports=r},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],d=r?r(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),a?o(n,c,d):i(n,c,d)}return n}var i=n(103),o=n(98);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){var r=n(67);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(68)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(45),i=n(175),o=n(265),a=n(69),s=n(50),u=n(495),c=n(266),d=n(177),l=c(function(e,t){var n={};if(null==e)return n;var c=!1;t=r(t,function(t){return t=a(t,e),c||(c=t.length>1),t}),s(e,d(e),n),c&&(n=i(n,7,u));for(var l=t.length;l--;)o(n,t[l]);return n});e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STANZA_DELAY_MS=5e3},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(190),o=r(i),a=n(587),s=r(a);t.default="production"!==e.env.NODE_ENV?s.default:o.default}).call(t,n(39))},function(e,t,n){"use strict";function r(e,t,n){(0,c.default)("array",e,d.isArray,"Expect parameter 1 as an array"),(0,d.isNumber)(n)||(n=e.length),(0,c.default)("index",n,function(t){return(0,d.isNumber)(t)&&t>=0&&t<=e.length},"Expect parameter 3 as a number >= 0 and <= array.length");var r=e.slice(0);return r.splice(n,0,t),r}function i(e,t,n){(0,c.default)("array",e,d.isArray,"Expect parameter 1 as an array"),(0,c.default)("index",n,function(t){return(0,d.isNumber)(t)&&t>=0&&t<e.length},"Expect parameter 3 as a number >= 0 and < array.length");var r=e.slice(0);return r.splice(n,1,t),r}function o(e,t){(0,c.default)("array",e,d.isArray,"Expect parameter 1 as an array"),(0,c.default)("index",t,function(t){return(0,d.isNumber)(t)&&t>=0&&t<e.length},"Expect parameter 2 as a number >= 0 and < array.length");var n=e.slice(0);return n.splice(t,1),n}function a(e,t){(0,c.default)("array",e,d.isArray,"Expect parameter 1 as an array"),e.sort(function(e,n){return e[t]-n[t]})}function s(e,t){(0,c.default)("array",e,d.isArray,"Expect serverDataArray as an array");var n={};return e.forEach(function(e){var r=e.name,i=e.value;n[r]=t?i:(0,l.toPrimitiveValue)(i)}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.add=r,t.replace=i,t.remove=o,t.sortBy=a,t.parseNameValueObjectArray=s;var u=n(3),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=n(10),l=n(34);t.default={add:r,replace:i,remove:o,sortBy:a,parseNameValueObjectArray:s}},function(e,t,n){"use strict";e.exports=function(){var e=Array.prototype.slice.call(arguments);return new Promise(function(t){setTimeout.apply(null,[t].concat(e))})}},,,function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){var r=n(18),i=r.Symbol;e.exports=i},function(e,t,n){function r(e){if(!a(e)||i(e)!=s)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==f}var i=n(32),o=n(142),a=n(20),s="[object Object]",u=Function.prototype,c=Object.prototype,d=u.toString,l=c.hasOwnProperty,f=d.call(Object);e.exports=r},function(e,t){function n(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var r=n(44),i=n(87);e.exports=n(53)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){function r(e,t){return i(e)?e:o(e,t)?[e]:a(s(e))}var i=n(2),o=n(156),a=n(416),s=n(157);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=n(108),o=1/0;e.exports=r},function(e,t,n){var r=n(246),i=n(425),o=i(r);e.exports=o},function(e,t){e.exports={}},function(e,t,n){var r=n(254),i=n(161);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(511),i=n(266),o=i(function(e,t){return null==e?{}:r(e,t)});e.exports=o},function(e,t,n){"use strict";function r(e,t,n){var r=f(e,t,n),o=r.text,u=r.options,p=r.metadata;if(u.country.default&&!p.countries[u.country.default])throw new Error("Unknown country code: "+u.country.default);if(u.country.restrict&&!p.countries[u.country.restrict])throw new Error("Unknown country code: "+u.country.restrict);var v=void 0,m=void 0;if(o&&0===o.indexOf("tel:")){var _=!0,$=!1,E=void 0;try{for(var S,A=y()(o.split(";"));!(_=(S=A.next()).done);_=!0){var M=S.value,x=M.split(":"),T=g()(x,2),I=T[0],C=T[1];switch(I){case"tel":v=C;break;case"ext":m=C;break;case"phone-context":"+"===C[0]&&(v=C+v)}}}catch(e){$=!0,E=e}finally{try{!_&&A.return&&A.return()}finally{if($)throw E}}}else v=s(o);if(!a(v))return{};var R=h(v);R.extension&&(v=R.number,m=R.extension);var N=c(v,p),k=N.country_phone_code,P=N.number;if(!P)return{};var j=void 0,D=void 0,L=!1;if(k){if(L=!0,u.country.restrict&&k!==Object(w.o)(p.countries[u.country.restrict]))return{};D=Object(w.k)(k,p)}else(u.country.restrict||u.country.default)&&(j=u.country.restrict||u.country.default,D=p.countries[j],P=i(v));if(!D)return{};var U=P;L||(U=d(P,D));if(!j){if(!(j=l(k,U,p)))return{};D=p.countries[j]}if(U.length>O)return{};var F=new RegExp(Object(w.l)(D));if(!Object(b.a)(U,F))return{};var q={country:j,phone:U};return m&&(q.ext=m),q}function i(e){return o(e,U)}function o(e,t){var n="",r=!0,i=!1,o=void 0;try{for(var a,s=y()(e);!(r=(a=s.next()).done);r=!0){var u=a.value,c=t[u.toUpperCase()];void 0!==c&&(n+=c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}function a(e){return e.length>=S&&Object(b.a)(e,P)}function s(e){if(!e||e.length>A)return"";var t=e.search(j);return t<0?"":e.slice(t).replace(D,"")}function u(e){if(!e)return"";var t=L.test(e);return e=i(e),t?"+"+e:e}function c(e,t){if(!(e=u(e)))return{};if("+"!==e[0])return{number:e};if(e=e.slice(1),"0"===e[0])return{};for(var n=1;n<=E&&n<=e.length;){var r=e.slice(0,n);if(t.country_phone_code_to_countries[r])return{country_phone_code:r,number:e.slice(n)};n++}return{}}function d(e,t){var n=Object(w.m)(t);if(!e||!n)return e;var r=new RegExp("^(?:"+n+")"),i=r.exec(e);if(!i)return e;var o=void 0,a=i[i.length-1],s=Object(w.n)(t);o=s&&a?e.replace(r,s):e.slice(i[0].length);var u=new RegExp(Object(w.l)(t));return Object(b.a)(e,u)&&!Object(b.a)(o,u)?e:o}function l(e,t,n){var r=n.country_phone_code_to_countries[e];if(1===r.length)return r[0];var i=!0,o=!1,a=void 0;try{for(var s,u=y()(r);!(i=(s=u.next()).done);i=!0){var c=s.value,d=n.countries[c];if(Object(w.j)(d)){if(t&&0===t.search(Object(w.j)(d)))return c}else if(Object($.a)({phone:t,country:c},n))return c}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function f(e,t,n){var r=void 0,i=void 0,o=void 0;if("number"==typeof e&&(e=String(e)),"string"==typeof e&&(r=e),"string"==typeof t?(i={country:{restrict:t}},o=n):n?(i=t,o=n):o=t,!o||!o.countries)throw new Error("Metadata is required");return i=i?v()({},F,i):F,{text:r,options:i,metadata:o}}function h(e){var t=e.search(R);if(t<0)return{};var n=e.slice(0,t);if(!a(n))return{};for(var r=e.match(R),i=1;i<r.length;){if(null!=r[i]&&r[i].length>0)return{number:n,extension:r[i]};i++}}n.d(t,"b",function(){return M}),n.d(t,"c",function(){return x}),n.d(t,"d",function(){return T}),n.d(t,"a",function(){return U}),t.e=r,t.h=a,t.f=s,t.i=u,t.j=c,t.k=d,t.g=l;var p=n(115),v=n.n(p),m=n(596),g=n.n(m),_=n(127),y=n.n(_),b=n(128),w=n(76),$=(n(129),n(130)),E=3,S=2,O=17,A=250,M="+",x="0-9---",T="--/. ()\\[\\]~",I="(["+x+"]{1,7})",C=";ext="+I+"|[ \\t,]*(?:e?xt(?:ensi(?:o?|))?n?|??|[;,x#~]|int|anexo|)[:\\.]?[ \\t,-]*"+I+"#?|[- ]+(["+x+"]{1,5})#",R=new RegExp("(?:"+C+")$","i"),N="["+x+"]{"+S+"}",k="["+M+"]{0,1}(?:["+T+"]*["+x+"]){3,}["+T+x+"]*",P=new RegExp("^"+N+"$|^"+k+"(?:"+C+")?$","i"),j=new RegExp("["+M+x+"]"),D=new RegExp("[^"+x+"]+$"),L=new RegExp("^["+M+"]+"),U={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"},F={country:{}}},function(e,t,n){"use strict";function r(e){return e[0]}function i(e){return e[1]}function o(e){return e[2]||[]}function a(e){return e[3]}function s(e){return e[4]}function u(e){var t=e[5];return t||(t=a(e)),t}function c(e){return e[6]}function d(e){return e[7]}function l(e){return e[8]}function f(e){return e[0]}function h(e){return e[1]}function p(e){return e[2]||[]}function v(e,t){return e[3]||s(t)}function m(e,t){return e[4]||d(t)}function g(e,t){var n=v(e,t);return n&&_(n)&&!m(e,t)}function _(e){return"$1"!==e&&/\d/.test(e.replace("$1",""))}function y(e){return e[5]||h(e)}function b(e,t){var n=t.country_phone_code_to_countries[e][0];return t.countries[n]}function w(e){return e[9]}function $(e,t){return w(e)?w(e)[t]:void 0}function E(e){return $(e,0)}function S(e){return $(e,1)}function O(e){return $(e,2)}function A(e){return $(e,3)}function M(e){return $(e,4)}function x(e){return $(e,5)}function T(e){return $(e,6)}function I(e){return $(e,7)}function C(e){return $(e,8)}function R(e){return $(e,9)}t.o=r,t.l=i,t.i=o,t.m=u,t.n=c,t.j=l,t.g=f,t.a=h,t.c=p,t.d=v,t.f=m,t.e=g,t.h=_,t.b=y,t.k=b,t.z=w,t.p=E,t.q=S,t.v=O,t.t=A,t.s=M,t.x=x,t.w=T,t.r=I,t.y=C,t.u=R},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UPLOAD_PROGRESS="progress",t.UPLOAD_SUCCESS="success",t.UPLOAD_FAILURE="failure",t.UPLOAD_CANCEL="cancel"},,,function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(385),i=n(20),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(18),i=n(386),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,d=c||i;e.exports=d}).call(t,n(99)(e))},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e){return a(e)?i(e,!0):o(e)}var i=n(224),o=n(390),a=n(33);e.exports=r},function(e,t,n){function r(e,t){return a(o(e,t,i),e+"")}var i=n(51),o=n(226),a=n(147);e.exports=r},function(e,t){e.exports={name:"m800-web-sdk",version:"1.2.0",description:"M800 Web SDK, providing IM & VoIP features to integrate with M800's digital telecommunications platform",main:"lib/index.js",scripts:{build:"gulp","build:sdk":"gulp build:core","build:app":"gulp build:example",lint:"gulp lint",tdd:"gulp tdd:unit",test:"npm-run-all test:coverage test:split","test:coverage":"nyc npm run test:mocha","test:report":"nyc report --reporter=lcov","test:dev":"gulp test:dev","test:mocha":'mocha --config "config/.mocharc.yaml" "src/**/*.test.js"',"test:split":"gulp test:split","test:start":"node --max_old_space_size=4096 node_modules/karma/bin/karma start","test:watch":"npm run test:start -- --auto-watch --no-single-run --reporters mocha","test:i":"npm run test:start -- karma.int.conf.js",esdoc:"npm-run-all --parallel esdoc:*","esdoc:int":"esdoc -c esdoc.json","esdoc:ext":"esdoc -c esdoc.ext.json",gitbook:"gulp gitbook","gitbook:int":"gulp gitbook:internal","gitbook:ext":"gulp gitbook:external","jenkins:example":"cd example && npm i --verbose && cd ..",jenkins:"npm prune && npm i --verbose","prejenkins:commit":"npm run jenkins","jenkins:commit":"npm-run-all lint test test:i test:report","prejenkins:merge":"npm run jenkins && npm run jenkins:example","jenkins:merge":"npm run build && npm run esdoc && npm run gitbook && gulp archive:example"},repository:{type:"git",url:"ssh://andyhui@gerrit.dev.maaii.com:29418/m800-web-sdk"},author:"Andy Hui <andyhui@maaii.com>",license:"ISC",devDependencies:{"babel-cli":"^6.4.0","babel-core":"^6.4.0","babel-eslint":"^7.2.3","babel-loader":"7.1.1","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-imports":"^1.4.0","babel-polyfill":"^6.3.14","babel-preset-es2015":"^6.24.1","babel-preset-es2016":"^6.24.1","babel-preset-es2017":"^6.24.1","babel-preset-react":"^6.24.1","babel-preset-stage-2":"^6.17.0",chai:"^3.5.0","chai-as-promised":"^5.3.0",esdoc:"^1.0.2","esdoc-ecmascript-proposal-plugin":"^1.0.0","esdoc-exclude-source-plugin":"^1.0.0","esdoc-standard-plugin":"^1.0.0",eslint:"^4.2.0","eslint-config-airbnb-base":"^11.2.0","eslint-plugin-import":"^2.7.0","exports-loader":"^0.7.0","format-json":"^1.0.3",gulp:"^3.9.0","gulp-babel":"^7.0.0","gulp-clean":"^0.3.1","gulp-concat":"^2.6.0","gulp-eslint":"^4.0.0","gulp-gzip":"^1.2.0","gulp-sequence":"^0.4.5","gulp-tar":"^2.0.0","gulp-util":"^3.0.8","imports-loader":"^0.7.1","inject-loader":"^3.0.0",isparta:"^4.0.0","isparta-loader":"^2.0.0","istanbul-lib-instrument":"^1.7.2",jsdom:"^14.0.0",karma:"^1.7.0","karma-chai":"^0.1.0","karma-chai-as-promised":"^0.1.2","karma-chrome-launcher":"^2.1.1","karma-cli":"^1.0.1","karma-coverage":"^1.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.3","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.3",mocha:"^6.0.0","npm-run-all":"^4.1.5",nyc:"^13.3.0",rxjs:"^6.2.2",sinon:"^2.0.0","vinyl-source-stream":"^1.1.0",webpack:"^3.8.1","webpack-stream":"^4.0.0"},dependencies:{crosstab:"git://github.com/m800-limited/crosstab.git","crypto-js":"^3.1.9-1","deep-diff":"^0.3.4","diffie-hellman":"^5.0.3","event-emitter":"^0.3.5",jstimezonedetect:"^1.0.6","libphonenumber-js":"^0.4.52",localforage:"^1.7.2",lodash:"^4.17.11","m800-errors":"^0.1.1","m800-event-emitter-handler":"^0.1.0","m800-logger":"^0.2.0-snapshot.6","m800-sip.js":"^0.12.0","pretty-data":"git://github.com/AshKyd/pretty-data.git#e42057287c317c7e12665025f313289c0b7cfd9f","pubsub.js":"^1.5.2","strophe.js":"~1.2.16","timeout-as-promise":"^1.0.0",tv4:"^1.3.0","ua-parser-js":"^0.7.18",uuid:"^3.3.2",xmlserializer:"^0.6.1"}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(410),i=n(139),o=n(411),a=n(412),s=n(242),u=n(32),c=n(214),d=c(r),l=c(i),f=c(o),h=c(a),p=c(s),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case d:return"[object DataView]";case l:return"[object Map]";case f:return"[object Promise]";case h:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){"use strict";var r=n(462);n.d(t,"c",function(){return r.a});var i=n(480);n.d(t,"b",function(){return i.a});var o=n(268);n.d(t,"a",function(){return o.a})},function(e,t,n){function r(e){var t=i(e),n=t%1;return t===t?n?t-n:t:0}var i=n(263);e.exports=r},,,function(e,t,n){function r(e){var t=this.__data__=new i(e);this.size=t.size}var i=n(94),o=n(360),a=n(361),s=n(362),u=n(363),c=n(364);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(355),o=n(356),a=n(357),s=n(358),u=n(359);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(62);e.exports=r},function(e,t,n){var r=n(49),i=r(Object,"create");e.exports=i},function(e,t,n){function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=n(379);e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=n(216);e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){var r=n(9),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var r=n(387),i=n(83),o=n(145),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=n(98),o=n(62),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?o(n)&&a(t,n.length):"string"==r&&t in n)&&i(n[t],e)}var i=n(62),o=n(33),a=n(65),s=n(9);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UNKNOWN="unknown",t.KICKED="kicked",t.EXPLICIT="explicit",t.CONFLICT="conflict",t.NETWORK="network",t.EXPIRED="expired",t.AUTH_FAIL="auth-fail",t.REMOTE_FAILED="remote-connection-failed"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(231);n.d(t,"CompositeStream",function(){return r.a}),n.d(t,"ConsoleStream",function(){return r.b}),n.d(t,"FilteringStream",function(){return r.c});var i=n(512);n.d(t,"default",function(){return i.a});var o=n(182);n.d(t,"LogLevel",function(){return o.a}),n.d(t,"LogLevelValue",function(){return o.b}),n.d(t,"getDefaultLogLevel",function(){return o.c});var a=n(89);n.d(t,"NEEDS_METADATA",function(){return a.a});var s=n(119);n.n(s);n.o(s,"stdSerializers")&&n.d(t,"serializers",function(){return s.stdSerializers})},function(e,t,n){function r(e,t){t=i(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}var i=n(69),o=n(70);e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=n(32),o=n(20),a="[object Symbol]";e.exports=r},function(e,t,n){var r=n(161);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";var r=n(435)(!0);n(251)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(253),i=n(167);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";t.__esModule=!0;var r=n(471),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t){function n(e){if("function"!=typeof e)throw new TypeError(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var r="Expected a function";e.exports=n},function(e,t){function n(e){return null==e}e.exports=n},function(e,t,n){"use strict";(function(t){function r(e){function t(){return"silent"===this.level?1/0:this.levels.values[this.level]}function n(){return this._level}function o(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,i(b,y,"error","log"),i(b,y,"fatal","error"),i(b,y,"warn","error"),i(b,y,"info","log"),i(b,y,"debug","log"),i(b,y,"trace","log")}function a(t){function n(e){this._childLevel=1+(0|e._childLevel),this.error=u(e,t,"error"),this.fatal=u(e,t,"fatal"),this.warn=u(e,t,"warn"),this.info=u(e,t,"info"),this.debug=u(e,t,"debug"),this.trace=u(e,t,"trace"),i&&(this.serializers=i,this._serialize=o),c&&this._logEvent.bindings.push(t)}if(!t)throw new Error("missing bindings for child Pino");var r=t.serializers;if(p&&r){var i=Object.assign({},f,r),o=!0===e.browser.serialize?Object.keys(i):p;delete t.serializers,s([t],o,i,this._stdErrSerialize)}return n.prototype=this,new n(this)}e=e||{},e.browser=e.browser||{};var c=e.browser.transmit;if(c&&"function"!=typeof c.send)throw Error("pino: transmit option must have a send function");var l=e.browser.write||v;e.browser.write&&(e.browser.asObject=!0);var f=e.serializers||{},p=Array.isArray(e.browser.serialize)?e.browser.serialize.filter(function(e){return"!stdSerializers.err"!==e}):!0===e.browser.serialize&&Object.keys(f),m=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(m=!1);var g=["error","fatal","warn","info","debug","trace"];"function"==typeof l&&(l.error=l.fatal=l.warn=l.info=l.debug=l.trace=l),!1===e.enabled&&(e.level="silent");var _=e.level||"info",y=Object.create(l);y.log||(y.log=h),Object.defineProperty(y,"levelVal",{get:t}),Object.defineProperty(y,"level",{get:n,set:o});var b={transmit:c,serialize:p,asObject:e.browser.asObject,levels:g};return y.levels=r.levels,y.level=_,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=h,y.serializers=f,y._serialize=p,y._stdErrSerialize=m,y.child=a,c&&(y._logEvent=d()),y}function i(e,t,n,r){var i=Object.getPrototypeOf(t);t[n]=t.levelVal>t.levels.values[n]?h:i[n]?i[n]:v[n]||v[r]||h,o(e,t,n)}function o(e,t,n){(e.transmit||t[n]!==h)&&(t[n]=function(i){return function(){for(var o=Date.now(),u=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===v?v:this,l=0;l<u.length;l++)u[l]=arguments[l];if(e.serialize&&!e.asObject&&s(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(d,a(this,n,u,o)):i.apply(d,u),e.transmit){var f=e.transmit.level||t.level,h=r.levels.values[f],p=r.levels.values[n];if(p<h)return;c(this,{ts:o,methodLevel:n,methodValue:p,transmitLevel:f,transmitValue:r.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}}}(t[n]))}function a(e,t,n,i){e._serialize&&s(n,e._serialize,e.serializers,e._stdErrSerialize);var o=n[0],a={time:i,level:r.levels.values[t]},u=1+(0|e._childLevel);if(u<1&&(u=1),null!==o&&"object"==typeof o){for(n=n.slice();u--&&"object"==typeof n[0];)Object.assign(a,n.shift());o=n.length?p(n):void 0}else"string"==typeof o&&(o=p(n));return void 0!==o&&(a.msg=o),a}function s(e,t,n,i){for(var o in e)if(i&&e[o]instanceof Error)e[o]=r.stdSerializers.err(e[o]);else if("object"==typeof e[o]&&!Array.isArray(e[o]))for(var a in e[o])t&&t.indexOf(a)>-1&&a in n&&(e[o][a]=n[a](e[o][a]))}function u(e,t,n){return function(){var r=new Array(1+arguments.length);r[0]=t;for(var i=1;i<r.length;i++)r[i]=arguments[i-1];return e[n].apply(this,r)}}function c(e,t,n){var r=t.send,i=t.ts,o=t.methodLevel,a=t.methodValue,u=t.val;s(n,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=n.filter(function(t){return-1===e._logEvent.bindings.indexOf(t)}),e._logEvent.level.label=o,e._logEvent.level.value=a,r(o,e._logEvent,u),e._logEvent=d()}function d(){return{ts:0,messages:[],bindings:[],level:{label:"",value:0}}}function l(e){var t={type:e.constructor.name,msg:e.message,stack:e.stack};for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}function f(){return{}}function h(){}var p=n(505);e.exports=r;var v=t.console||{},m={req:f,res:f,err:l};r.LOG_VERSION=1,r.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},r.stdSerializers=m}).call(t,n(19))},function(e,t,n){function r(e){return null==e?[]:i(e,o(e))}var i=n(508),o=n(38);e.exports=r},function(e,t,n){function r(e){return"number"==typeof e||o(e)&&i(e)==a}var i=n(32),o=n(20),a="[object Number]";e.exports=r},function(e,t,n){function r(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=i(e.prototype),r=e.apply(n,t);return o(r)?r:n}}var i=n(101),o=n(9);e.exports=r},function(e,t){function n(e,t){for(var n=-1,i=e.length,o=0,a=[];++n<i;){var s=e[n];s!==t&&s!==r||(e[n]=r,a[o++]=n)}return a}var r="__lodash_placeholder__";e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NOTIFICATION_RECEIVED="notification-received"},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],u=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)(function(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0})(n)&&(r<8&&(s[r]=e(t.pow(n,.5))),u[r]=e(t.pow(n,1/3)),r++),n++}();var c=[],d=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],d=n[5],l=n[6],f=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=c[h-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[h]=v+c[h-7]+g+c[h-16]}var _=s&d^~s&l,y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),$=f+w+_+u[h]+c[h],E=b+y;f=l,l=d,d=s,s=a+$|0,a=o,o=i,i=r,r=$+E|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+d|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(d),n.HmacSHA256=o._createHmacHelper(d)}(Math),e.SHA256})},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(190),o=r(i),a=n(586),s=r(a);t.default="production"!==e.env.NODE_ENV?s.default:o.default}).call(t,n(39))},function(e,t,n){e.exports={default:n(600),__esModule:!0}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];"string"==typeof t&&(t="^(?:"+t+")$");var n=e.match(t);return null!==n&&n[0].length===e.length}t.a=r},function(e,t,n){"use strict";function r(e,t,n,r,i){var a=u(e,t,n,r,i),s=a.input,c=a.format_type,d=a.options,l=a.metadata,f=void 0;s.country&&(f=l.countries[s.country]);var h=Object(p.j)(s.phone,l),m=h.country_phone_code,g=h.number;if(m){if(s.country&&f&&m!==Object(v.o)(f))return s.phone;f=Object(v.k)(m,l)}if(!f)return s.phone;switch(c){case"International":if(!g)return"+"+Object(v.o)(f);var _=o(g,"International",!1,f),y="+"+Object(v.o)(f)+" "+_;return s.ext||0===s.ext?d.formatExtension(y,s.ext):y;case"E.164":case"International_plaintext":return"+"+Object(v.o)(f)+s.phone;case"RFC3966":return"+"+Object(v.o)(f)+s.phone+(s.ext||0===s.ext?";ext="+s.ext:"");case"National":if(!g)return"";var b=o(g,"National",!1,f);return s.ext||0===s.ext?d.formatExtension(b,s.ext):b}}function i(e,t,n,r,i){var o=new RegExp(Object(v.g)(t)),a=Object(v.d)(t,i),u=!a||a&&Object(v.f)(t,i)&&!r;if(!n&&!u)return e.replace(o,Object(v.a)(t).replace(g,a));var c=e.replace(o,n?Object(v.b)(t):Object(v.a)(t));return n?s(c):c}function o(e,t,n,r){var o=a(Object(v.i)(r),e);return o?i(e,o,"International"===t,n,r):e}function a(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=f()(e);!(n=(o=a.next()).done);n=!0){var s=o.value;if(Object(v.c)(s).length>0){var u=Object(v.c)(s)[Object(v.c)(s).length-1];if(0!==t.search(u))continue}if(Object(h.a)(t,new RegExp(Object(v.g)(s))))return s}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}function s(e){return e.replace(new RegExp("["+p.d+"]+","g")," ").trim()}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4],o=void 0,a=void 0,s=void 0,u=void 0;if("string"==typeof e)if("string"==typeof n)o={phone:e,country:t},a=n,i?(s=r,u=i):u=r;else{if(o={phone:e},"string"!=typeof t)throw new Error("Format type argument not passed for `format()`");a=t,r?(s=n,u=r):u=n}else o=e,a=t,r?(s=n,u=r):u=n;if(!u)throw new Error("Metadata is required");switch(a){case"International":case"E.164":case"International_plaintext":case"National":case"RFC3966":break;default:throw new Error('Unknown format type argument passed to "format()": "'+a+'"')}return s=s?d()({},m,s):m,{input:o,format_type:a,options:s,metadata:u}}t.b=r,n.d(t,"a",function(){return g}),t.c=i,t.d=s;var c=n(115),d=n.n(c),l=n(127),f=n.n(l),h=n(128),p=n(75),v=n(76),m={formatExtension:function(e,t){return e+" ext. "+t}},g=/(\$\d)/},function(e,t,n){"use strict";function r(e,t,n){var r=o(e,t,n),a=r.input,s=r.metadata;if(a&&a.country){var c=a.phone,d=s.countries[a.country];if(i(c,Object(u.l)(d)))return i(c,Object(u.t)(d))?"PREMIUM_RATE":i(c,Object(u.v)(d))?"TOLL_FREE":i(c,Object(u.u)(d))?"SHARED_COST":i(c,Object(u.y)(d))?"VOIP":i(c,Object(u.s)(d))?"PERSONAL_NUMBER":i(c,Object(u.r)(d))?"PAGER":i(c,Object(u.w)(d))?"UAN":i(c,Object(u.x)(d))?"VOICEMAIL":i(c,Object(u.p)(d))?Object(u.q)(d)?i(c,Object(u.q)(d))?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE":i(c,Object(u.q)(d))?"MOBILE":void 0}}function i(e,t){return Object(s.a)(e,t)}function o(e,t,n){var r=void 0,i=void 0;if("number"==typeof e&&(e=String(e)),"string"==typeof e?"string"==typeof t||void 0===t?(i=n,Object(a.h)(e)&&(r=Object(a.e)(e,t,i))):(i=t,Object(a.h)(e)&&(r=Object(a.e)(e,i))):(e&&e.phone&&Object(a.h)(e.phone)&&(r=e),i=t),!i||!i.countries)throw new Error("Metadata is required");return{input:r,metadata:i}}t.a=r,t.b=o;var a=n(75),s=n(128),u=n(76)},function(e,t,n){"use strict";function r(e){var t=void 0===e?"undefined":a(e);if("function"!==t)throw new c.ArgumentError("Expect `func` to be a function, but "+t+" was found.");return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise(function(t){t(e.apply(void 0,n))})}}function i(e,t){return Array.isArray(e)?"function"!=typeof t?Promise.reject(new c.ArgumentError("`predicate` must be a function")):e.reduce(function(e,n,r){return e.catch(t.bind(null,n,r))},Promise.reject(new c.ArgumentError("`array` must not be empty"))):Promise.reject(new c.ArgumentError("`array` must be an array"))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return function(){var n=e.apply(void 0,arguments);return Promise.race([n,(0,u.default)(t).then(function(){throw c.TimeoutError.createFromOperationDetails({operationName:e.name,timeoutPeriodMs:t})})])}}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TIMEOUT=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.promisify=r,t.tryUntilResolved=i,t.timeout=o;var s=n(59),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(0),d=t.DEFAULT_TIMEOUT=3e3},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return"$handle"+e[0].toUpperCase()+e.substring(1)+"Command"}function a(e,t,n,r){var a=void 0===r?"undefined":u(r);if("undefined"!==a&&"function"!==a)throw new TypeError("condition must be a function, "+a+" detected");var s=e[t].bind(e),d=r||function(){return n.isActive()},f=o(t);n.on(l.REQUEST_RECEIVED,function(n){var r=n.requestId,o=n.message;d()&&o.command===t&&e[f].apply(e,[r].concat(i(o.args)))}),e[f]=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];new Promise(function(e){e(s.apply(void 0,i))}).then(function(r){n.respond(e,{event:t+":success",payload:r})}).catch(function(r){n.respond(e,{event:t+":failure",error:(0,c.serializeError)(r)})})},e[t]=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return d()?s.apply(void 0,r):n.request({command:t,args:r}).then(function(e){var t=e.message;if(t.error)throw t.error;return t.payload})}}function s(e,t){return(0,d.isNonEmptyString)(e)&&e.split(":")[0]===t}Object.defineProperty(t,"__esModule",{value:!0}),t.delegateToActiveTab=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.delegateToActiveTab=function(){var e=r(regeneratorRuntime.mark(function e(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a,s,u,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={command:n,args:i},e.next=3,t.request(a);case 3:if(s=e.sent,u=s.event,d=s.payload,l=s.error,u!==n+":success"){e.next=9;break}return e.abrupt("return",d);case 9:throw(0,c.deserializeError)(l);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}();t.decorateMethodWithPeerAwareness=a,t.isCommandForModule=s;var c=n(31),d=n(34),l=n(11)},function(e,t,n){"use strict";function r(e){var t=(0,a.splitString)(e,5);c.USER_TOKEN_RANDOM_KEYS.split("").forEach(function(e,n){d.setItem(""+c.USER_TOKEN_PREFIX+e,t[n])})}function i(){var e=[];return c.USER_TOKEN_RANDOM_KEYS.split("").every(function(t){var n=d.getItem(""+c.USER_TOKEN_PREFIX+t);return!!n&&(e.push(n),!0)}),e.length<c.USER_TOKEN_RANDOM_KEYS.length?null:e.join("")}function o(){c.USER_TOKEN_RANDOM_KEYS.split("").forEach(function(e){d.removeItem(""+c.USER_TOKEN_PREFIX+e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.saveUserTokenToStorage=r,t.getUserTokenFromStorage=i,t.removeUserTokenFromStorage=o;var a=n(34),s=n(35),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(14),d=(0,u.default)(localStorage)},function(e,t,n){"use strict";function r(e,t){if((0,a.isArray)(e))return e.find(t);var n=void 0;return Object.keys(e).some(function(r){return!!t(e[r],r,e)&&(n=e[r],!0)}),n}function i(e,t){if((0,a.isArray)(e))return void e.forEach(t);Object.keys(e).forEach(function(n){t(e[n],n,e)})}function o(e,t){var n=[],r=[];return(0,a.isArray)(e)?n=e.map(function(e,n,r){return Promise.resolve(t(e,n,r)).then(function(t){return{matched:t,element:e}})}):Object.keys(e).forEach(function(r){var i=Promise.resolve(t(e[r],r,e)).then(function(t){return{matched:t,element:e[r]}});n.push(i)}),Promise.all(n).then(function(e){return e.forEach(function(e){var t=e.matched,n=e.element;t&&r.push(n)}),r})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10);t.default={find:r,forEach:i,filterAsync:o},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,x.default)(e).findFirst("tags");return!!t&&t.content().indexOf("notification")>=0}function o(e){return e&&S.Strophe.getBareJidFromJid(e)===e}function a(e){return C.test(e)}function s(e,t,n){if(!(0,A.default)(e)||!(0,A.default)(t)||n&&!(0,A.default)(n))throw new TypeError("Invalid parameter. A JID should be composed by string only.");var r=e+"@"+t;return n&&(r+="/"+n),r}function u(e){var t=(0,x.default)(e).findFirst("record");return t?{recordId:t.attr("id"),prevRecordId:t.attr("prevId")}:{}}function c(e){var t=(0,x.default)(e);return"iq"===t.name()&&"result"===t.attr("type")}function d(e){var t=(0,x.default)(e);return"message"===t.name()&&("error"===t.attr("type")&&!!t.findFirst("error"))}function l(e){return{forbidden:T.ForbiddenError,"bad-request":T.ValidationError,"item-not-found":T.NotFoundError,"management-error":T.AuthenticationRequiredError}[e]||Error}function f(e){return{UNSIGNED_DEVICE:"The device is deactivated, please sign up again."}[e]||""}function h(e){return{}[e]||""}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],r="",i="";return t&&(r="\n"+t+": "+f(t)),n&&(i="\nError code: "+n+" "+h(n)),"Encountered error. "+e+r+i}function v(e){if(e instanceof Error)return e;if(!e)return new T.TimeoutError("Request timeout.");var t=void 0,n=void 0;try{var r=(0,x.default)(e),i=r.findFirst("error"),o=i.children()[0],a=o.name(),s=o.attr("name"),u=o.attr("code"),c=i.findFirst("text"),d=c?c.content():"";n=p(d,s,u),t=l(a)}catch(r){t=T.UnexpectedResponseError,n="Stanza cannot be parsed: "+r.message+".\nStanza: "+S.Strophe.serialize(e)}return new t(n)}function m(e){return"<![CDATA["+e+"]]>"}function g(e){var t=/<!\[CDATA\[(.*)]]>/,n=t.exec(e);return n?n[1]:e}function _(e,t,n){return x.default.build({name:e,attributes:t,body:n})}function y(e,t){return _("iq",e,t)}function b(e,t){return _("presence",e,t)}function w(e){var t=(0,x.default)(e),n=t.findFirst("maaii-response");if(!n)throw new T.UnexpectedResponseError("<maaii-response> tag not found.");return g(n.content())}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;return new Promise(function(r,i){e.sendIQ(t,function(e){try{r((0,x.default)(e))}catch(e){i(e)}},function(e){i(v(e))},n)})}function E(e,t){var n=(0,x.default)(e);if(!t||n.name()===t)return n.children();throw new T.InvalidOperationError("Attempt to unwrap <"+t+"> but the tag is <"+n.name()+">")}Object.defineProperty(t,"__esModule",{value:!0}),t.isNotification=i,t.isBareJid=o,t.isJid=a,t.composeJid=s,t.getRecordInfo=u,t.isResultIq=c,t.isErrorNotification=d,t.getErrorByStanzaErrorType=l,t.getErrorDetailByKeyword=f,t.getErrorDetailByCode=h,t.composeErrorMessage=p,t.createErrorFromErrorStanza=v,t.addCdataTag=m,t.removeCdataTag=g,t.composeStanza=_,t.composeIq=y,t.composePresence=b,t.parseMaaiiResponse=w,t.sendIqRequest=$,t.unwrap=E;var S=n(1),O=n(8),A=r(O),M=n(6),x=r(M),T=n(0),I=5e3,C=/.+@.+/},,,,function(e,t,n){var r=n(49),i=n(18),o=r(i,"Map");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(371),o=n(378),a=n(380),s=n(381),u=n(382);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=n(220);e.exports=r},function(e,t,n){var r=n(222),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){function r(e){return o(e)&&i(e)}var i=n(33),o=n(20);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){(function(e){var r=n(213),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(99)(e))},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(392),i=n(228),o=i(r);e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.USER_PROFILE_UPDATED="user-profile-updated",t.PROFILE_UPDATED_NOTIFICATION_RECEIVED="profile-updated-notification-received",t.SSO_TOKEN_UPDATED="sso-token-updated"},function(e,t,n){var r=n(399);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(67);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){function r(e,t,n,a,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:i(e,t,n,a,r,s))}var i=n(402),o=n(20);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}var i=n(140),o=n(403),a=n(404);r.prototype.add=r.prototype.push=o,r.prototype.has=a,e.exports=r},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}e.exports=n},function(e,t,n){var r=n(239),i=n(240),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return a.call(e,t)}))}:i;e.exports=u},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var i=n(2),o=n(108),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(158);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(a(e))return o(e,r)+"";if(s(e))return d?d.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var i=n(63),o=n(45),a=n(2),s=n(108),u=1/0,c=i?i.prototype:void 0,d=c?c.toString:void 0;e.exports=r},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(247),o=r(i),a=n(426),s=r(a);t.default="production"!==e.env.NODE_ENV?s.default:o.default}).call(t,n(39))},function(e,t,n){function r(e,t,n){var r=s(e)?i:o;return n&&u(e,t,n)&&(t=void 0),r(e,a(t,3))}var i=n(427),o=n(428),a=n(27),s=n(2),u=n(104);e.exports=r},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(163)("keys"),i=n(111);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(16),i=n(43),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(110)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(52),i=n(437),o=n(167),a=n(162)("IE_PROTO"),s=function(){},u=function(){var e,t=n(233)("iframe"),r=o.length;for(t.style.display="none",n(440).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(44).f,i=n(54),o=n(30)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(441);for(var r=n(43),i=n(66),o=n(72),a=n(30)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],d=r[c],l=d&&d.prototype;l&&!l[a]&&i(l,a,c),o[c]=o.Array}},function(e,t,n){t.f=n(30)},function(e,t,n){var r=n(43),i=n(16),o=n(110),a=n(170),s=n(44).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){function n(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}e.exports=n},function(e,t,n){function r(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||d.test(e)?l(e.slice(2),n?2:8):u.test(e)?a:+e}var i=n(9),o=n(108),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;e.exports=r},function(e,t,n){function r(e,t,n,N,k,P){var j,D=t&O,L=t&A,U=t&M;if(n&&(j=k?n(e,N,k,P):n(e)),void 0!==j)return j;if(!$(e))return e;var F=y(e);if(F){if(j=m(e),!D)return d(e,j)}else{var q=v(e),B=q==T||q==I;if(b(e))return c(e,D);if(q==C||q==x||B&&!k){if(j=L||B?{}:_(e),!D)return L?f(e,u(j,e)):l(e,s(j,e))}else{if(!R[q])return k?e:{};j=g(e,q,D)}}P||(P=new i);var H=P.get(e);if(H)return H;if(P.set(e,j),E(e))return e.forEach(function(i){j.add(r(i,t,n,i,e,P))}),j;if(w(e))return e.forEach(function(i,o){j.set(o,r(i,t,n,o,e,P))}),j;var z=U?L?p:h:L?keysIn:S,G=F?void 0:z(e);return o(G||e,function(i,o){G&&(o=i,i=e[o]),a(j,o,r(i,t,n,o,e,P))}),j}var i=n(93),o=n(176),a=n(103),s=n(481),u=n(482),c=n(218),d=n(100),l=n(483),f=n(484),h=n(237),p=n(177),v=n(88),m=n(485),g=n(486),_=n(221),y=n(2),b=n(82),w=n(490),$=n(9),E=n(492),S=n(38),O=1,A=2,M=4,x="[object Arguments]",T="[object Function]",I="[object GeneratorFunction]",C="[object Object]",R={};R[x]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[C]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[T]=R["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t,n){function r(e){return i(e,a,o)}var i=n(238),o=n(264),a=n(84);e.exports=r},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t,n){var r=n(85),i=n(62),o=n(104),a=n(84),s=Object.prototype,u=s.hasOwnProperty,c=r(function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(r=1);++n<r;)for(var d=t[n],l=a(d),f=-1,h=l.length;++f<h;){var p=l[f],v=e[p];(void 0===v||i(v,s[p])&&!u.call(e,p))&&(e[p]=d[p])}return e});e.exports=c},function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var r=n(178),i=n.n(r),o="production"===e.env.NODE_ENV,a=new Function("try { return this === window; } catch(e) { return false; }")(),s=i()(e.env.DEPLOY_ENV)||"local"===e.env.DEPLOY_ENV}).call(t,n(39))},function(e,t,n){function r(e,t,n){return t===t?a(e,t,n):i(e,o,n)}var i=n(273),o=n(509),a=n(510);e.exports=r},function(e,t,n){"use strict";function r(){return c.c?d.Info:d.Debug}n.d(t,"a",function(){return d}),n.d(t,"b",function(){return l}),t.c=r;var i=n(120),o=n.n(i),a=n(74),s=n.n(a),u=n(119),c=(n.n(u),n(180)),d={Trace:"trace",Debug:"debug",Info:"info",Warn:"warn",Error:"error"},l=s()(u.levels.values,o()(d))},function(e,t,n){function r(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var i=n(101),o=n(184),a=4294967295;r.prototype=i(o.prototype),r.prototype.constructor=r,e.exports=r},function(e,t){function n(){}e.exports=n},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}var i=n(181);e.exports=r},function(e,t){function n(e){return e.placeholder}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.STATE_CHANGED="state-changed"},function(e,t,n){var r=n(531),i=n(532),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(15),v=r(p),m=function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Invalid argument supplied.",n))}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromArgumentName",value:function(e,n){return new t("Invalid argument supplied: "+e+".",n)}}]),t}(v.default);t.default=m},function(e,t,n){"use strict";function r(e,t){return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,c.default)(e)&&e.length>0}function o(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:'Argument or variable "'+t+"\" doesn't satisfy the requirements.";if(!i(t))throw new l.default("Invalid assertion: argument name should be a non empty string.");if(!i(o))throw new l.default("Invalid assertion: message should be a non empty string.");if(!(0,s.default)(r))throw new l.default("Invalid assertion: Predicate should be a function.");var a=null;try{if(r(n))return n}catch(e){a=e}var u=a?o+'. Also, an error was thrown: "'+a.message+'".':o,c=new l.default(u,a);throw Error.captureStackTrace&&Error.captureStackTrace(c,e),c}Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),s=r(a),u=n(8),c=r(u);t.default=o;var d=n(189),l=r(d)},function(e,t,n){function r(e,t){return(s(e)?i:a)(e,o(t,3))}var i=n(45),o=n(27),a=n(556),s=n(2);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCError=t.CallCreationError=void 0;var i=n(562),o=r(i),a=n(563),s=r(a);t.CallCreationError=o.default,t.WebRTCError=s.default},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=t.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var d=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=d<<1|d>>>31}var l=(r<<5|r>>>27)+u+a[c];l+=c<20?1518500249+(i&o|~i&s):c<40?1859775393+(i^o^s):c<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,u=s,s=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1})},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){!function(){var t=e,n=t.lib,r=n.Base,i=t.enc,o=i.Utf8,a=t.algo;a.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}()})},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){return function(t){function n(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function r(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function i(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function o(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}var a=e,s=a.lib,u=s.WordArray,c=s.Hasher,d=a.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var f=d.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var s=t+a,u=e[s];e[s]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,d=e[t+0],f=e[t+1],h=e[t+2],p=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],_=e[t+7],y=e[t+8],b=e[t+9],w=e[t+10],$=e[t+11],E=e[t+12],S=e[t+13],O=e[t+14],A=e[t+15],M=c[0],x=c[1],T=c[2],I=c[3];M=n(M,x,T,I,d,7,l[0]),I=n(I,M,x,T,f,12,l[1]),T=n(T,I,M,x,h,17,l[2]),x=n(x,T,I,M,p,22,l[3]),M=n(M,x,T,I,v,7,l[4]),I=n(I,M,x,T,m,12,l[5]),T=n(T,I,M,x,g,17,l[6]),x=n(x,T,I,M,_,22,l[7]),M=n(M,x,T,I,y,7,l[8]),I=n(I,M,x,T,b,12,l[9]),T=n(T,I,M,x,w,17,l[10]),x=n(x,T,I,M,$,22,l[11]),M=n(M,x,T,I,E,7,l[12]),I=n(I,M,x,T,S,12,l[13]),T=n(T,I,M,x,O,17,l[14]),x=n(x,T,I,M,A,22,l[15]),M=r(M,x,T,I,f,5,l[16]),I=r(I,M,x,T,g,9,l[17]),T=r(T,I,M,x,$,14,l[18]),x=r(x,T,I,M,d,20,l[19]),M=r(M,x,T,I,m,5,l[20]),I=r(I,M,x,T,w,9,l[21]),T=r(T,I,M,x,A,14,l[22]),x=r(x,T,I,M,v,20,l[23]),M=r(M,x,T,I,b,5,l[24]),I=r(I,M,x,T,O,9,l[25]),T=r(T,I,M,x,p,14,l[26]),x=r(x,T,I,M,y,20,l[27]),M=r(M,x,T,I,S,5,l[28]),I=r(I,M,x,T,h,9,l[29]),T=r(T,I,M,x,_,14,l[30]),x=r(x,T,I,M,E,20,l[31]),M=i(M,x,T,I,m,4,l[32]),I=i(I,M,x,T,y,11,l[33]),T=i(T,I,M,x,$,16,l[34]),x=i(x,T,I,M,O,23,l[35]),M=i(M,x,T,I,f,4,l[36]),I=i(I,M,x,T,v,11,l[37]),T=i(T,I,M,x,_,16,l[38]),x=i(x,T,I,M,w,23,l[39]),M=i(M,x,T,I,S,4,l[40]),I=i(I,M,x,T,d,11,l[41]),T=i(T,I,M,x,p,16,l[42]),x=i(x,T,I,M,g,23,l[43]),M=i(M,x,T,I,b,4,l[44]),I=i(I,M,x,T,E,11,l[45]),T=i(T,I,M,x,A,16,l[46]),x=i(x,T,I,M,h,23,l[47]),M=o(M,x,T,I,d,6,l[48]),I=o(I,M,x,T,_,10,l[49]),T=o(T,I,M,x,O,15,l[50]),x=o(x,T,I,M,m,21,l[51]),M=o(M,x,T,I,E,6,l[52]),I=o(I,M,x,T,p,10,l[53]),T=o(T,I,M,x,w,15,l[54]),x=o(x,T,I,M,f,21,l[55]),M=o(M,x,T,I,y,6,l[56]),I=o(I,M,x,T,A,10,l[57]),T=o(T,I,M,x,g,15,l[58]),x=o(x,T,I,M,S,21,l[59]),M=o(M,x,T,I,v,6,l[60]),I=o(I,M,x,T,$,10,l[61]),T=o(T,I,M,x,h,15,l[62]),x=o(x,T,I,M,b,21,l[63]),c[0]=c[0]+M|0,c[1]=c[1]+x|0,c[2]=c[2]+T|0,c[3]=c[3]+I|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var d=u[c];u[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=c._createHelper(f),a.HmacMD5=c._createHmacHelper(f)}(Math),e.MD5})},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e.toUpperCase()){case"GET":return o(t,n);case"POST":return s(t,n);default:return Promise.reject(new d.ArgumentError("Unsupported method: "+e))}}function i(e,t){var n=new XMLHttpRequest;return n.onreadystatechange=function(){if(4===n.readyState){if(n.status<200||n.status>=300)return void t(new Error(n.status+" "+n.statusText));e({status:n.status,response:n.responseText})}},n}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var o=t.parameters||{},a=t.timeout||l,s=i(function(e){n(c(e))},r),f=u(e,o);s.open("GET",f,!0),setTimeout(function(){r(new d.TimeoutError("GET request timeout: "+f))},a),s.send()})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var o=t.parameters||{},a=t.timeout||l,s=i(n,r),c=u(e,o);s.open("GET",c,!0),setTimeout(function(){r(new d.TimeoutError("GET request timeout: "+c))},a),s.send()})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var o=t.parameters||{},a=t.headers||{},s=t.timeout||l,u=i(function(e){n(c(e))},r),f=Object.keys(a);u.open("POST",e,!0),u.setRequestHeader("Content-Type","application/json;charset=UTF-8"),f.forEach(function(e){u.setRequestHeader(e,a[e])}),setTimeout(function(){r(new d.TimeoutError("POST request timeout: "+e))},s),u.send(JSON.stringify(o))})}function u(e,t){var n=e,r=Object.keys(t);return r.length>0&&(n+=r.reduce(function(e,n){return""+e+n+"="+t[n]+"&"},"?"),n=n.substring(0,n.length-1)),n}function c(e){try{return JSON.parse(e.response)}catch(t){throw new d.UnexpectedResponseError("Unable to parse response: "+e.response)}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),l=3e4;r.get=o,r.post=s,r.getWithRawResponse=a,t.default=r,e.exports=t.default},function(e,t,n){"use strict";var r=n(578)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEVICE_LIST_RECEIVED="device-list-received",t.DEVICE_LIST_UPDATED="device-list-updated"},function(e,t,n){"use strict";function r(e){function t(){return e.type.substring(i.length+1)}function n(t){if(!e.attributes)return null;var n=e.attributes.find(function(e){return e.name===t});return n?n.value:null}return{type:t,attr:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i="com.maaii.notification";e.exports=t.default},function(e,t,n){function r(e,t){return i(e,t)}var i=n(151);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBSCRIPTION="subscription",t.PROFILE="profile",t.PRESENCE="presence",t.ERROR="error",t.CONTACT_LIST_UPDATED="contact-list-updated",t.FRIEND_REQUESTS_UPDATED="friend-requests-updated",t.ONLINE_STATUS="online-status",t.LAST_SEEN_UPDATED="last-seen-updated"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MAAII_FILE_SERVER="mfs",t.AMAZON_S3_STORAGE="aws"},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?d(e,t,n):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function l(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function h(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?i(e,0):l(e,t);if("Buffer"===t.type&&Q(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function m(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var d=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===u)return d*a}else-1!==d&&(c-=c-d),d=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var l=!0,f=0;f<u;f++)if(o(e,c+f)!==o(t,f)){l=!1;break}if(l)return c}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function $(e,t,n,r){return K(z(t,e.length-n),e,n,r)}function E(e,t,n,r){return K(G(t),e,n,r)}function S(e,t,n,r){return E(e,t,n,r)}function O(e,t,n,r){return K(J(t),e,n,r)}function A(e,t,n,r){return K(V(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,d,l;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(l=(31&o)<<6|63&u)>127&&(a=l);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=e[i+1],c=e[i+2],d=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&d)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&d)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return T(r)}function T(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=H(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function q(e){if(e=B(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function J(e){return W.toByteArray(q(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Y(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var W=n(663),X=n(664),Q=n(665);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),d=e.slice(t,n),l=0;l<u;++l)if(c[l]!==d[l]){a=c[l],s=d[l];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return $(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),X.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),X.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),X.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),X.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:z(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(19))},function(e,t,n){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}function a(e,t,n){for(var r=0,i=Math.min(e.length,n),o=t;o<i;o++){var a=e.charCodeAt(o)-48;r<<=4,r|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return r}function s(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}function u(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}function c(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var d=u>>>26,l=67108863&u,f=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=f;h++){var p=c-h|0;i=0|e.words[p],o=0|t.words[h],a=i*o+l,d+=a/67108864|0,l=67108863&a}n.words[c]=0|l,u=0|d}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}function d(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var d=o-c,l=0|e.words[d],f=0|t.words[c],h=l*f,p=67108863&h;a=a+(h/67108864|0)|0,p=p+s|0,s=67108863&p,a=a+(p>>>26)|0,i+=a>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}function l(e,t,n){return(new f).mulp(e,t,n)}function f(e,t){this.x=e,this.y=t}function h(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function p(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function g(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function y(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var b;try{b=n(667).Buffer}catch(e){}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=e.length-6,r=0;n>=t;n-=6)i=a(e,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==t&&(i=a(e,t,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,u=Math.min(o,o-a)+n,c=0,d=n;d<u;d+=r)c=s(e,d,d+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var l=1;for(c=s(e,d,e.length,t),d=0;d<a;d++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],$=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){e=e||10,t=0|t||1;var n;if(16===e||"hex"===e){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,n=0!==o||a!==this.length-1?w[6-u.length]+u+n:u+n,i+=2,i>=26&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=$[e],d=E[e];n="";var l=this.clone();for(l.negative=0;!l.isZero();){var f=l.modn(d).toString(e);l=l.idivn(d),n=l.isZero()?f+n:w[c-f.length]+f+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==b),this.toArrayLike(b,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),d=this.clone();if(u){for(s=0;!d.isZero();s++)a=d.andln(255),d.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!d.isZero();s++)a=d.andln(255),d.iushrn(8),c[o-s-1]=a}return c},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var n,r;this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;var r,i;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)t=(0|r.words[a])-(0|i.words[a])+o,o=t>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)t=(0|r.words[a])+o,o=t>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var S=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,d=0|a[0],l=8191&d,f=d>>>13,h=0|a[1],p=8191&h,v=h>>>13,m=0|a[2],g=8191&m,_=m>>>13,y=0|a[3],b=8191&y,w=y>>>13,$=0|a[4],E=8191&$,S=$>>>13,O=0|a[5],A=8191&O,M=O>>>13,x=0|a[6],T=8191&x,I=x>>>13,C=0|a[7],R=8191&C,N=C>>>13,k=0|a[8],P=8191&k,j=k>>>13,D=0|a[9],L=8191&D,U=D>>>13,F=0|s[0],q=8191&F,B=F>>>13,H=0|s[1],z=8191&H,G=H>>>13,V=0|s[2],J=8191&V,K=V>>>13,Y=0|s[3],W=8191&Y,X=Y>>>13,Q=0|s[4],Z=8191&Q,ee=Q>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,de=0|s[8],le=8191&de,fe=de>>>13,he=0|s[9],pe=8191&he,ve=he>>>13;n.negative=e.negative^t.negative,n.length=19,r=Math.imul(l,q),i=Math.imul(l,B),i=i+Math.imul(f,q)|0,o=Math.imul(f,B);var me=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(p,q),i=Math.imul(p,B),i=i+Math.imul(v,q)|0,o=Math.imul(v,B),r=r+Math.imul(l,z)|0,i=i+Math.imul(l,G)|0,i=i+Math.imul(f,z)|0,o=o+Math.imul(f,G)|0;var ge=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=Math.imul(g,B),i=i+Math.imul(_,q)|0,o=Math.imul(_,B),r=r+Math.imul(p,z)|0,i=i+Math.imul(p,G)|0,i=i+Math.imul(v,z)|0,o=o+Math.imul(v,G)|0,r=r+Math.imul(l,J)|0,i=i+Math.imul(l,K)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,K)|0;var _e=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(b,q),i=Math.imul(b,B),i=i+Math.imul(w,q)|0,o=Math.imul(w,B),r=r+Math.imul(g,z)|0,i=i+Math.imul(g,G)|0,i=i+Math.imul(_,z)|0,o=o+Math.imul(_,G)|0,r=r+Math.imul(p,J)|0,i=i+Math.imul(p,K)|0,i=i+Math.imul(v,J)|0,o=o+Math.imul(v,K)|0,r=r+Math.imul(l,W)|0,i=i+Math.imul(l,X)|0,i=i+Math.imul(f,W)|0,o=o+Math.imul(f,X)|0;var ye=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(E,q),i=Math.imul(E,B),i=i+Math.imul(S,q)|0,o=Math.imul(S,B),r=r+Math.imul(b,z)|0,i=i+Math.imul(b,G)|0,i=i+Math.imul(w,z)|0,o=o+Math.imul(w,G)|0,r=r+Math.imul(g,J)|0,i=i+Math.imul(g,K)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,K)|0,r=r+Math.imul(p,W)|0,i=i+Math.imul(p,X)|0,i=i+Math.imul(v,W)|0,o=o+Math.imul(v,X)|0,r=r+Math.imul(l,Z)|0,i=i+Math.imul(l,ee)|0,i=i+Math.imul(f,Z)|0,o=o+Math.imul(f,ee)|0;var be=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(A,q),i=Math.imul(A,B),i=i+Math.imul(M,q)|0,o=Math.imul(M,B),r=r+Math.imul(E,z)|0,i=i+Math.imul(E,G)|0,i=i+Math.imul(S,z)|0,o=o+Math.imul(S,G)|0,r=r+Math.imul(b,J)|0,i=i+Math.imul(b,K)|0,i=i+Math.imul(w,J)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(g,W)|0,i=i+Math.imul(g,X)|0,i=i+Math.imul(_,W)|0,o=o+Math.imul(_,X)|0,r=r+Math.imul(p,Z)|0,i=i+Math.imul(p,ee)|0,i=i+Math.imul(v,Z)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(l,ne)|0,i=i+Math.imul(l,re)|0,i=i+Math.imul(f,ne)|0,o=o+Math.imul(f,re)|0;var we=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=Math.imul(T,B),i=i+Math.imul(I,q)|0,o=Math.imul(I,B),r=r+Math.imul(A,z)|0,i=i+Math.imul(A,G)|0,i=i+Math.imul(M,z)|0,o=o+Math.imul(M,G)|0,r=r+Math.imul(E,J)|0,i=i+Math.imul(E,K)|0,i=i+Math.imul(S,J)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(b,W)|0,i=i+Math.imul(b,X)|0,i=i+Math.imul(w,W)|0,o=o+Math.imul(w,X)|0,r=r+Math.imul(g,Z)|0,i=i+Math.imul(g,ee)|0,i=i+Math.imul(_,Z)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(p,ne)|0,i=i+Math.imul(p,re)|0,i=i+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(l,oe)|0,i=i+Math.imul(l,ae)|0,i=i+Math.imul(f,oe)|0,o=o+Math.imul(f,ae)|0;var $e=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+($e>>>26)|0,$e&=67108863,r=Math.imul(R,q),i=Math.imul(R,B),i=i+Math.imul(N,q)|0,o=Math.imul(N,B),r=r+Math.imul(T,z)|0,i=i+Math.imul(T,G)|0,i=i+Math.imul(I,z)|0,o=o+Math.imul(I,G)|0,r=r+Math.imul(A,J)|0,i=i+Math.imul(A,K)|0,i=i+Math.imul(M,J)|0,o=o+Math.imul(M,K)|0,r=r+Math.imul(E,W)|0,i=i+Math.imul(E,X)|0,i=i+Math.imul(S,W)|0,o=o+Math.imul(S,X)|0,r=r+Math.imul(b,Z)|0,i=i+Math.imul(b,ee)|0,i=i+Math.imul(w,Z)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(g,ne)|0,i=i+Math.imul(g,re)|0,i=i+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(p,oe)|0,i=i+Math.imul(p,ae)|0,i=i+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0,r=r+Math.imul(l,ue)|0,i=i+Math.imul(l,ce)|0,i=i+Math.imul(f,ue)|0,o=o+Math.imul(f,ce)|0;var Ee=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(P,q),i=Math.imul(P,B),i=i+Math.imul(j,q)|0,o=Math.imul(j,B),r=r+Math.imul(R,z)|0,i=i+Math.imul(R,G)|0,i=i+Math.imul(N,z)|0,o=o+Math.imul(N,G)|0,r=r+Math.imul(T,J)|0,i=i+Math.imul(T,K)|0,i=i+Math.imul(I,J)|0,o=o+Math.imul(I,K)|0,r=r+Math.imul(A,W)|0,i=i+Math.imul(A,X)|0,i=i+Math.imul(M,W)|0,o=o+Math.imul(M,X)|0,r=r+Math.imul(E,Z)|0,i=i+Math.imul(E,ee)|0,i=i+Math.imul(S,Z)|0,o=o+Math.imul(S,ee)|0,r=r+Math.imul(b,ne)|0,i=i+Math.imul(b,re)|0,i=i+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(g,oe)|0,i=i+Math.imul(g,ae)|0,i=i+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(p,ue)|0,i=i+Math.imul(p,ce)|0,i=i+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(l,le)|0,i=i+Math.imul(l,fe)|0,i=i+Math.imul(f,le)|0,o=o+Math.imul(f,fe)|0;var Se=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,q),i=Math.imul(L,B),i=i+Math.imul(U,q)|0,o=Math.imul(U,B),r=r+Math.imul(P,z)|0,i=i+Math.imul(P,G)|0,i=i+Math.imul(j,z)|0,o=o+Math.imul(j,G)|0,r=r+Math.imul(R,J)|0,i=i+Math.imul(R,K)|0,i=i+Math.imul(N,J)|0,o=o+Math.imul(N,K)|0,r=r+Math.imul(T,W)|0,i=i+Math.imul(T,X)|0,i=i+Math.imul(I,W)|0,o=o+Math.imul(I,X)|0,r=r+Math.imul(A,Z)|0,i=i+Math.imul(A,ee)|0,i=i+Math.imul(M,Z)|0,o=o+Math.imul(M,ee)|0,r=r+Math.imul(E,ne)|0,i=i+Math.imul(E,re)|0,i=i+Math.imul(S,ne)|0,o=o+Math.imul(S,re)|0,r=r+Math.imul(b,oe)|0,i=i+Math.imul(b,ae)|0,i=i+Math.imul(w,oe)|0,o=o+Math.imul(w,ae)|0,r=r+Math.imul(g,ue)|0,i=i+Math.imul(g,ce)|0,i=i+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(p,le)|0,i=i+Math.imul(p,fe)|0,i=i+Math.imul(v,le)|0,o=o+Math.imul(v,fe)|0,r=r+Math.imul(l,pe)|0,i=i+Math.imul(l,ve)|0,i=i+Math.imul(f,pe)|0,o=o+Math.imul(f,ve)|0;var Oe=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,z),i=Math.imul(L,G),i=i+Math.imul(U,z)|0,o=Math.imul(U,G),r=r+Math.imul(P,J)|0,i=i+Math.imul(P,K)|0,i=i+Math.imul(j,J)|0,o=o+Math.imul(j,K)|0,r=r+Math.imul(R,W)|0,i=i+Math.imul(R,X)|0,i=i+Math.imul(N,W)|0,o=o+Math.imul(N,X)|0,r=r+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,i=i+Math.imul(I,Z)|0,o=o+Math.imul(I,ee)|0,r=r+Math.imul(A,ne)|0,i=i+Math.imul(A,re)|0,i=i+Math.imul(M,ne)|0,o=o+Math.imul(M,re)|0,r=r+Math.imul(E,oe)|0,i=i+Math.imul(E,ae)|0,i=i+Math.imul(S,oe)|0,o=o+Math.imul(S,ae)|0,r=r+Math.imul(b,ue)|0,i=i+Math.imul(b,ce)|0,i=i+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(g,le)|0,i=i+Math.imul(g,fe)|0,i=i+Math.imul(_,le)|0,o=o+Math.imul(_,fe)|0,r=r+Math.imul(p,pe)|0,i=i+Math.imul(p,ve)|0,i=i+Math.imul(v,pe)|0,o=o+Math.imul(v,ve)|0;var Ae=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,J),i=Math.imul(L,K),i=i+Math.imul(U,J)|0,o=Math.imul(U,K),r=r+Math.imul(P,W)|0,i=i+Math.imul(P,X)|0,i=i+Math.imul(j,W)|0,o=o+Math.imul(j,X)|0,r=r+Math.imul(R,Z)|0,i=i+Math.imul(R,ee)|0,i=i+Math.imul(N,Z)|0,o=o+Math.imul(N,ee)|0,r=r+Math.imul(T,ne)|0,i=i+Math.imul(T,re)|0,i=i+Math.imul(I,ne)|0,o=o+Math.imul(I,re)|0,r=r+Math.imul(A,oe)|0,i=i+Math.imul(A,ae)|0,i=i+Math.imul(M,oe)|0,o=o+Math.imul(M,ae)|0,r=r+Math.imul(E,ue)|0,i=i+Math.imul(E,ce)|0,i=i+Math.imul(S,ue)|0,o=o+Math.imul(S,ce)|0,r=r+Math.imul(b,le)|0,i=i+Math.imul(b,fe)|0,i=i+Math.imul(w,le)|0,o=o+Math.imul(w,fe)|0,r=r+Math.imul(g,pe)|0,i=i+Math.imul(g,ve)|0,i=i+Math.imul(_,pe)|0,o=o+Math.imul(_,ve)|0;var Me=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,W),i=Math.imul(L,X),i=i+Math.imul(U,W)|0,o=Math.imul(U,X),r=r+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,i=i+Math.imul(j,Z)|0,o=o+Math.imul(j,ee)|0,r=r+Math.imul(R,ne)|0,i=i+Math.imul(R,re)|0,i=i+Math.imul(N,ne)|0,o=o+Math.imul(N,re)|0,r=r+Math.imul(T,oe)|0,i=i+Math.imul(T,ae)|0,i=i+Math.imul(I,oe)|0,o=o+Math.imul(I,ae)|0,r=r+Math.imul(A,ue)|0,i=i+Math.imul(A,ce)|0,i=i+Math.imul(M,ue)|0,o=o+Math.imul(M,ce)|0,r=r+Math.imul(E,le)|0,i=i+Math.imul(E,fe)|0,i=i+Math.imul(S,le)|0,o=o+Math.imul(S,fe)|0,r=r+Math.imul(b,pe)|0,i=i+Math.imul(b,ve)|0,i=i+Math.imul(w,pe)|0,o=o+Math.imul(w,ve)|0;var xe=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(L,Z),i=Math.imul(L,ee),i=i+Math.imul(U,Z)|0,o=Math.imul(U,ee),r=r+Math.imul(P,ne)|0,i=i+Math.imul(P,re)|0,i=i+Math.imul(j,ne)|0,o=o+Math.imul(j,re)|0,r=r+Math.imul(R,oe)|0,i=i+Math.imul(R,ae)|0,i=i+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,r=r+Math.imul(T,ue)|0,i=i+Math.imul(T,ce)|0,i=i+Math.imul(I,ue)|0,o=o+Math.imul(I,ce)|0,r=r+Math.imul(A,le)|0,i=i+Math.imul(A,fe)|0,i=i+Math.imul(M,le)|0,o=o+Math.imul(M,fe)|0,r=r+Math.imul(E,pe)|0,i=i+Math.imul(E,ve)|0,i=i+Math.imul(S,pe)|0,o=o+Math.imul(S,ve)|0;var Te=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,ne),i=Math.imul(L,re),i=i+Math.imul(U,ne)|0,o=Math.imul(U,re),r=r+Math.imul(P,oe)|0,i=i+Math.imul(P,ae)|0,i=i+Math.imul(j,oe)|0,o=o+Math.imul(j,ae)|0,r=r+Math.imul(R,ue)|0,i=i+Math.imul(R,ce)|0,i=i+Math.imul(N,ue)|0,o=o+Math.imul(N,ce)|0,r=r+Math.imul(T,le)|0,i=i+Math.imul(T,fe)|0,i=i+Math.imul(I,le)|0,o=o+Math.imul(I,fe)|0,r=r+Math.imul(A,pe)|0,i=i+Math.imul(A,ve)|0,i=i+Math.imul(M,pe)|0,o=o+Math.imul(M,ve)|0;var Ie=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(L,oe),i=Math.imul(L,ae),i=i+Math.imul(U,oe)|0,o=Math.imul(U,ae),r=r+Math.imul(P,ue)|0,i=i+Math.imul(P,ce)|0,i=i+Math.imul(j,ue)|0,o=o+Math.imul(j,ce)|0,r=r+Math.imul(R,le)|0,i=i+Math.imul(R,fe)|0,i=i+Math.imul(N,le)|0,o=o+Math.imul(N,fe)|0,r=r+Math.imul(T,pe)|0,i=i+Math.imul(T,ve)|0,i=i+Math.imul(I,pe)|0,o=o+Math.imul(I,ve)|0;var Ce=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,ue),i=Math.imul(L,ce),i=i+Math.imul(U,ue)|0,o=Math.imul(U,ce),r=r+Math.imul(P,le)|0,i=i+Math.imul(P,fe)|0,i=i+Math.imul(j,le)|0,o=o+Math.imul(j,fe)|0,r=r+Math.imul(R,pe)|0,i=i+Math.imul(R,ve)|0,i=i+Math.imul(N,pe)|0,o=o+Math.imul(N,ve)|0;var Re=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(L,le),i=Math.imul(L,fe),i=i+Math.imul(U,le)|0,o=Math.imul(U,fe),r=r+Math.imul(P,pe)|0,i=i+Math.imul(P,ve)|0,i=i+Math.imul(j,pe)|0,o=o+Math.imul(j,ve)|0;var Ne=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(L,pe),i=Math.imul(L,ve),i=i+Math.imul(U,pe)|0,o=Math.imul(U,ve);var ke=(c+r|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,u[0]=me,u[1]=ge,u[2]=_e,u[3]=ye,u[4]=be,u[5]=we,u[6]=$e,u[7]=Ee,u[8]=Se,u[9]=Oe,u[10]=Ae,u[11]=Me,u[12]=xe,u[13]=Te,u[14]=Ie,u[15]=Ce,u[16]=Re,u[17]=Ne,u[18]=ke,0!==c&&(u[19]=c,n.length++),n};Math.imul||(S=c),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?S(this,e,t):n<63?c(this,e,t):n<1024?d(this,e,t):l(this,e,t)},f.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},f.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},f.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},f.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),d=0;d<i;d+=s)for(var l=u,f=c,h=0;h<a;h++){var p=n[d+h],v=r[d+h],m=n[d+h+a],g=r[d+h+a],_=l*m-f*g;g=l*g+f*m,m=_,n[d+h]=p+m,r[d+h]=v+g,n[d+h+a]=p-m,r[d+h+a]=v-g,h!==s&&(_=u*l-c*f,f=u*f+c*l,l=_)}},f.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},f.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},f.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},f.prototype.convert13b=function(e,t,n,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},f.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},f.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),d=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,d,l,r,i);for(var h=0;h<r;h++){var p=s[h]*d[h]-u[h]*l[h];u[h]=s[h]*l[h]+u[h]*d[h],s[h]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),l(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=u(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<n;this.words[t]=u|a,a=s>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){r("number"==typeof e&&e>=0);var i;i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=i);c--){var l=0|this.words[c];this.words[c]=d<<26-o|l>>>o,d=l&s}return u&&0!==d&&(u.words[u.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o=e.length+n;this._expand(o);var a,s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+s;var u=(0|e.words[i])*t;a-=67108863&u,s=(a>>26)-(u/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)a=(0|this.words[i+n])+s,s=a>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)a=-(0|this.words[i])+s,s=a>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),i=e,a=0|i.words[i.length-1];0!==(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==t){s=new o(null),s.length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var d=r.clone()._ishlnsubmul(i,1,u);0===d.negative&&(r=d,s&&(s.words[u]=1));for(var l=u-1;l>=0;l--){var f=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(i,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);s&&(s.words[l]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(e,t,n){if(r(!e.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var i,a,s;return 0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t)},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var d=n.clone(),l=t.clone();!t.isZero();){for(var f=0,h=1;0==(t.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(d),a.isub(l)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0==(n.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(d),u.isub(l)),s.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),a.isub(u)):(n.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;0==(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)i.isOdd()&&i.iadd(s),i.iushrn(1);for(var d=0,l=1;0==(n.words[0]&l)&&d<26;++d,l<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a)):(n.isub(t),a.isub(i))}var f;return f=0===t.cmpn(1)?i:a,f.cmpn(0)<0&&f.iadd(e),f},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var n;if(this.length>1)n=1;else{t&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];n=i===e?0:i<e?-1:1}return 0!==this.negative?0|-n:n},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new _(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var O={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},h.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},h.prototype.split=function(e,t){e.iushrn(this.n,0,t)},h.prototype.imulK=function(e){return e.imul(this.k)},i(p,h),p.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var o=0|e.words[r];e.words[r-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},p.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(v,h),i(m,h),i(g,h),g.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(O[e])return O[e];var t;if("k256"===e)t=new p;else if("p224"===e)t=new v;else if("p192"===e)t=new m;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new g}return O[e]=t,t},_.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},_.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new o(2*d*d).toRed(this);0!==this.pow(d,c).cmp(u);)d.redIAdd(u);for(var l=this.pow(d,i),f=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),p=a;0!==h.cmp(s);){for(var v=h,m=0;0!==v.cmp(s);m++)v=v.redSqr();r(m<p);var g=this.pow(l,new o(1).iushln(p-m-1));f=f.redMul(g),l=g.redSqr(),h=h.redMul(l),p=m}return f},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],d=u-1;d>=0;d--){var l=c>>d&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==a?(a<<=1,a|=l,(4===++s||0===r&&0===d)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}u=26}return i},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new y(e)},i(y,_),y.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},y.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},y.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},y.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},y.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)}).call(t,n(99)(e))},,,,,,,,function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(19))},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t,n){function r(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||i(e,t,n)}var i=n(98),o=n(62);e.exports=r},function(e,t,n){var r=n(49),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(383),i=r();e.exports=i},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}var i=n(18),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?i.Buffer:void 0,c=u?u.allocUnsafe:void 0;e.exports=r}).call(t,n(99)(e))},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var i=n(141);e.exports=r},function(e,t,n){var r=n(18),i=r.Uint8Array;e.exports=i},function(e,t,n){function r(e){return"function"!=typeof e.constructor||a(e)?{}:i(o(e))}var i=n(101),o=n(142),a=n(80);e.exports=r},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e,t){if("__proto__"!=t)return e[t]}e.exports=n},function(e,t,n){function r(e,t){var n=a(e),r=!n&&o(e),d=!n&&!r&&s(e),f=!n&&!r&&!d&&c(e),h=n||r||d||f,p=h?i(e.length,String):[],v=p.length;for(var m in e)!t&&!l.call(e,m)||h&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}var i=n(389),o=n(81),a=n(2),s=n(82),u=n(65),c=n(102),d=Object.prototype,l=d.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return i(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,a)}return t})}var i=n(85),o=n(104);e.exports=r},function(e,t,n){function r(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(u),i(e,this,c)}}var i=n(146),o=Math.max;e.exports=r},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=o(),s=i-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,i=16,o=Date.now;e.exports=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(148),o=r(i),a=n(230),s=r(a),u=n(41),c=r(u),d=n(37),l=r(d),f=n(105),h=r(f),p=n(394),v=r(p),m=n(124),g=r(m),_=n(56),y=r(_),b=n(187),w=r(b),$=n(11),E=r($),S=n(285),O=r(S);t.default={AccountEvent:o,ClientEvent:s,ConnectionEvent:c,ConnectionStatus:l,DisconnectReason:h,LogLevel:v,NotificationEvent:g,Plugin:y,StateEvent:w,TabEvent:E,PeerCommand:O},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.READY="ready",t.FEATURE_READY="feature-ready"},function(e,t,n){"use strict";var r=n(395);n.d(t,"a",function(){return r.a});var i=n(502);n.d(t,"b",function(){return i.a});var o=n(507);n.d(t,"c",function(){return o.a})},function(e,t,n){e.exports=!n(53)&&!n(68)(function(){return 7!=Object.defineProperty(n(233)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(67),i=n(43).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){function r(e,t,n){var r=s(e)?i:a;return n&&u(e,t,n)&&(t=void 0),r(e,o(t,3))}var i=n(235),o=n(27),a=n(424),s=n(2),u=n(104);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n,r,c,d){var l=n&s,f=e.length,h=t.length;if(f!=h&&!(l&&h>f))return!1;var p=d.get(e);if(p&&d.get(t))return p==t;var v=-1,m=!0,g=n&u?new i:void 0;for(d.set(e,t),d.set(t,e);++v<f;){var _=e[v],y=t[v];if(r)var b=l?r(y,_,v,t,e,d):r(_,y,v,e,t,d);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!o(t,function(e,t){if(!a(g,t)&&(_===e||c(_,e,n,r,d)))return g.push(t)})){m=!1;break}}else if(_!==y&&!c(_,y,n,r,d)){m=!1;break}}return d.delete(e),d.delete(t),m}var i=n(152),o=n(235),a=n(153),s=1,u=2;e.exports=r},function(e,t,n){function r(e){return i(e,a,o)}var i=n(238),o=n(155),a=n(38);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return o(e)?r:i(r,n(e))}var i=n(154),o=n(2);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}e.exports=n},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){function r(e){if(!i(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=n(80),o=n(409),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(49),i=n(18),o=r(i,"WeakMap");e.exports=o},function(e,t,n){function r(e){return e===e&&!i(e)}var i=n(9);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t,n){function r(e,t){return null!=e&&o(e,t,i)}var i=n(419),o=n(420);e.exports=r},function(e,t,n){function r(e,t){return e&&i(e,t,o)}var i=n(217),o=n(38);e.exports=r},function(e,t,n){"use strict";function r(e,t){return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,c.default)(e)&&e.length>0}function o(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:'Argument or variable "'+t+"\" doesn't satisfy the requirements.";if(!i(t))throw new l.default("Invalid assertion: argument name should be a non empty string.");if(!i(o))throw new l.default("Invalid assertion: message should be a non empty string.");if(!(0,s.default)(r))throw new l.default("Invalid assertion: Predicate should be a function.");var a=null;try{if(r(n))return n}catch(e){a=e}var u=a?o+'. Also, an error was thrown: "'+a.message+'".':o,c=new l.default(u,a);throw Error.captureStackTrace&&Error.captureStackTrace(c,e),c}Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),s=r(a),u=n(8),c=r(u);t.default=o;var d=n(429),l=r(d)},function(e,t,n){var r=n(54),i=n(109),o=n(162)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(433),o=r(i),a=n(444),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){"use strict";var r=n(110),i=n(42),o=n(252),a=n(66),s=n(72),u=n(436),c=n(168),d=n(249),l=n(30)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,v,m,g){u(n,t,p);var _,y,b,w=function(e){if(!f&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},$=t+" Iterator",E="values"==v,S=!1,O=e.prototype,A=O[l]||O["@@iterator"]||v&&O[v],M=A||w(v),x=v?E?w("entries"):M:void 0,T="Array"==t?O.entries||A:A;if(T&&(b=d(T.call(new e)))!==Object.prototype&&b.next&&(c(b,$,!0),r||"function"==typeof b[l]||a(b,l,h)),E&&A&&"values"!==A.name&&(S=!0,M=function(){return A.call(this)}),r&&!g||!f&&!S&&O[l]||a(O,l,M),s[t]=M,s[$]=h,v)if(_={values:E?M:w("values"),keys:m?M:w("keys"),entries:x},g)for(y in _)y in O||o(O,y,_[y]);else i(i.P+i.F*(f||S),t,_);return _}},function(e,t,n){e.exports=n(66)},function(e,t,n){var r=n(54),i=n(73),o=n(438)(!1),a=n(162)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(166);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(164),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=n(43),i=n(54),o=n(53),a=n(42),s=n(252),u=n(446).KEY,c=n(68),d=n(163),l=n(168),f=n(111),h=n(30),p=n(170),v=n(171),m=n(447),g=n(448),_=n(52),y=n(67),b=n(73),w=n(150),$=n(87),E=n(165),S=n(449),O=n(258),A=n(44),M=n(113),x=O.f,T=A.f,I=S.f,C=r.Symbol,R=r.JSON,N=R&&R.stringify,k=h("_hidden"),P=h("toPrimitive"),j={}.propertyIsEnumerable,D=d("symbol-registry"),L=d("symbols"),U=d("op-symbols"),F=Object.prototype,q="function"==typeof C,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,z=o&&c(function(){return 7!=E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=x(F,t);r&&delete F[t],T(e,t,n),r&&e!==F&&T(F,t,r)}:T,G=function(e){var t=L[e]=E(C.prototype);return t._k=e,t},V=q&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},J=function(e,t,n){return e===F&&J(U,t,n),_(e),t=w(t,!0),_(n),i(L,t)?(n.enumerable?(i(e,k)&&e[k][t]&&(e[k][t]=!1),n=E(n,{enumerable:$(0,!1)})):(i(e,k)||T(e,k,$(1,{})),e[k][t]=!0),z(e,t,n)):T(e,t,n)},K=function(e,t){_(e);for(var n,r=m(t=b(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},Y=function(e,t){return void 0===t?E(e):K(E(e),t)},W=function(e){var t=j.call(this,e=w(e,!0));return!(this===F&&i(L,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(L,e)||i(this,k)&&this[k][e])||t)},X=function(e,t){if(e=b(e),t=w(t,!0),e!==F||!i(L,t)||i(U,t)){var n=x(e,t);return!n||!i(L,t)||i(e,k)&&e[k][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=I(b(e)),r=[],o=0;n.length>o;)i(L,t=n[o++])||t==k||t==u||r.push(t);return r},Z=function(e){for(var t,n=e===F,r=I(n?U:b(e)),o=[],a=0;r.length>a;)!i(L,t=r[a++])||n&&!i(F,t)||o.push(L[t]);return o};q||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(U,n),i(this,k)&&i(this[k],e)&&(this[k][e]=!1),z(this,e,$(1,n))};return o&&H&&z(F,e,{configurable:!0,set:t}),G(e)},s(C.prototype,"toString",function(){return this._k}),O.f=X,A.f=J,n(257).f=S.f=Q,n(114).f=W,n(172).f=Z,o&&!n(110)&&s(F,"propertyIsEnumerable",W,!0),p.f=function(e){return G(h(e))}),a(a.G+a.W+a.F*!q,{Symbol:C});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=M(h.store),re=0;ne.length>re;)v(ne[re++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return i(D,e+="")?D[e]:D[e]=C(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!q,"Object",{create:Y,defineProperty:J,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),R&&a(a.S+a.F*(!q||c(function(){var e=C();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(y(t)||void 0!==e)&&!V(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,N.apply(R,r)}}),C.prototype[P]||n(66)(C.prototype,P,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){var r=n(253),i=n(167).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(114),i=n(87),o=n(73),a=n(150),s=n(54),u=n(232),c=Object.getOwnPropertyDescriptor;t.f=n(53)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=r.BaseError),o(e,t)}var r,i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(461);!function(e){var t=function(e){function t(t,n){e.call(this,t),this.cause=n}return i(t,e),t.prototype.toString=function(){return e.prototype.toString.call(this)+(this.cause?"\nCaused by: "+this.cause.toString():"")},t}(o.BaseError);e.BaseError=t}(r||(r={})),e.exports=r},function(e,t,n){"use strict";function r(e,t){i.forEach(function(n){e[n]=t[n]})}t.a=r;var i=["lastLevel","lastMsg","lastObj","lastLogger"]},function(e,t,n){var r=n(262),i=n(30)("iterator"),o=n(72);e.exports=n(16).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(166),i=n(30)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=i(e))===o||e===-o){return(e<0?-1:1)*a}return e===e?e:0}var i=n(174),o=1/0,a=1.7976931348623157e308;e.exports=r},function(e,t,n){var r=n(154),i=n(142),o=n(155),a=n(240),s=Object.getOwnPropertySymbols,u=s?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=u},function(e,t,n){function r(e,t){return t=i(t,e),null==(e=a(e,t))||delete e[s(o(t))]}var i=n(69),o=n(116),a=n(494),s=n(70);e.exports=r},function(e,t,n){function r(e){return a(o(e,void 0,i),e+"")}var i=n(496),o=n(226),a=n(147);e.exports=r},function(e,t,n){function r(e,t,n,a,s){var u=-1,c=e.length;for(n||(n=o),s||(s=[]);++u<c;){var d=e[u];t>0&&n(d)?t>1?r(d,t-1,n,a,s):i(s,d):a||(s[s.length]=d)}return s}var i=n(154),o=n(497);e.exports=r},function(e,t,n){"use strict";var r=n(500),i=n.n(r),o=i()("needsMetadata");t.a=o},function(e,t,n){function r(e,t){return a(e,o(i(t)))}var i=n(27),o=n(117),a=n(503);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,s=t.length,u={};++r<s;){var c=t[r],d=i(e,c);n(d,c)&&o(u,a(c,e),d)}return u}var i=n(107),o=n(504),a=n(69);e.exports=r},function(e,t,n){function r(e){if(null==e)return!0;if(u(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||l(e)||a(e)))return!e.length;var t=o(e);if(t==f||t==h)return!e.size;if(d(e))return!i(e).length;for(var n in e)if(v.call(e,n))return!1;return!0}var i=n(241),o=n(88),a=n(81),s=n(2),u=n(33),c=n(82),d=n(80),l=n(102),f="[object Map]",h="[object Set]",p=Object.prototype,v=p.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r){e=o(e)?e:u(e),n=n&&!r?s(n):0;var d=e.length;return n<0&&(n=c(d+n,0)),a(e)?n<=d&&e.indexOf(t,n)>-1:!!d&&i(e,t,n)>-1}var i=n(181),o=n(33),a=n(8),s=n(90),u=n(120),c=Math.max;e.exports=r},function(e,t){function n(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}e.exports=n},function(e,t,n){var r=n(51),i=n(275),o=i?function(e,t){return i.set(e,t),e}:r;e.exports=o},function(e,t,n){var r=n(242),i=r&&new r;e.exports=i},function(e,t,n){function r(e,t,n,y,b,w,$,E,S,O){function A(){for(var h=arguments.length,p=Array(h),v=h;v--;)p[v]=arguments[v];if(I)var m=c(A),g=a(p,m);if(y&&(p=i(p,y,b,I)),w&&(p=o(p,w,$,I)),h-=g,I&&h<O){var _=l(p,m);return u(e,t,r,A.placeholder,n,p,_,E,S,O-h)}var N=x?n:this,k=T?N[e]:e;return h=p.length,E?p=d(p,E):C&&h>1&&p.reverse(),M&&S<h&&(p.length=S),this&&this!==f&&this instanceof A&&(k=R||s(k)),k.apply(N,p)}var M=t&g,x=t&h,T=t&p,I=t&(v|m),C=t&_,R=T?void 0:s(e);return A}var i=n(277),o=n(278),a=n(517),s=n(122),u=n(279),c=n(186),d=n(526),l=n(123),f=n(18),h=1,p=2,v=8,m=16,g=128,_=512;e.exports=r},function(e,t){function n(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,c=t.length,d=r(a-s,0),l=Array(c+d),f=!i;++u<c;)l[u]=t[u];for(;++o<s;)(f||o<a)&&(l[n[o]]=e[o]);for(;d--;)l[u++]=e[o++];return l}var r=Math.max;e.exports=n},function(e,t){function n(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,c=-1,d=t.length,l=r(a-u,0),f=Array(l+d),h=!i;++o<l;)f[o]=e[o];for(var p=o;++c<d;)f[p+c]=t[c];for(;++s<u;)(h||o<a)&&(f[p+n[s]]=e[o++]);return f}var r=Math.max;e.exports=n},function(e,t,n){function r(e,t,n,r,h,p,v,m,g,_){var y=t&d,b=y?v:void 0,w=y?void 0:v,$=y?p:void 0,E=y?void 0:p;t|=y?l:f,(t&=~(y?f:l))&c||(t&=~(s|u));var S=[e,t,h,$,b,E,w,m,g,_],O=n.apply(void 0,S);return i(e)&&o(O,S),O.placeholder=r,a(O,e,t)}var i=n(518),o=n(283),a=n(284),s=1,u=2,c=4,d=8,l=32,f=64;e.exports=r},function(e,t,n){var r=n(275),i=n(281),o=r?function(e){return r.get(e)}:i;e.exports=o},function(e,t){function n(){}e.exports=n},function(e,t,n){function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var i=n(101),o=n(184);r.prototype=i(o.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){var r=n(274),i=n(228),o=i(r);e.exports=o},function(e,t,n){function r(e,t,n){var r=t+"";return a(e,o(r,s(i(r),n)))}var i=n(523),o=n(524),a=n(147),s=n(525);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UPDATE_PROFILE="AccountManager:updateProfile",t.SIGN_OUT="AccountManager:signOut",t.GET_PROFILE="AccountManager:getProfile"},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){function n(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){function r(e){return o(i(e,a))}var i=n(175),o=n(543),a=1;e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||"Error in crypto process.",n));return o.details=[],o}return o(t,e),t}(s.default);t.default=u,e.exports=t.default},function(e,t,n){(function(r){var i,o;!function(a){"use strict";function s(e){function t(e,t){var n=0,r=e.length;for(n=0;n<r;n++)t(n,e[n])}function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function r(e,n,r){if(r="boolean"==typeof r?r:d.async,e.length){var i=e.slice();t(i,function(e,t){"object"==typeof t&&i.hasOwnProperty(e)&&(r?setTimeout(function(){t.callback.apply(t.context,n)},4):t.callback.apply(t.context,n))})}}function i(e,t){var n;for(n in e)"_"!==n[0]&&e.hasOwnProperty(n)&&r(e[n]._events,t)}function o(e,t,n,a){n=n.slice();var s=n.shift(),u=a.depth,c=a.async,d=a.partsLength,l=a.recurrent,f=d-n.length;if(!s)return void r(e._events,t,c);if(void 0!==e["*"]&&o(e["*"],t,n,a),"*"===s&&i(e,t,c),void 0===e[s])return void(a.log&&console.warn("There is no "+a.nsString+" subscription"));if(e=e[s],!0===l&&"number"!=typeof u){if(r(e._events,t,c),0===n.length)return}else!0===l&&"number"==typeof u&&f>=d-u&&r(e._events,t,c);o(e,t,n,a)}function a(e,t,n){var r,i=e.split(d.separator),o=n&&void 0!==n.context?n.context:d.context,a=null,s=0;for(o||(o=t),r=c,s=0;s<i.length;s+=1)void 0===r[i[s]]&&(r[i[s]]={},r[i[s]]._events=[]),r=r[i[s]];return a={callback:t,context:o},r._events.push(a),{namespace:i.join(d.separator),event:a}}function u(e){if(null===e||void 0===e)return null;var n,r=e.namespace,i=e.event,o=r.split(d.separator),a=0;for(n=c,a=0;a<o.length;a+=1){if(void 0===n[o[a]])return d.log&&console.error("There is no "+r+" subscription"),null;n=n[o[a]]}t(n._events,function(e){n._events[e]===i&&n._events.splice(e,1)})}var c={},d={separator:e&&e.separator?e.separator:"/",recurrent:!(!e||"boolean"!=typeof e.recurrent)&&e.recurrent,depth:e&&"number"==typeof e.depth?e.depth:null,async:!(!e||"boolean"!=typeof e.async)&&e.async,context:e&&e.context?e.context:null,log:!(!e||!e.log)&&e.log};return{publish:function(e,t,n){var r=e.split(d.separator),i="object"==typeof n&&n.recurrent?n.recurrent:d.recurrent,a="object"==typeof n&&n.depth?n.depth:d.depth,s="object"==typeof n&&n.async?n.async:d.async,u=r.length;if(!r.length)return void(d.log&&console.error("Wrong namespace provided "+e));o(c,t,r,{recurrent:i,depth:a,async:s,parts:r,nsString:e,partsLength:u})},subscribe:function(e,r,i){var o=this,s=[];if(n(r))t(r,function(t){var n=r[t];s=s.concat(o.subscribe(e,n,i))});else{if(!n(e))return a.apply(o,arguments);t(e,function(t){var n=e[t];s=s.concat(o.subscribe(n,r,i))})}return s},subscribeOnce:function(e,t,n){function r(){var e=this;t.apply(e,arguments),i.unsubscribe(o)}var i=this,o=null;return o=i.subscribe(e,r,n)},unsubscribe:function(e){var r=this;n(e)?t(e,function(t){var n=e[t];u.apply(r,[n])}):u.apply(r,arguments)},newInstance:function(e){return new s(e)}}}var u=null,c=null;"object"==typeof pubsub?c=pubsub:"object"==typeof r&&"object"==typeof r.pubsubConfig&&(c=r.pubsubConfig),u=new s(c),i=u,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o),"object"==typeof e&&e.exports&&(e.exports=u),"object"==typeof window&&(window.pubsub=u,window!==a&&(a.pubsub=u))}(this)}).call(t,n(19))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return(0,h.default)(e)?""+_+JSON.stringify(e):e}function a(e){var t=e.match(y);return t&&2===t.length?JSON.parse(t[1]):e}function s(){if(!this._encKey)throw new p.InvalidOperationError("No encryption key was set, cannot proceed.")}function u(e,t){var n=e[t].bind(e);e[t]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return Promise.resolve().then(function(){return s.call(e),n.apply(void 0,r)})}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(565),l=r(d),f=n(9),h=r(f),p=n(0),v=n(47),m=n(35),g=r(m),_="$obj::",y=new RegExp("^\\"+_+"(.+)"),b=function(){function e(t){i(this,e),this._encKey=t,this._storage=(0,g.default)(l.default.createInstance({name:"m800-web",storeName:"encrypted-storage",driver:[l.default.INDEXEDDB,l.default.LOCALSTORAGE]})),u(this,"setItem"),u(this,"getItem")}return c(e,[{key:"setKey",value:function(e){this._encKey=e}},{key:"setItem",value:function(e,t){var n=(0,v.encrypt)(o(t),this._encKey);return this._storage.setItem(e,n)}},{key:"getItem",value:function(e){var t=this;return this._storage.getItem(e).then(function(e){return null===e?null:a((0,v.decrypt)(e,t._encKey))})}},{key:"removeItem",value:function(e){return this._storage.removeItem(e)}}]),e}();t.default=b,e.exports=t.default},function(e,t,n){!function(r,i,o){e.exports=t=i(n(29),n(567),n(196),n(295),n(568))}(0,function(e){return function(){var t=e,n=t.lib,r=n.BlockCipher,i=t.algo,o=[],a=[],s=[],u=[],c=[],d=[],l=[],f=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=0,r=0,t=0;t<256;t++){var i=r^r<<1^r<<2^r<<3^r<<4;i=i>>>8^255&i^99,o[n]=i,a[i]=n;var v=e[n],m=e[v],g=e[m],_=257*e[i]^16843008*i;s[n]=_<<24|_>>>8,u[n]=_<<16|_>>>16,c[n]=_<<8|_>>>24,d[n]=_;var _=16843009*g^65537*m^257*v^16843008*n;l[i]=_<<24|_>>>8,f[i]=_<<16|_>>>16,h[i]=_<<8|_>>>24,p[i]=_,n?(n=v^e[e[e[g^v]]],r^=e[e[r]]):n=r=1}}();var v=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,i=4*(r+1),a=this._keySchedule=[],s=0;s<i;s++)if(s<n)a[s]=t[s];else{var u=a[s-1];s%n?n>6&&s%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=u<<8|u>>>24,u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=v[s/n|0]<<24),a[s]=a[s-n]^u}for(var c=this._invKeySchedule=[],d=0;d<i;d++){var s=i-d;if(d%4)var u=a[s];else var u=a[s-4];c[d]=d<4||s<=4?u:l[o[u>>>24]]^f[o[u>>>16&255]]^h[o[u>>>8&255]]^p[o[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,u,c,d,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,h,p,a);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var u=this._nRounds,c=e[t]^n[0],d=e[t+1]^n[1],l=e[t+2]^n[2],f=e[t+3]^n[3],h=4,p=1;p<u;p++){var v=r[c>>>24]^i[d>>>16&255]^o[l>>>8&255]^a[255&f]^n[h++],m=r[d>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&c]^n[h++],g=r[l>>>24]^i[f>>>16&255]^o[c>>>8&255]^a[255&d]^n[h++],_=r[f>>>24]^i[c>>>16&255]^o[d>>>8&255]^a[255&l]^n[h++];c=v,d=m,l=g,f=_}var v=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[h++],m=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&c])^n[h++],g=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^n[h++],_=(s[f>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^n[h++];e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=_},keySize:8});t.AES=r._createHelper(m)}(),e.AES})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(29),n(194),n(195))}(0,function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),a=o.words,s=n.keySize,u=n.iterations;a.length<s;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var d=1;d<u;d++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*s,o}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF})},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){return e.enc.Utf8})},function(e,t,n){"use strict";function r(e){function t(e){c?e():u.push(e)}function n(e,n){t(function(){c.postMessage(e,n)})}function r(e,n,r){t(function(){c.addEventListener(e,n,r)})}function i(e,n,r){t(function(){c.removeEventListener(e,n,r)})}function s(){t(function(){c.terminate()})}var u=[],c=null,d=null,l={postMessage:n,addEventListener:r,removeEventListener:i,terminate:s};return Object.defineProperty(l,"onmessage",{set:function(e){t(function(){c.onmessage=e})}}),Object.defineProperty(l,"onerror",{set:function(e){d=e,t(function(){c.onerror=e})}}),o.default.getWithRawResponse(e).then(function(e){var t=window.URL.createObjectURL(new Blob([e.response]));for(c=new Worker(t);0!==u.length;){u.shift()()}}).catch(function(t){if(!d)throw new a.NotFoundError("Cannot load worker script from "+e);d(new ErrorEvent("error",{message:"Cannot found the worker script.",filename:e,error:t}))}),l}Object.defineProperty(t,"__esModule",{value:!0});var i=n(197),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(0);t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){var r=new $,i=[],o=0;return e.forEach(function(e,a){var s=t.findIndex(function(t){return t===e});s>=0?i[s]=a:(r.remove(n.concat(a),o),o++)}),t.forEach(function(e,t){(0,g.default)(i[t])&&r.add(n.concat(t),e)}),r.getChanges()}function s(e,t,n,r){var i=new $;return Object.keys(e).forEach(function(o){var u=r?r.concat(o):[o];if(e[o]!==t[o]){if((0,g.default)(t[o]))return void i.remove(u);if(1===n)return void i.edit(u,t[o]);if((0,h.default)(e[o])){var c=a(e[o],t[o],u);return void(0===c.length?i.edit(u,t[o]):i.batch(c))}if((0,v.default)(e[o])){var d=s(e[o],t[o],n-1,u);return void(0===d.length?i.edit(u,t[o]):i.batch(d))}i.edit(u,t[o])}}),Object.keys(t).forEach(function(n){(0,g.default)(e[n])&&i.add(r?r.concat(n):[n],t[n])}),i.getChanges()}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,h.default)(e)?a(e,t,[]):s(e,t,n)}function c(e,t){var n=t.type,r=t.path,o=t.change,a=t.offset,s=void 0===a?0:a,u=r[0];if(1===r.length){if((0,h.default)(e))switch(n){case"add":return(0,b.add)(e,o,u);case"remove":var d=u-s;return(0,b.remove)(e,d);default:throw new w.ArgumentError('Invalid action "'+n+'" for array patch')}switch(n){case"edit":case"add":return Object.assign({},e,i({},u,o));case"remove":var l=Object.assign({},e);return delete l[u],l;default:throw new w.ArgumentError('Invalid action "'+n+'" for object patch')}}return Object.assign({},e,i({},u,c(e[u],{type:n,path:r.slice(1),change:o,offset:s})))}function d(e,t){return t.reduce(function(e,t){return c(e,t)},e)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.diff=u,t.applyPatch=d;var f=n(2),h=r(f),p=n(9),v=r(p),m=n(178),g=r(m),_=n(121),y=r(_),b=n(58),w=n(0),$=function(){function e(){o(this,e),this.changes=[]}return l(e,[{key:"add",value:function(e,t){this.changes.push({type:"add",path:e,change:t})}},{key:"edit",value:function(e,t){this.changes.push({type:"edit",path:e,change:t})}},{key:"remove",value:function(e,t){var n={type:"remove",path:e};(0,y.default)(t)&&(n.offset=t),this.changes.push(n)}},{key:"batch",value:function(e){this.changes=this.changes.concat(e)}},{key:"getChanges",value:function(){return this.changes}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(106),a=function(){function e(t,n){r(this,e),this._logger=t.child(n)}return i(e,[{key:"log",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._logger).log.apply(t,[e].concat(r))}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[o.LogLevel.Trace].concat(t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[o.LogLevel.Debug].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[o.LogLevel.Info].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[o.LogLevel.Warn].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[o.LogLevel.Error].concat(t))}},{key:"child",value:function(e){return this._logger.child(e)}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleStream=void 0;var r=n(590),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.ConsoleStream=i.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){var e=re.getItem(Y.CONNECTION_SESSION);if(e){var t=(0,F.getUserTokenFromStorage)();try{e=(0,Z.decrypt)(e,t)}catch(t){e=null}}return JSON.parse(e)}function u(e){var t=(0,F.getUserTokenFromStorage)();re.setItem(Y.CONNECTION_SESSION,(0,Z.encrypt)(JSON.stringify(e),t))}function c(){var e=s();return e?e.jid:null}function d(){re.removeItem(Y.CONNECTION_SESSION),re.removeItem(Y.USER_INFO),(0,F.removeUserTokenFromStorage)()}function l(e,t){var n=re.getItem(Y.USER_INFO);if(!n)throw new te.NotFoundError("No user information available, please signUp first.");var r=JSON.parse((0,Z.decrypt)(n,t));return{jid:e,username:r.username,password:r.password}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(e.provisionalInformation){var n=e.provisionalInformation.allocations,r=(0,Z.encrypt)(JSON.stringify(n),t);re.setItem(Y.ALLOCATIONS,r)}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(e.provisionalInformation){var n=e.provisionalInformation.attributes;(0,ee.forEach)(n,function(e,n){t.set(n,e)})}}function p(e){var t=function(e){return e.protocol+"://"+e.host+":"+e.port},n=re.getItem(Y.DEFAULT_IM_ENDPOINTS),r=re.getItem(Y.ALLOCATIONS),i=[];if(n&&(i=JSON.parse(n)),!r)return i;try{return JSON.parse((0,Z.decrypt)(r,e)).reduce(function(e,n){return"com.maaii.resource.im"!==n.type?e:("MAIN"===n.attributes["com.maaii.resource.priority"]?e.unshift(t(n)):e.push(t(n)),e)},[]).concat(i)}catch(e){return ne.warn("Encountered error while retrieving IM endpoints",e.message),i}}Object.defineProperty(t,"__esModule",{value:!0});var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(5),_=i(g),y=n(1),b=n(12),w=i(b),$=n(8),E=i($),S=n(26),O=i(S),A=n(64),M=i(A),x=n(126),T=i(x),I=n(3),C=i(I),R=n(86),N=n(46),k=i(N),P=n(4),j=n(40),D=n(34),L=n(131),U=n(132),F=n(133),q=n(306),B=i(q),H=n(11),z=n(41),G=n(37),V=r(G),J=n(105),K=r(J),Y=n(14),W=n(31),X=n(35),Q=i(X),Z=n(47),ee=n(134),te=n(0),ne=P.LoggerFactory.getInstance().getLogger("core/Connection"),re=(0,Q.default)(localStorage),ie=function(){function e(t,n,r,i,o,u,c){var d=this,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(a(this,e),(0,T.default)("imServers",l,["imServers"]),(0,C.default)("tokenCallback",l.tokenCallback,function(e){return!e||(0,O.default)(e)},"expect tokenCallback to be function if provided."),(0,_.default)(this),this._pm=t,this._stateSync=n,this._connectService=r,this._userService=i,this._storage=o,this._appMeta=c,this._tokenCallback=l.tokenCallback,this._maxServerRetries=l.maxServerRetries,this._configuration=u,Array.isArray(l.imServers)?this._imServer=l.imServers[0]:(0,E.default)(l.imServers)&&(this._imServer=l.imServers),this._setupPeerEventHandlers(),this._status=V.DISCONNECTED,t.isActive())this._stateSync.setState("connection",{status:V.DISCONNECTED});else{var f=this._stateSync.getState("connection");f&&f.status!==V.DISCONNECTED&&(this._status=V.CONNECTING),this._syncUserToken().then(function(){var e=s(),t=e.jid,n=e.opts;d._jid=t,d._opts=n;var r=d._stateSync.getState("connection"),i=r&&r.status||V.DISCONNECTED;d._changeStatus(i,!1)}).catch(function(e){ne.warn("Failed to get token from active tab. "+e)})}}return m(e,[{key:"connect",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,j.isValidBaseUrl)(this._imServer))return Promise.reject(new te.ArgumentError("Invalid IM server url."));if(!e)return Promise.reject(new te.ArgumentError("bareJid is required."));if(this._status!==V.DISCONNECTED)return Promise.reject(new te.InvalidOperationError("connect() should be called only when disconnected"));this._opts=n;var r=e+"/"+k.default.uniqueId;return this._changeStatus(V.CONNECTING),this._authenticateUser(r).then(function(e){var n=e.token,i=e.username,o=e.password;return t._token=n,t._storage.setKey(n),t._doConnect({jid:r,username:i,password:o})}).catch(function(e){throw t._changeStatus(V.DISCONNECTED),e})}},{key:"connectAs",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!(0,E.default)(n)&&(0,M.default)(n)&&(r=n,n=void 0);var i=(0,Z.generateKey)(""+this._appMeta.applicationSecret+e);if((0,F.saveUserTokenToStorage)(i),n){var o=(0,Z.encrypt)(n,i);re.setItem(Y.SSO_TOKEN,o)}var a=y.Strophe.getNodeFromJid(e),s=y.Strophe.getDomainFromJid(e),u={username:a,maaiiId:a,carrier:s,password:t,ssoToken:n},c=(0,Z.encrypt)(JSON.stringify(u),i);return re.setItem(Y.USER_INFO,c),this.connect(e,r)}},{key:"reconnect",value:function(){var e=this;if(!(0,j.isValidBaseUrl)(this._imServer))return Promise.reject(new te.ArgumentError("Invalid IM server url."));var t=c();return t?this._status!==V.DISCONNECTED?Promise.reject(new te.InvalidOperationError("reconnect() should be called only when disconnected")):(this._changeStatus(V.CONNECTING),(0,L.promisify)(l)(t,this._token).then(function(t){return e._doConnect(t)}).catch(function(t){throw e._changeStatus(V.DISCONNECTED),t})):Promise.reject(new te.InvalidOperationError("user was not connected before reconnect()"))}},{key:"setDefaultImEndpoints",value:function(e){(0,C.default)("endpoints",e,function(e){return Array.isArray(e)&&e.length>0&&e.every(D.isNonEmptyString)},"Expected endpoints to be a string array."),re.setItem(Y.DEFAULT_IM_ENDPOINTS,JSON.stringify(e))}},{key:"_doConnect",value:function(e){var t=this,n=void 0;return n=this._pm.isActive()?this._doConnectInActiveTab(e):this._doConnectInPassiveTab(e.jid),Promise.resolve(n).then(function(){return t._onConnected(c()),t})}},{key:"_startConnect",value:function(e){var t=this;return this._delegateConnectProcess(e).then(function(){return t._delegateLoginProcess(e).then(function(e){f(e,t._token),h(e,t._configuration)}).catch(function(e){return t._connectService.disconnect().then(function(){throw e})})}).then(function(){t._connectService.sendPresence()})}},{key:"_authenticateUser",value:function(e){var t=this,n=F.getUserTokenFromStorage;return(0,O.default)(this._tokenCallback)&&(n=this._tokenCallback),Promise.resolve(n(e)).then(function(n){if(!n)throw new te.ValidationError("No user token available.");if(!(0,E.default)(n))throw new te.ValidationError("Invalid user token, token needs to be string.");return(0,L.promisify)(l)(e,n).then(function(t){var r=t.username,i=t.password;return{jid:e,token:n,username:r,password:i}}).catch(function(e){if(e instanceof te.CryptoError)throw t._tokenCallback||d(),new te.AuthenticationRequiredError("Failed to verify user identity,\n                no user can be found with the given JID and token.",e);throw e})})}},{key:"_delegateConnectProcess",value:function(e){for(var t=this,n=this._applyBasicStreamAttrs(),r=function(r){var i=v({},n,{route:r});return t._connectService.connect(t._imServer,e,i,t._opts).catch(function(n){if(n.details&&n.details.context.type===K.EXPIRED)return t._connectService.connect(t._imServer,e,i,t._opts);throw n})},i=p(this._token),o=0,a=i;o<this._maxServerRetries;)a=a.concat(i),o++;return a=a.concat(void 0),(0,L.tryUntilResolved)(a,r)}},{key:"_delegateLoginProcess",value:function(e){var t=this;return new Promise(function(n,r){var i=function(e){var n=e.status,i=e.reason;if(n===V.DISCONNECTED){var o=new Error("Cannot connect: "+i.type);i.type===K.EXPIRED&&(o.shouldReconnect=!0),t._removeLoginStatusChangeHandler(),r(o)}};t._loginStatusChangeHandler=new w.default(t._connectService),t._loginStatusChangeHandler.add(z.STATUS_CHANGED,i);var o=B.default.login(e.username,t._appMeta);t._userService.login(o).then(function(e){t._removeLoginStatusChangeHandler(),n(e)}).catch(function(e){t._removeLoginStatusChangeHandler(),r(e)})})}},{key:"disconnect",value:function(){return this._status!==V.CONNECTED?Promise.reject(new te.InvalidOperationError("Not connected yet")):this._pm.isActive()?this._connectService.disconnect():this._handleDisconnectInPassiveTab()}},{key:"_applyBasicStreamAttrs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v({},e,{"maaii:appkey":this._appMeta.applicationKey,"xmlns:sdk":"urn:maaii:sdk","sdk:version":R.version})}},{key:"_setupPeerEventHandlers",value:function(){var e=this,t=new w.default(this._pm);t.add(H.MESSAGE_RECEIVED,function(t){var n=t.message,r=n.event,i=n.payload;r&&e._handlePeerEvent(r,i)}),t.add(H.REQUEST_RECEIVED,function(t){var n=t.requestId,r=t.message;(0,U.isCommandForModule)(r.command,e.constructor.name)&&e._handlePeerCommand.apply(e,[n,r.command].concat(o(r.args)))}),t.add(H.MODE_CHANGED,function(t){t===H.MODE_ACTIVE&&e._handleInstanceModeChange()})}},{key:"_handleInstanceModeChange",value:function(){var e=this;if(this.getStatus()!==V.DISCONNECTED){var t=s(),n=t.jid,r=t.opts;this._opts=r,(0,L.promisify)(l)(n,this._token).then(function(t){return e._delegateConnectProcess(t).then(function(){e._startMonitorConnectionStatus(),e._changeStatus(V.CONNECTED,!0)})}).catch(function(){e._changeStatus(V.DISCONNECTED,{type:K.NETWORK})})}}},{key:"_startMonitorConnectionStatus",value:function(){var e=this,t=new w.default(this._connectService);t.add(z.STATUS_CHANGED,function(t){var n=t.status,r=t.reason;e._changeStatus(n,r)}),this._statusChangeHandler=t}},{key:"_stopMonitorConnectionStatus",value:function(){this._statusChangeHandler&&(this._statusChangeHandler.reset(),this._statusChangeHandler=null)}},{key:"_removeLoginStatusChangeHandler",value:function(){this._loginStatusChangeHandler&&(this._loginStatusChangeHandler.reset(),this._loginStatusChangeHandler=null)}},{key:"_handlePeerCommand",value:function(e,t){var n=this;if("Connection:connect"===t){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];this._handleConnectCommand.apply(this,[e].concat(i))}else"Connection:disconnect"===t?this.disconnect().then(function(){n._pm.respond(e,{event:"Connection:disconnect:success"})}).catch(function(t){n._pm.respond(e,{event:"Connection:disconnect:failure",error:{name:t.name,message:t.message}})}):"Connection:getUserToken"===t&&this._pm.respond(e,{event:"Connection:getUserToken:success",payload:{token:this._token}})}},{key:"_handlePeerEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e==="Connection:"+z.STATUS_CHANGED){if(n.status===V.CONNECTED)return void this._syncUserToken().then(function(){t._onConnected(c())}).catch(function(e){ne.warn("Failed to get token from active tab. "+e)});this._changeStatus(n.status,n.reason)}}},{key:"_handleConnectCommand",value:function(e,t,n){var r=this;switch(this.getStatus()){case V.CONNECTED:this._pm.respond(e,{event:"Connection:connect:success"});break;case V.CONNECTING:var i=new w.default(this._connectService);i.add(z.STATUS_CHANGED,function(t){var n=t.status,o=t.reason;n===V.CONNECTED?(r._pm.respond(e,{event:"Connection:connect:success"}),i.reset()):n===V.DISCONNECTED&&(r._pm.respond(e,{event:"Connection:connect:failure",error:{name:"Error",message:o.type}}),i.reset())});break;default:this.connect(t,n).then(function(){r._pm.respond(e,{event:"Connection:connect:success"})}).catch(function(t){r._pm.respond(e,{event:"Connection:connect:failure",error:{name:t.name,message:t.message}})})}}},{key:"_hasUserChanged",value:function(e){return!this._jid||this._jid!==e}},{key:"_onConnected",value:function(e){var t=!this._hasUserChanged(e);this._jid=e,this._changeStatus(V.CONNECTED,t)}},{key:"_syncUserToken",value:function(){var e=this,t={command:"Connection:getUserToken",args:[]};return this._pm.request(t).then(function(t){var n=t.payload;e._token=n.token,e._storage.setKey(n.token)})}},{key:"_doConnectInActiveTab",value:function(e){var t=this;return this._stopMonitorConnectionStatus(),this._startConnect(e).catch(function(n){if(n.shouldReconnect)return t._startConnect(e);throw n}).then(function(){return t._startMonitorConnectionStatus(),u({jid:e.jid,opts:t._opts}),t})}},{key:"_doConnectInPassiveTab",value:function(e){var t=this,n=y.Strophe.getBareJidFromJid(e),r={command:"Connection:connect",args:[n,this._opts]};return this._pm.request(r).then(function(e){var n=e.event,r=e.error;if(n.endsWith("failure"))throw(0,W.deserializeError)(r);return t._syncUserToken()})}},{key:"_handleDisconnectInPassiveTab",value:function(){var e=this,t={command:"Connection:disconnect",args:[]};return this._pm.request(t).then(function(t){var n=t.event,r=t.error;if(!n.endsWith("success"))throw(0,W.deserializeError)(r);e._changeStatus(V.DISCONNECTED)})}},{key:"getJid",value:function(){return this._jid}},{key:"getCredentials",value:function(){return l(this.getJid(),this._token)}},{key:"getEndpoint",value:function(){return this._connectService.getEndpoint()}},{key:"getLastSession",value:function(){return s()}},{key:"getStatus",value:function(){return this._status}},{key:"_changeStatus",value:function(e,t){e!==this._status&&(this._status=e,this._stateSync.setState("connection",{status:e}),e===V.CONNECTED?this.emit(z.STATUS_CHANGED,{status:e,reconnect:!!t}):this.emit(z.STATUS_CHANGED,{status:e,reason:t}),this._pm.isActive()&&this._pm.broadcast({event:"Connection:"+z.STATUS_CHANGED,payload:{status:e,reason:t}}))}}]),e}();t.default=ie,e.exports=t.default},function(e,t,n){var r,i,o;!function(n,a){i=[],r=a,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var n="";f[t.charAt(0)]&&(n=t.charAt(0),t=t.substring(1));var r="",i="",o=!0,a=!1,s=!1;"+"===n?o=!1:"."===n?(i=".",r="."):"/"===n?(i="/",r="/"):"#"===n?(i="#",o=!1):";"===n?(i=";",r=";",a=!0,s=!0):"?"===n?(i="?",r="&",a=!0):"&"===n&&(i="&",r="&",a=!0);for(var u=[],c=t.split(","),d=[],l={},p=0;p<c.length;p++){var v=c[p],m=null;if(-1!==v.indexOf(":")){var g=v.split(":");v=g[0],m=parseInt(g[1],10)}for(var _={};h[v.charAt(v.length-1)];)_[v.charAt(v.length-1)]=!0,v=v.substring(0,v.length-1);var y={truncate:m,name:v,suffices:_};d.push(y),l[v]=y,u.push(v)}var b=function(t){for(var n="",u=0,c=0;c<d.length;c++){var l=d[c],f=t(l.name);if(null===f||void 0===f||Array.isArray(f)&&0===f.length||"object"==typeof f&&0===Object.keys(f).length)u++;else if(n+=c===u?i:r||",",Array.isArray(f)){a&&(n+=l.name+"=");for(var h=0;h<f.length;h++)h>0&&(n+=l.suffices["*"]?r||",":",",l.suffices["*"]&&a&&(n+=l.name+"=")),n+=o?encodeURIComponent(f[h]).replace(/!/g,"%21"):e(f[h])}else if("object"==typeof f){a&&!l.suffices["*"]&&(n+=l.name+"=");var p=!0;for(var v in f)p||(n+=l.suffices["*"]?r||",":","),p=!1,n+=o?encodeURIComponent(v).replace(/!/g,"%21"):e(v),n+=l.suffices["*"]?"=":",",n+=o?encodeURIComponent(f[v]).replace(/!/g,"%21"):e(f[v])}else a&&(n+=l.name,s&&""===f||(n+="=")),null!=l.truncate&&(f=f.substring(0,l.truncate)),n+=o?encodeURIComponent(f).replace(/!/g,"%21"):e(f)}return n};return b.varNames=u,{prefix:i,substitution:b}}function n(e){if(!(this instanceof n))return new n(e);for(var r=e.split("{"),i=[r.shift()],o=[],a=[],s=[];r.length>0;){var u=r.shift(),c=u.split("}")[0],d=u.substring(c.length+1),l=t(c);a.push(l.substitution),o.push(l.prefix),i.push(d),s=s.concat(l.substitution.varNames)}this.fill=function(e){for(var t=i[0],n=0;n<a.length;n++){t+=(0,a[n])(e),t+=i[n+1]}return t},this.varNames=s,this.template=e}function r(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else{var i;for(i in e)if(void 0===t[i]&&void 0!==e[i])return!1;for(i in t)if(void 0===e[i]&&void 0!==t[i])return!1;for(i in e)if(!r(e[i],t[i]))return!1}return!0}return!1}function i(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function o(e,t){return t=i(t||""),e=i(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+function(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function a(e){return e.split("#")[0]}function s(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=o(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)s(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=o(t,e.$ref));for(var r in e)"enum"!==r&&s(e[r],t)}}function u(e){e=e||"en";var t=w[e];return function(e){var n=t[e.code]||b[e.code];if("string"!=typeof n)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var r=e.params;return n.replace(/\{([^{}]*)\}/g,function(e,t){var n=r[t];return"string"==typeof n||"number"==typeof n?n:e})}}function c(e,t,n,r,i){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+r);this.message="",this.params=t,this.code=e,this.dataPath=n||"",this.schemaPath=r||"",this.subErrors=i||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}function d(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function l(e){var t,n,r=new p,i={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){r.addFormat.apply(r,arguments)},language:function(e){return e?(w[e]||(e=e.split("-")[0]),!!w[e]&&(t=e,e)):t},addLanguage:function(e,t){var n;for(n in g)t[n]&&!t[g[n]]&&(t[g[n]]=t[n]);var r=e.split("-")[0];if(w[r]){w[e]=Object.create(w[r]);for(n in t)void 0===w[r][n]&&(w[r][n]=t[n]),w[e][n]=t[n]}else w[e]=t,w[r]=t;return this},freshApi:function(e){var t=l();return e&&t.language(e),t},validate:function(e,i,o,a){var s=u(t),c=n?function(e,t,r){return n(e,t,r)||s(e,t,r)}:s,d=new p(r,!1,c,o,a);"string"==typeof i&&(i={$ref:i}),d.addSchema("",i);var l=d.validateAll(e,i,null,null,"");return!l&&a&&(l=d.banUnknownProperties(e,i)),this.error=l,this.missing=d.missing,this.valid=null===l,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,i,o,a){var s=u(t),c=n?function(e,t,r){return n(e,t,r)||s(e,t,r)}:s,d=new p(r,!0,c,o,a);"string"==typeof i&&(i={$ref:i}),d.addSchema("",i),d.validateAll(e,i,null,null,""),a&&d.banUnknownProperties(e,i);var l={toString:function(){return this.valid?"valid":this.error.message}};return l.errors=d.errors,l.missing=d.missing,l.valid=0===l.errors.length,l},addSchema:function(){return r.addSchema.apply(r,arguments)},getSchema:function(){return r.getSchema.apply(r,arguments)},getSchemaMap:function(){return r.getSchemaMap.apply(r,arguments)},getSchemaUris:function(){return r.getSchemaUris.apply(r,arguments)},getMissingUris:function(){return r.getMissingUris.apply(r,arguments)},dropSchemas:function(){r.dropSchemas.apply(r,arguments)},defineKeyword:function(){r.defineKeyword.apply(r,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==g[e])throw new Error("Error already defined: "+e+" as "+g[e]);if(void 0!==_[t])throw new Error("Error code already used: "+_[t]+" as "+t);g[e]=t,_[t]=e,b[e]=b[t]=n;for(var r in w){var i=w[r];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){r.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:o,getDocumentUri:a,errorCodes:g};return i.language(e||"en"),i}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var a in i)e.call(i,a)&&o.push(a);if(t)for(var s=0;s<r;s++)e.call(i,n[s])&&o.push(n[s]);return o}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var f={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},h={"*":!0};n.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var p=function(e,t,n,r,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=n||u("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var o in e.definedKeywords)this.definedKeywords[o]=e.definedKeywords[o].slice(0)};p.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},p.prototype.createError=function(e,t,n,r,i,o,a){var s=new c(e,t,n,r,i);return s.message=this.errorReporter(s,o,a),s},p.prototype.returnError=function(e){return e},p.prototype.collectError=function(e){return e&&this.errors.push(e),null},p.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},p.prototype.banUnknownProperties=function(e,t){for(var n in this.unknownPropertyPaths){var r=this.createError(g.UNKNOWN_PROPERTY,{path:n},n,"",null,e,t),i=this.handleError(r);if(i)return i}return null},p.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},p.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(g.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},p.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var r=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var o=decodeURIComponent(i);if(""===o)return this.resolveRefs(n,t);if("/"!==o.charAt(0))return;for(var a=o.split("/").slice(1),s=0;s<a.length;s++){var u=a[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[u]){n=void 0;break}n=n[u]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},p.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.searchSchemas(e[n],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&d(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var i=a(e[r]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},p.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===a(e)+"#"&&(e=a(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},p.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},p.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)e&&!e.test(n)||t.push(n);return t},p.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)e&&!e.test(n)||t.push(n);return t},p.prototype.dropSchemas=function(){this.schemas={},this.reset()},p.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},p.prototype.validateAll=function(e,t,n,r,i){var o;if(!(t=this.resolveRefs(t)))return null;if(t instanceof c)return this.errors.push(t),t;var a,s=this.errors.length,u=null,d=null;if(this.checkRecursive&&e&&"object"==typeof e){if(o=!this.scanned.length,e[this.validatedSchemasKey]){var l=e[this.validatedSchemasKey].indexOf(t);if(-1!==l)return this.errors=this.errors.concat(e[this.validationErrorsKey][l]),null}if(Object.isFrozen(e)&&-1!==(a=this.scannedFrozen.indexOf(e))){var f=this.scannedFrozenSchemas[a].indexOf(t);if(-1!==f)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][f]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][u]=t,this.scannedFrozenValidationErrors[a][u]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}d=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][d]=t,e[this.validationErrorsKey][d]=[]}}var h=this.errors.length,p=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateHypermedia(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(o){for(;this.scanned.length;){delete this.scanned.pop()[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(p||h!==this.errors.length)for(;n&&n.length||r&&r.length;){var v=n&&n.length?""+n.pop():null,m=r&&r.length?""+r.pop():null;p&&(p=p.prefixWith(v,m)),this.prefixErrors(h,v,m)}return null!==u?this.scannedFrozenValidationErrors[a][u]=this.errors.slice(s):null!==d&&(e[this.validationErrorsKey][d]=this.errors.slice(s)),this.handleError(p)},p.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(g.FORMAT_CUSTOM,{message:n},"","/format",null,e,t):n&&"object"==typeof n?this.createError(g.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||"",n.schemaPath||"/format",null,e,t):null},p.prototype.validateDefinedKeywords=function(e,t,n){for(var r in this.definedKeywords)if(void 0!==t[r])for(var i=this.definedKeywords[r],o=0;o<i.length;o++){var a=i[o],s=a(e,t[r],t,n);if("string"==typeof s||"number"==typeof s)return this.createError(g.KEYWORD_CUSTOM,{key:r,message:s},"","",null,e,t).prefixWith(null,r);if(s&&"object"==typeof s){var u=s.code;if("string"==typeof u){if(!g[u])throw new Error("Undefined error code (use defineError): "+u);u=g[u]}else"number"!=typeof u&&(u=g.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:r,message:s.message||"?"},d=s.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(u,c,s.dataPath||null,d,null,e,t)}}return null},p.prototype.validateBasic=function(e,t,n){var r;return(r=this.validateType(e,t,n))?r.prefixWith(null,"type"):(r=this.validateEnum(e,t,n))?r.prefixWith(null,"type"):null},p.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var r=t.type;Array.isArray(r)||(r=[r]);for(var i=0;i<r.length;i++){var o=r[i];if(o===n||"integer"===o&&"number"===n&&e%1==0)return null}return this.createError(g.INVALID_TYPE,{type:n,expected:r.join("/")},"","",null,e,t)},p.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var n=0;n<t.enum.length;n++){if(r(e,t.enum[n]))return null}return this.createError(g.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},p.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||this.validateNaN(e,t,n)||null};var v=Math.pow(2,-51),m=1-v;p.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;if(void 0===n)return null;if("number"==typeof e){var r=e/n%1;if(r>=v&&r<m)return this.createError(g.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n},"","",null,e,t)}return null},p.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(g.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(g.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(g.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(g.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},p.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(g.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},p.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},p.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(g.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(g.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},p.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var n;if(t.pattern instanceof RegExp)n=t.pattern;else{var r,i="",o=t.pattern.match(/^\/(.+)\/([img]*)$/);o?(r=o[1],i=o[2]):r=t.pattern,n=new RegExp(r,i)}return n.test(e)?null:this.createError(g.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},p.prototype.validateArray=function(e,t,n){return Array.isArray(e)?this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n)||null:null},p.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(g.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(n))?n:void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(g.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(n))?n:null},p.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(r(e[n],e[i])){var o=this.createError(g.ARRAY_UNIQUE,{match1:n,match2:i},"","/uniqueItems",null,e,t);if(this.handleError(o))return o}return null},p.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var r,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(r=this.validateAll(e[i],t.items[i],[i],["items",i],n+"/"+i))return r}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(r=this.createError(g.ARRAY_ADDITIONAL_ITEMS,{},"/"+i,"/additionalItems",null,e,t),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],n+"/"+i))return r}else for(i=0;i<e.length;i++)if(r=this.validateAll(e[i],t.items,[i],["items"],n+"/"+i))return r;return null},p.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},p.prototype.validateObjectMinMaxProperties=function(e,t){var n,r=Object.keys(e);return void 0!==t.minProperties&&r.length<t.minProperties&&(n=this.createError(g.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(n))?n:void 0!==t.maxProperties&&r.length>t.maxProperties&&(n=this.createError(g.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(n))?n:null},p.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var r=t.required[n];if(void 0===e[r]){var i=this.createError(g.OBJECT_REQUIRED,{key:r},"","/required/"+n,null,e,t);if(this.handleError(i))return i}}return null},p.prototype.validateObjectProperties=function(e,t,n){var r;for(var i in e){var o=n+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(a=!0,r=this.validateAll(e[i],t.properties[i],[i],["properties",i],o)))return r;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var u=new RegExp(s);if(u.test(i)&&(a=!0,r=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],o)))return r}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(r=this.createError(g.OBJECT_ADDITIONAL_PROPERTIES,{key:i},"","/additionalProperties",null,e,t).prefixWith(i,null),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],o))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},p.prototype.validateObjectDependencies=function(e,t,n){var r;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i];if("string"==typeof o){if(void 0===e[o]&&(r=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:i,missing:o},"","",null,e,t).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(o))for(var a=0;a<o.length;a++){var s=o[a];if(void 0===e[s]&&(r=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:i,missing:s},"","/"+a,null,e,t).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(e,o,[],["dependencies",i],n))return r}return null},p.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},p.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var r,i=0;i<t.allOf.length;i++){var o=t.allOf[i];if(r=this.validateAll(e,o,[],["allOf",i],n))return r}return null},p.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var r,i,o=[],a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[u],d=this.errors.length,l=this.validateAll(e,c,[],["anyOf",u],n);if(null===l&&d===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var f in this.knownPropertyPaths)i[f]=!0,delete r[f];for(var h in this.unknownPropertyPaths)i[h]||(r[h]=!0);s=!1;continue}return null}l&&o.push(l.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),s?(o=o.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(g.ANY_OF_MISSING,{},"","/anyOf",o,e,t)):void 0},p.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var r,i,o=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[u],d=this.errors.length,l=this.validateAll(e,c,[],["oneOf",u],n);if(null===l&&d===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MULTIPLE,{index1:o,index2:u},"","/oneOf",null,e,t);if(o=u,this.trackUnknownProperties){for(var f in this.knownPropertyPaths)i[f]=!0,delete r[f];for(var h in this.unknownPropertyPaths)i[h]||(r[h]=!0)}}else l&&a.push(l)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===o?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MISSING,{},"","/oneOf",a,e,t)):(this.errors=this.errors.slice(0,s),null)},p.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var r,i,o=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,n),s=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===a&&0===s.length?this.createError(g.NOT_PASSED,{},"","/not",null,e,t):null},p.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var i,o=0;o<t.links.length;o++){var a=t.links[o];if("describedby"===a.rel){for(var s=new n(a.href),u=!0,c=0;c<s.varNames.length;c++)if(!(s.varNames[c]in e)){u=!1;break}if(u){var d=s.fillFromObject(e),l={$ref:d};if(i=this.validateAll(e,l,[],["links",o],r))return i}}}};var g={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},_={};for(var y in g)_[g[y]]=y;var b={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ValidationError",c.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var w={},$=l();return $.addLanguage("en-gb",b),$.tv4=$,$})},function(e,t,n){"use strict";function r(){var e=Array.prototype.slice.call(arguments);return e.push(v.a),m.e.apply(this,e)}function i(){var e=Array.prototype.slice.call(arguments);return e.push(v.a),_.b.apply(this,e)}function o(){var e=Array.prototype.slice.call(arguments);return e.push(v.a),g.a.apply(this,e)}function a(){return o.apply(this,arguments)}function s(){var e=Array.prototype.slice.call(arguments);return e.push(v.a),y.a.apply(this,e)}function u(){return s.apply(this,arguments)}function c(e){b.b.call(this,e,v.a)}function d(e){b.b.call(this,e,v.a)}function l(e){b.b.call(this,e,v.a)}function f(e){return h(e,v.a)}function h(e,t){if(!t.countries[e])throw new Error('Unknown country: "'+e+'"');return Object(w.o)(t.countries[e])}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=r,t.format=i,t.getNumberType=o,t.get_number_type=a,t.isValidNumber=s,t.is_valid_number=u,t.AsYouType=c,t.as_you_type=d,t.asYouType=l,t.getPhoneCode=f,t.getPhoneCodeCustom=h;var p=n(595),v=n.n(p),m=n(75),g=n(130),_=n(129),y=n(304),b=n(305),w=n(76);n.d(t,"parseCustom",function(){return m.e}),n.d(t,"DIGITS",function(){return m.a}),n.d(t,"formatCustom",function(){return _.b}),n.d(t,"isValidNumberCustom",function(){return y.a}),n.d(t,"getNumberTypeCustom",function(){return g.a}),n.d(t,"AsYouTypeCustom",function(){return b.b}),n.d(t,"asYouTypeCustom",function(){return b.b}),n.d(t,"DIGIT_PLACEHOLDER",function(){return b.a}),c.prototype=Object.create(b.b.prototype,{}),c.prototype.constructor=c,d.prototype=Object.create(b.b.prototype,{}),d.prototype.constructor=d,l.prototype=Object.create(b.b.prototype,{}),l.prototype.constructor=l},function(e,t,n){"use strict";function r(e,t,n){var r=Object(i.b)(e,t,n),a=r.input,s=r.metadata;if(!a)return!1;if(!a.country)return!1;var u=s.countries[a.country];return!(Object(o.z)(u)&&!Object(i.a)(a,s))}t.a=r;var i=(n(75),n(130)),o=n(76)},function(e,t,n){"use strict";function r(e,t){for(var n=e.slice(0,t),r=i("(",n),o=i(")",n),a=r-o;a>0&&t<e.length;)")"===e[t]&&a--,t++;return e.slice(0,t)}function i(e,t){var n=0,r=!0,i=!1,o=void 0;try{for(var a,u=s()(t);!(r=(a=u.next()).done);r=!0){a.value===e&&n++}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}function o(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}n.d(t,"a",function(){return _});var a=n(127),s=n.n(a),u=n(13),c=n.n(u),d=n(21),l=n.n(d),f=n(76),h=n(75),p=n(129),v=n(128),m=new RegExp("9","g"),g=o("9",15),_="x",y=new RegExp(_),b=new RegExp(_,"g"),w=/\[([^\[\]])*\]/g,$=/\d(?=[^,}][^,}])/g,E=new RegExp("^["+h.d+"]*(\\$\\d["+h.d+"]*)+$"),S="["+h.b+"]{0,1}["+h.d+h.c+"]*",O=new RegExp("^"+S+"$","i"),A=function(){function e(t,n){if(c()(this,e),!n||!n.countries)throw new Error("Metadata is required");t&&n.countries[t]&&(this.default_country=t),this.metadata=n,this.reset()}return l()(e,[{key:"input",value:function(e){var t=Object(h.f)(e);return t||e&&e.indexOf("+")>=0&&(t="+"),Object(v.a)(t,O)?this.process_input(Object(h.i)(t)):this.current_output}},{key:"process_input",value:function(e){if("+"===e[0]&&(this.parsed_input||(this.parsed_input+="+",this.reset_countriness()),e=e.slice(1)),this.parsed_input+=e,this.national_number+=e,this.is_international())if(this.country_phone_code)this.country||this.determine_the_country();else{if(!this.extract_country_phone_code())return this.parsed_input;this.initialize_phone_number_formats_for_this_country_phone_code(),this.reset_format(),this.determine_the_country()}else{var t=this.national_prefix;this.national_number=this.national_prefix+this.national_number,this.extract_national_prefix(),this.national_prefix!==t&&(this.matching_formats=this.available_formats,this.reset_format())}if(!this.should_format())return this.format_as_non_formatted_number();this.match_formats_by_leading_digits();var n=this.format_national_phone_number(e);return n?this.full_phone_number(n):this.parsed_input}},{key:"format_as_non_formatted_number",value:function(){return this.is_international()&&this.country_phone_code?this.national_number?(this.template=_+o(_,this.country_phone_code.length)+" "+o(_,this.national_number.length),"+"+this.country_phone_code+" "+this.national_number):"+"+this.country_phone_code:this.parsed_input}},{key:"format_national_phone_number",value:function(e){var t=void 0;this.chosen_format&&(t=this.format_next_national_number_digits(e));var n=this.attempt_to_format_complete_phone_number();return n||(this.choose_another_format()?this.reformat_national_number():t)}},{key:"reset",value:function(){return this.parsed_input="",this.current_output="",this.national_prefix="",this.national_number="",this.reset_countriness(),this.reset_format(),this}},{key:"reset_country",value:function(){this.default_country&&!this.is_international()?this.country=this.default_country:this.country=void 0}},{key:"reset_countriness",value:function(){this.reset_country(),this.default_country&&!this.is_international()?(this.country_metadata=this.metadata.countries[this.default_country],this.country_phone_code=Object(f.o)(this.country_metadata),this.initialize_phone_number_formats_for_this_country_phone_code()):(this.country_metadata=void 0,this.country_phone_code=void 0,this.available_formats=[],this.matching_formats=this.available_formats)}},{key:"reset_format",value:function(){this.chosen_format=void 0,this.template=void 0,this.partially_populated_template=void 0,this.last_match_position=-1}},{key:"reformat_national_number",value:function(){return this.format_next_national_number_digits(this.national_number)}},{key:"initialize_phone_number_formats_for_this_country_phone_code",value:function(){this.available_formats=Object(f.i)(this.country_metadata).filter(function(e){return E.test(Object(f.b)(e))}),this.matching_formats=this.available_formats}},{key:"match_formats_by_leading_digits",value:function(){var e=this.national_number,t=e.length-3;t<0&&(t=0),this.matching_formats=this.matching_formats.filter(function(n){var r=Object(f.c)(n).length;if(0===r)return!0;var i=Math.min(t,r-1),o=Object(f.c)(n)[i];return new RegExp("^("+o+")").test(e)}),this.chosen_format&&-1===this.matching_formats.indexOf(this.chosen_format)&&this.reset_format()}},{key:"should_format",value:function(){return this.national_number>=3}},{key:"attempt_to_format_complete_phone_number",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=s()(this.matching_formats);!(e=(r=i.next()).done);e=!0){var o=r.value;if(new RegExp("^(?:"+Object(f.g)(o)+")$").test(this.national_number)&&this.validate_format(o)){this.reset_format(),this.chosen_format=o;var a=Object(p.c)(this.national_number,o,this.is_international(),this.national_prefix.length>0,this.country_metadata);if(this.create_formatting_template(o))this.reformat_national_number();else{var u=this.full_phone_number(a);this.template=u.replace(/[\d\+]/g,_),this.partially_populated_template=u}return a}}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"full_phone_number",value:function(e){return this.is_international()?"+"+this.country_phone_code+" "+e:e}},{key:"extract_country_phone_code",value:function(){if(this.national_number){var e=Object(h.j)(this.parsed_input,this.metadata),t=e.country_phone_code,n=e.number;if(t)return this.country_phone_code=t,this.national_number=n,this.country_metadata=Object(f.k)(t,this.metadata)}}},{key:"extract_national_prefix",value:function(){if(this.national_prefix="",this.country_metadata){var e=Object(h.k)(this.national_number,this.country_metadata);return e!==this.national_number&&(this.national_prefix=this.national_number.slice(0,this.national_number.length-e.length),this.national_number=e),this.national_prefix}}},{key:"choose_another_format",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=s()(this.matching_formats);!(e=(r=i.next()).done);e=!0){var o=r.value;if(this.chosen_format===o)return;if(this.validate_format(o)&&this.create_formatting_template(o))return this.chosen_format=o,this.last_match_position=-1,!0}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.reset_country(),this.reset_format()}},{key:"validate_format",value:function(e){if(this.is_international()||this.national_prefix||!Object(f.e)(e,this.country_metadata))return!0}},{key:"create_formatting_template",value:function(e){if(!(Object(f.g)(e).indexOf("|")>=0)){var t=this.get_template_for_phone_number_format_pattern(e);if(t)return this.partially_populated_template=t,this.is_international()?this.template=_+o(_,this.country_phone_code.length)+" "+t:this.template=t.replace(/\d/g,_),this.template}}},{key:"get_template_for_phone_number_format_pattern",value:function(e){var t=Object(f.d)(e,this.country_metadata),n=Object(f.g)(e).replace(w,"\\d").replace($,"\\d"),r=g.match(n)[0];if(!(this.national_number.length>r.length)){var i=this.get_format_format(e,t),o=new RegExp("^"+n+"$"),a=this.national_number.replace(/\d/g,"9");return o.test(a)&&(r=a),r.replace(new RegExp(n),i).replace(m,_)}}},{key:"format_next_national_number_digits",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=s()(e);!(t=(o=a.next()).done);t=!0){var u=o.value;if(-1===this.partially_populated_template.slice(this.last_match_position+1).search(y))return this.chosen_format=void 0,this.template=void 0,void(this.partially_populated_template=void 0);this.last_match_position=this.partially_populated_template.search(y),this.partially_populated_template=this.partially_populated_template.replace(y,u)}}catch(e){n=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}return r(this.partially_populated_template,this.last_match_position+1).replace(b," ")}},{key:"is_international",value:function(){return this.parsed_input&&"+"===this.parsed_input[0]}},{key:"get_format_format",value:function(e,t){var n=this.is_international()?Object(f.b)(e):Object(f.a)(e);return t&&(!this.national_prefix&&Object(f.h)(t)||(n=n.replace(p.a,t))),this.is_international()?Object(p.d)(n):n}},{key:"determine_the_country",value:function(){this.country=Object(h.g)(this.country_phone_code,this.national_number,this.metadata)}}]),e}();t.b=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={"@type":"UserSignupRequest",applicationKey:e.applicationKey,carrierName:e.carrier,deviceId:u.default.uniqueId,countryCode:e.countryCode,phoneNumber:e.phone};t.deviceInformation={hardwareIdentifier:u.default.hardwareId,osIdentifier:u.default.osId,uniqueIdentifier:u.default.uniqueId,platformIdentifier:u.default.platformId,language:u.default.language,timezone:u.default.timezone};var n=(0,d.default)(e.applicationVersion);return t.deviceInformation.application=Object.assign({applicationKey:e.applicationKey,identifier:e.applicationIdentifier},n),t}function o(e){var t={"@type":"UserSignupRequestV2",applicationKey:e.applicationKey,carrierIdentifier:e.carrier};t.mobileDevice={hardwareIdentifier:u.default.hardwareId,osIdentifier:u.default.osId,uniqueIdentifier:u.default.uniqueId,platformIdentifier:u.default.platformId,language:u.default.language,timezone:u.default.timezone};var n=(0,d.default)(e.applicationVersion);return t.mobileDevice.application=Object.assign({identifier:e.applicationIdentifier},n),t}function a(e,t){var n={"@type":"UserLoginRequest",carrierName:t.carrier,username:e,deviceId:u.default.uniqueId,deviceInformation:{hardwareIdentifier:u.default.hardwareId,osIdentifier:u.default.osId,uniqueIdentifier:u.default.uniqueId,platformIdentifier:u.default.platformId,language:u.default.language,timezone:u.default.timezone}},r=(0,d.default)(t.applicationVersion);return n.deviceInformation.application=Object.assign({applicationKey:t.applicationKey,identifier:t.applicationIdentifier},r),n}Object.defineProperty(t,"__esModule",{value:!0});var s=n(46),u=r(s),c=n(307),d=r(c);t.default={userSignup:i,userSignupV2:o,login:a},e.exports=t.default},function(e,t,n){"use strict";function r(e){(0,a.default)("version",e,function(e){return/^\d+(\.\d+){0,2}$/.test(e)},"`version` is not in correct format.");var t=e.split("."),n=i(t,3),r=n[0],o=n[1],s=void 0===o?0:o,u=n[2],c=void 0===u?0:u;return{versionMajor:parseInt(r,10),versionMinor:parseInt(s,10),versionPatch:parseInt(c,10)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=r;var o=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return 100*Date.now()+Math.floor(100*Math.random())}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),c=r(u),d=n(55),l=r(d),f=n(12),h=r(f),p=n(10),v=n(11),m=n(0),g=function(){function e(t){i(this,e),(0,c.default)(this),this._tabMgr=t,this._requests={},this._pendingRequests={},this._setupTabEventListeners(),this._electMaster()}return s(e,[{key:"broadcast",value:function(e){this._tabMgr.broadcastMessage(e)}},{key:"unicast",value:function(e,t){if((0,p.isString)(t)||(t=this.getMasterId()),t===this.getId())return void this.emit(v.MESSAGE_RECEIVED,{message:e});this._tabMgr.broadcastMessage(e,t)}},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){var s=t;(0,p.isString)(t)||(s=n.getMasterId(),t=null);var u=o();if(n._requests[u]={target:t,message:e,respond:function(e){r(e.message)},reject:i},s===n.getId())return void n.emit(v.REQUEST_RECEIVED,{requestId:u,message:e});var c=a({},e,{__rid:u});n._tabMgr.broadcastMessage(c,s)})}},{key:"respond",value:function(e,t){if(this._requests[e])return this._requests[e].respond({message:t}),void delete this._requests[e];if(!this._pendingRequests[e])throw new m.NotFoundError("request does not exist");var n=this._pendingRequests[e].sender;delete this._pendingRequests[e];var r=a({},t,{__rid:e});this._tabMgr.broadcastMessage(r,n)}},{key:"getParticipants",value:function(){return this._tabMgr.getParticipants()}},{key:"getMasterId",value:function(){return this._masterId}},{key:"isActive",value:function(){return this.getMasterId()===this.getId()}},{key:"getId",value:function(){return this._tabMgr.getId()}},{key:"deinit",value:function(){this._tabMgrEventHandlers.reset()}},{key:"_setupTabEventListeners",value:function(){this._tabMgrEventHandlers=new h.default(this._tabMgr),this._tabMgrEventHandlers.add(v.PEER_JOINED,this._handlePeerJoined.bind(this)),this._tabMgrEventHandlers.add(v.PEER_LEFT,this._handlePeerLeft.bind(this)),this._tabMgrEventHandlers.add(v.MESSAGE_RECEIVED,this._handleMessage.bind(this))}},{key:"_electMaster",value:function(){var e=void 0;this.getParticipants().forEach(function(t){var n=t.group,r=t.id;"normal"===n&&(!e||r<e)&&(e=r)}),this._masterId=e}},{key:"_handleMessage",value:function(e){var t=e.origin,n=e.data;if(t!==this.getId()){if(!n.__rid)return void this.emit(v.MESSAGE_RECEIVED,{sender:t,message:n});var r=n.__rid,i=(0,l.default)(n,["__rid"]),o=this._requests[r];if(o)return delete this._requests[r],void o.respond({sender:t,message:i});this._pendingRequests[r]={sender:t,message:i},this.emit(v.REQUEST_RECEIVED,{requestId:r,sender:t,message:i})}}},{key:"_handlePeerJoined",value:function(e){this.emit(v.PEER_JOINED,e)}},{key:"_handlePeerLeft",value:function(e){var t=e.id;t===this.getMasterId()&&(this._electMaster(),this._handleRequestsOnMasterClosed(t),this.isActive()&&this.emit(v.MODE_CHANGED,v.MODE_ACTIVE)),this.emit(v.PEER_LEFT,e)}},{key:"_handleRequestsOnMasterClosed",value:function(e){var t=this,n=Object.keys(this._requests);0!==n.length&&n.forEach(function(n){var r=t._requests[n],i=r.message,o=r.target,s=r.reject;if(o===e)return delete t._requests[n],void s(new m.InvalidOperationError("request target goes offline"));if(null===o){var u=t.getMasterId();if(t._requests[n].target=u,u===t.getId())return void t.emit(v.REQUEST_RECEIVED,{requestId:n,message:i});var c=a({},i,{__rid:n});t._tabMgr.broadcastMessage(c,u)}})}}]),e}();g.MESSAGE_RECEIVED=v.MESSAGE_RECEIVED,g.MODE_CHANGED=v.MODE_CHANGED,g.PEER_JOINED=v.PEER_JOINED,g.PEER_LEFT=v.PEER_LEFT,t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){try{return a.pd.xml(o.default.serializeToString(e))}catch(t){return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(610),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(611);e.exports=t.default},function(e,t,n){function r(e,t){return(s(e)?i:o)(e,a(t,3))}var i=n(239),o=n(614),a=n(27),s=n(2);e.exports=r},function(e,t,n){function r(e,t,n){function r(t){var n=_,r=y;return _=y=void 0,S=t,w=e.apply(r,n)}function d(e){return S=e,$=setTimeout(h,t),O?r(e):w}function l(e){var n=e-E,r=e-S,i=t-n;return A?c(i,b-r):i}function f(e){var n=e-E,r=e-S;return void 0===E||n>=t||n<0||A&&r>=b}function h(){var e=o();if(f(e))return p(e);$=setTimeout(h,l(e))}function p(e){return $=void 0,M&&_?r(e):(_=y=void 0,w)}function v(){void 0!==$&&clearTimeout($),S=0,_=E=y=$=void 0}function m(){return void 0===$?w:p(o())}function g(){var e=o(),n=f(e);if(_=arguments,y=this,E=e,n){if(void 0===$)return d(E);if(A)return $=setTimeout(h,t),r(E)}return void 0===$&&($=setTimeout(h,t)),w}var _,y,b,w,$,E,S=0,O=!1,A=!1,M=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(n)&&(O=!!n.leading,A="maxWait"in n,b=A?u(a(n.maxWait)||0,t):b,M="trailing"in n?!!n.trailing:M),g.cancel=v,g.flush=m,g}var i=n(9),o=n(629),a=n(174),s="Expected a function",u=Math.max,c=Math.min;e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INCOMING="in",t.OUTGOING="out",t.REMOVE="remove",t.NONE="none"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function s(e){try{return e()}catch(e){return null}}function u(e,t){Q.setItem(e,t)}function c(e){return Q.getItem(e)}function d(){Q.removeItem(J.USER_INFO)}function l(e,t){var n=(0,N.encrypt)(JSON.stringify(e),t);u(J.USER_INFO,n)}function f(){try{var e=c(J.USER_INFO),t=(0,H.getUserTokenFromStorage)();return JSON.parse((0,N.decrypt)(e,t))}catch(e){throw new Y.InvalidOperationError("No signed up user, cannot update profile.",e)}}function h(e,t,n,r){var i=t.language,o=(0,L.userSignupV2)(e),a={nonVerifiedMode:!0,validationType:"PASSIVE"},s={userSelectedLanguage:i,developerKey:e.developerKey};if(!n)return s=Object.assign(s,a),Object.assign({},o,s);var u=n.identifierType,c=n.identifier,d=n.countryCode;if("PHONE_NUMBER"===u&&!(0,z.isValidPhoneNumber)(c,d))throw new Y.ValidationError("The provided mobile phone number is invalid.");return(0,S.default)(r)&&(a.nonVerifiedMode=!1,a.validationRequestId=r.requestId,a.validationCode=r.code,a.validationType="VERIFICATION_SDK"),s=Object.assign(s,a,{userIdentity:n}),Object.assign({},o,s)}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(){var e=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=n(5),_=r(g),y=n(302),b=r(y),w=n(639),$=r(w),E=n(64),S=r(E),O=n(3),A=r(O),M=n(12),x=r(M),T=n(59),I=r(T),C=n(46),R=r(C),N=n(47),k=n(134),P=n(35),j=r(P),D=n(4),L=n(306),U=n(642),F=n(643),q=n(31),B=n(132),H=n(133),z=n(40),G=n(11),V=n(148),J=n(14),K=n(285),Y=n(0),W=D.LoggerFactory.getInstance().getLogger("core/AccountManager"),X=[K.UPDATE_PROFILE,K.SIGN_OUT,K.GET_PROFILE],Q=(0,j.default)(localStorage),Z=function(){function e(t,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};o(this,e),(0,_.default)(this),Array.isArray(s.signUpServers)?this._signUpServers=s.signUpServers:this._signUpServers=[s.signUpServers],this._signUpServers.forEach(function(e){(0,A.default)("serverUrl",e,z.isValidBaseUrl,"Invalid sign up server url.")}),this._pm=t,this._userService=n,this._configuration=r,this._connection=i,this._appMeta=a,this._manageToken=s.manageToken,this._maxServerRetries=s.maxServerRetries,this._setupPeerEventHandlers(),this._setupServiceEventHandlers()}return v(e,[{key:"_setupPeerEventHandlers",value:function(){var e=this;this._peerEventHandler=new x.default(this._pm),this._peerEventHandler.add(G.MESSAGE_RECEIVED,function(t){var n=t.message,r=n.event,i=n.payload;r===V.USER_PROFILE_UPDATED&&e.emit(V.USER_PROFILE_UPDATED,i)}),this._peerEventHandler.add(G.REQUEST_RECEIVED,function(){var t=a(regeneratorRuntime.mark(function t(n){var r,o,a,s,u,c=n.requestId,d=n.message;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=d.command,o=d.args,a=void 0===o?[]:o,X.includes(r)){t.next=3;break}return t.abrupt("return");case 3:return s=r.split(":")[1],t.prev=4,t.next=7,e[s].apply(e,i(a));case 7:u=t.sent,e._pm.respond(c,{payload:u,event:r+":success"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),e._pm.respond(c,{event:r+":failure",error:(0,q.serializeError)(t.t0)});case 14:case"end":return t.stop()}},t,e,[[4,11]])}));return function(e){return t.apply(this,arguments)}}())}},{key:"_setupServiceEventHandlers",value:function(){var e=this;this._serviceEventHandler=new x.default(this._userService),this._serviceEventHandler.add(V.PROFILE_UPDATED_NOTIFICATION_RECEIVED,a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._userService.getProfile(e._appMeta.applicationKey);case 3:n=t.sent,e.emit(V.USER_PROFILE_UPDATED,n),e._pm.broadcast({event:V.USER_PROFILE_UPDATED,payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),W.warn("Fetch profile after receiving profile update push, but failed.",t.t0.message);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))),this._serviceEventHandler.add(V.SSO_TOKEN_UPDATED,function(){var t=a(regeneratorRuntime.mark(function t(n){var r,i,o,a=n.token;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:r=e.sent,i=(0,H.getUserTokenFromStorage)(),o=p({},r,{ssoToken:a}),l(o,i);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"signUp",value:function(e,t,n){var r=this;return Promise.resolve().then(function(){var i=h(r._appMeta,e,t,n);return r._doSignUp(i).then(function(e){var t=(0,N.generateKey)(e.deviceSecret),n={username:e.username,carrier:e.carrierName,maaiiId:e.maaiiId,password:e.password,deviceSecret:e.deviceSecret,ssoToken:e.ssoToken},i=(0,N.encrypt)(JSON.stringify(n),t),o=e.provisionalInformation.attributes,a=(0,N.encrypt)(JSON.stringify(e.provisionalInformation.allocations),t);return r._manageToken&&(0,H.saveUserTokenToStorage)(t),u(J.USER_INFO,i),u(J.ALLOCATIONS,a),(0,k.forEach)(o,function(e,t){r._configuration.set(t,e)}),{jid:e.username+"@"+e.carrierName,token:t}})})}},{key:"_doSignUp",value:function(e){var t=this,n=function(n){return t._userService.signUp(n,e)},r=function(e){return e instanceof Y.TimeoutError},i={maxRetries:this._maxServerRetries,retryPredicate:r};return(0,F.requestWithFallback)(this._signUpServers,n,i)}},{key:"updateProfile",value:function(e){return this._pm.isActive()?this._doUpdateProfile(e):(0,B.delegateToActiveTab)(this._pm,K.UPDATE_PROFILE,e)}},{key:"_doUpdateProfile",value:function(e){var t=this,n={},r=[];return m().then(function(i){if(n.deviceId=R.default.uniqueId,n.applicationKey=t._appMeta.applicationKey,n.username=i.username,n.carrierName=i.carrier,(0,$.default)(e,function(e,t){r.push({name:"com.maaii.user.profile."+t,value:e})}),n.userProfile=r,!b.default.validate(n,U.UpdateProfileRequestSchema))throw new Y.ArgumentError("Invalid param: "+b.default.error.message);return t._userService.updateProfile(n)}).then(function(e){if(!b.default.validate(e,U.UpdateProfileResponseSchema))throw new Y.UnexpectedResponseError("Unexpected response: "+b.default.error.message)})}},{key:"getProfile",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pm.isActive()){e.next=2;break}return e.abrupt("return",this._userService.getProfile(this._appMeta.applicationKey));case 2:return e.abrupt("return",(0,B.delegateToActiveTab)(this._pm,K.GET_PROFILE));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"signOut",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._pm.isActive()){e.next=4;break}return e.next=3,(0,B.delegateToActiveTab)(this._pm,K.SIGN_OUT);case 3:return e.abrupt("return");case 4:return t=R.default.uniqueId,this._userService.deactivateDevice(t),e.next=8,(0,I.default)(101);case 8:return e.prev=8,e.next=11,this._connection.disconnect();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),W.warn("Already disconnected from server.",e.t0.message);case 16:(0,H.removeUserTokenFromStorage)(),d();case 18:case"end":return e.stop()}},e,this,[[8,13]])}));return e}()},{key:"getJid",value:function(){return s(function(){var e=f();return e.username+"@"+e.carrier+"/"+R.default.uniqueId})}},{key:"getPassword",value:function(){return s(function(){return f().password})}},{key:"getSsoToken",value:function(){return s(function(){return f().ssoToken})}},{key:"deinit",value:function(){this._peerEventHandler.reset(),this._serviceEventHandler.reset(),this._userService=null,this._appMeta=null,this._pm=null,this._connection=null}}]),e}();t.default=Z,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=(0,l.encrypt)(JSON.stringify(e),t);g.setItem(v.APP_CONFIG,n)}function a(e){var t=g.getItem(v.APP_CONFIG);if(null===t)return{};try{return JSON.parse((0,l.decrypt)(t,e))}catch(e){return m.warn("Cannot decrypt previous app-config, reset to empty object.",e),{}}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(126),d=r(c),l=n(47),f=n(35),h=r(f),p=n(4),v=n(14),m=p.LoggerFactory.getInstance().getLogger("core/ConfigurationManager"),g=(0,h.default)(localStorage),_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),(0,d.default)("appMeta",t,["applicationIdentifier","applicationKey","applicationSecret","carrier"]),this._encKey=(0,l.generateKey)(t.applicationSecret);var r=a(this._encKey);o(s({},n,r,t),this._encKey)}return u(e,[{key:"set",value:function(e,t){var n=a(this._encKey);n[e]=t,o(n,this._encKey)}},{key:"get",value:function(e,t){var n=a(this._encKey);return e in n?n[e]:t}}]),e}();t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e){var t=new Map,n=function(e,n){if(t.has(e))throw new P.ConflictError("Cannot register handler for a command twice.");t.set(e,n)};return e.on(N.REQUEST_RECEIVED,function(n){var r=n.requestId,i=n.message,o=i.command,a=i.args,s=void 0===a?[]:a;if(t.has(o)){t.get(o).apply(void 0,u(s)).then(function(t){var n={event:o+":success"};t&&(n.payload=t),e.respond(r,n)}).catch(function(t){e.respond(r,{event:o+":failure",error:(0,j.serializeError)(t)})})}}),{register:n}}function d(e,t){var n=function n(r){return Promise.resolve(t(r)).then(function(t){return t?Promise.resolve(e()).then(n):Promise.resolve()})};return Promise.resolve(e()).then(n)}function l(e){return[].concat(u(e.values()))}function f(e,t,n){return e.slice(t*n,t*(n+1))}function h(e,t,n){return e.length<=t*n}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(5),g=i(m),_=n(1),y=n(57),b=i(y),w=n(3),$=i(w),E=n(126),S=i(E),O=n(37),A=r(O),M=n(14),x=n(316),T=n(202),I=n(317),C=n(318),R=n(644),N=n(11),k=n(4),P=n(0),j=n(31),D=n(132),L=n(41),U=r(L),F=n(40),q=n(34),B=k.LoggerFactory.getInstance().getLogger("user/ContactManager"),H="init",z=function(){function e(t,n,r,i,o){s(this,e),(0,S.default)("config",o,["applicationKey"]),(0,g.default)(this),this._pm=t,this._connection=n,this._contactService=r,this._storage=i,this._applicationKey=o.applicationKey,this._contactList=new Map,this._incomingRequests=new Map,this._outgoingRequests=new Map,this._outdatedContacts=new Map,this._outdatedOutgoingRequests=new Map,this._onlineStatusMap=new Map,this._lastSeenMap={},this._contactVersion="",this._pendingContactRetrievals=[],this._pendingOutgoingRequestRetrievals=[],this._syncStatus=H,this._lastSeenRestoreAction=null,n.getStatus()===A.CONNECTED&&(this._restoreLocalContactList(),this._lastSeenRestoreAction=this._restoreLastSeen()),this._setupEventHandlers(),this._peerCommandHandler=c(this._pm),this._setupPeerEventHandlers()}return v(e,[{key:"getContacts",value:function(e,t){var n=this;return this._hasSyncStarted()||this._syncContactList(),Promise.resolve().then(function(){if((0,$.default)("param",e,F.isPositiveInteger,"Number of items in a page should be a positive integer."),(0,$.default)("param",t,F.isNonNegativeInteger,"Page number should be a non negative integer."),"complete"===n._syncStatus){var r=l(n._contactList);return h(r,e,t)?[]:f(r,e,t)}return"failure"===n._syncStatus&&n._syncContactList(),new Promise(function(r,i){n._pendingContactRetrievals.push({pageSize:e,pageIndex:t,resolve:r,reject:i})})})}},{key:"getContact",value:function(e){var t=this;return this._hasSyncStarted()||this._syncContactList(),Promise.resolve().then(function(){(0,b.default)("param",e,"Missing `jid` param");var n=t._contactList.get(e);return n?n.profile:t._pm.isActive()?t._contactService.queryContact(e,t._applicationKey):t._pm.request({command:R.COMMAND_GET_CONTACT,args:[e]}).then(function(e){var t=e.event,n=e.payload,r=e.error;if(t===R.COMMAND_GET_CONTACT+":success")return n;throw(0,j.deserializeError)(r)})})}},{key:"getFriendRequests",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.FRIEND_REQUESTS_PAGE_SIZE,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.default)("param",o,F.isPositiveInteger,"Number of items in a page should be a positive integer."),(0,$.default)("param",a,F.isNonNegativeInteger,"Page number should be a non negative integer."),this._hasSyncStarted()||this._syncContactList(),t!==C.INCOMING){e.next=6;break}return n=l(this._incomingRequests),e.abrupt("return",f(n,o,a));case 6:if(r=l(this._outgoingRequests),"complete"!==this._syncStatus){e.next=11;break}if(!h(r,o,a)){e.next=10;break}return e.abrupt("return",[]);case 10:return e.abrupt("return",f(r,o,a));case 11:return e.abrupt("return",new Promise(function(e,t){i._pendingOutgoingRequestRetrievals.push({pageSize:o,pageIndex:a,resolve:e,reject:t})}));case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"getFriendRequestsCount",value:function(e){this._hasSyncStarted()||this._syncContactList();var t=this._incomingRequests.size,n=this._outgoingRequests.size;switch(e){case C.INCOMING:return t;case C.OUTGOING:return n;default:return t+n}}},{key:"isFriendOnline",value:function(e){(0,b.default)("param",e,"Missing `jid` param");var t=this._onlineStatusMap.get(e);return!!t&&!!t.size}},{key:"getLastSeen",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,b.default)("param",t,"Missing `jid` param"),!this.isFriendOnline(t)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,this._getCachedLastSeen(t);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n);case 8:if(!this._pm.isActive()){e.next=16;break}return e.next=11,this._contactService.getLastSeen(t);case 11:return r=e.sent,i=Date.now()-1e3*r,this._lastSeenMap[t]=i,this._pm.broadcast({event:"Contact:"+T.LAST_SEEN_UPDATED,payload:o({},t,i)}),e.abrupt("return",i);case 16:return e.abrupt("return",(0,D.delegateToActiveTab)(this._pm,R.COMMAND_GET_LAST_SEEN,t).then(function(e){return a._lastSeenMap[t]=e,e}));case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"addFriend",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.default)("jid",t,q.isNonEmptyString,"Expect JID to be non-empty string"),this._checkSyncComplete(),!this._isCurrentUser(t)){e.next=4;break}throw new P.InvalidOperationError("Attempt to add oneself as friend.");case 4:if(!this._isFriend(t)){e.next=6;break}throw new P.InvalidOperationError("The person with JID '"+t+"' is already a friend.");case 6:if(!this._incomingRequests.has(t)){e.next=8;break}return e.abrupt("return",this.acceptFriendRequest(t));case 8:if(!this._pm.isActive()){e.next=10;break}return e.abrupt("return",this._contactService.addFriend(t,n));case 10:return e.abrupt("return",(0,D.delegateToActiveTab)(this._pm,R.COMMAND_ADD_FRIEND,t,n));case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"deleteFriend",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.default)("jid",t,q.isNonEmptyString,"Expect JID to be non-empty string"),this._checkSyncComplete(),this._isFriend(t)){e.next=4;break}throw new P.InvalidOperationError("The person with JID '"+t+"' is not a friend.");case 4:if(!this._pm.isActive()){e.next=6;break}return e.abrupt("return",this._contactService.deleteFriend(t));case 6:return e.abrupt("return",(0,D.delegateToActiveTab)(this._pm,R.COMMAND_DELETE_FRIEND,t));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptFriendRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.default)("jid",t,q.isNonEmptyString,"Expect JID to be non-empty string"),this._checkSyncComplete(),!this._isFriend(t)){e.next=4;break}throw new P.InvalidOperationError("The person with JID '"+t+"' is already a friend.");case 4:if(!this._pm.isActive()){e.next=6;break}return e.abrupt("return",this._contactService.acceptFriendRequest(t));case 6:return e.abrupt("return",(0,D.delegateToActiveTab)(this._pm,R.COMMAND_ACCEPT_FRIEND_REQUEST,t));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectFriendRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.default)("jid",t,q.isNonEmptyString,"Expect JID to be non-empty string"),this._checkSyncComplete(),!this._isFriend(t)){e.next=4;break}throw new P.InvalidOperationError("The person with JID '"+t+"' is already a friend.");case 4:if(this._incomingRequests.get(t)){e.next=6;break}throw new P.InvalidOperationError("The person with JID '"+t+"' has no incoming friend request.");case 6:if(!this._pm.isActive()){e.next=8;break}return e.abrupt("return",this._contactService.rejectFriendRequest(t));case 8:return e.abrupt("return",(0,D.delegateToActiveTab)(this._pm,R.COMMAND_REJECT_FRIEND_REQUEST,t));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"cancelFriendRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.default)("jid",t,q.isNonEmptyString,"Expect JID to be non-empty string"),this._checkSyncComplete(),!this._isFriend(t)){e.next=4;break}throw new P.InvalidOperationError("The person with JID '"+t+"' is already a friend.");case 4:if(this._outgoingRequests.get(t)){e.next=6;break}throw new P.InvalidOperationError("User has no outgoing friend request for the person with JID '"+t+"'.");case 6:if(!this._pm.isActive()){e.next=8;break}return e.abrupt("return",this._contactService.cancelFriendRequest(t));case 8:return e.abrupt("return",(0,D.delegateToActiveTab)(this._pm,R.COMMAND_CANCEL_FRIEND_REQUEST,t));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"_checkSyncComplete",value:function(){if("complete"!==this._syncStatus)throw new P.InvalidOperationError("Contact list synchronization is not completed yet.")}},{key:"_setupEventHandlers",value:function(){var e=this;this._connection.on(U.STATUS_CHANGED,function(t){var n=t.status,r=t.reconnect;if(n===A.CONNECTED){if(!r)return e._resetState(),e._restoreLocalContactList(),void(e._lastSeenRestoreAction=e._restoreLastSeen());e._syncContactList()}}),this._contactService.on(T.SUBSCRIPTION,function(t){e._handleNewSubscription(t),e._updateContactInfoToStorage(),e._pm.broadcast({event:"Contact:"+T.SUBSCRIPTION,payload:t})}),this._contactService.on(T.PROFILE,function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.profile){t.next=4;break}return t.next=3,e.getContact(n.jid);case 3:n.profile=t.sent;case 4:e._onContactListUpdated(n),e._updateContactInfoToStorage(),e._pm.broadcast({event:"Contact:"+T.CONTACT_LIST_UPDATED,payload:n});case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()),this._contactService.on(T.PRESENCE,function(t){e._onOnlineStatusUpdated(t),"online"!==t.type&&e._storage.setItem(M.LAST_SEEN,e._lastSeenMap),e._pm.broadcast({event:"Contact:"+T.ONLINE_STATUS,payload:t})}),this._contactService.on(T.ERROR,function(t){e._onError(t),e._pm.broadcast({event:"Contact:"+T.ERROR,payload:t})})}},{key:"_setupPeerEventHandlers",value:function(){var e=this;this._peerCommandHandler.register(R.COMMAND_GET_LAST_SEEN,function(){var t=a(regeneratorRuntime.mark(function t(n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._contactService.getLastSeen(n);case 2:return r=t.sent,i=Date.now()-1e3*r,e._lastSeenMap[n]=i,e._storage.setItem(M.LAST_SEEN,e._lastSeenMap),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()),this._peerCommandHandler.register(R.COMMAND_FETCH_CONTACT_LIST,function(t,n){return e._contactService.fetchContactList(t,I.CONTACT_LIST_PAGE_SIZE,n)}),this._peerCommandHandler.register(R.COMMAND_GET_CONTACT,function(t){return e._contactService.queryContact(t,e._applicationKey)}),this._peerCommandHandler.register(R.COMMAND_ADD_FRIEND,function(t,n){return e._contactService.addFriend(t,n)}),this._peerCommandHandler.register(R.COMMAND_DELETE_FRIEND,function(t){return e._contactService.deleteFriend(t)}),this._peerCommandHandler.register(R.COMMAND_ACCEPT_FRIEND_REQUEST,function(t){return e._contactService.acceptFriendRequest(t)}),this._peerCommandHandler.register(R.COMMAND_CANCEL_FRIEND_REQUEST,function(t){return e._contactService.cancelFriendRequest(t)}),this._peerCommandHandler.register(R.COMMAND_REJECT_FRIEND_REQUEST,function(t){return e._contactService.rejectFriendRequest(t)}),this._pm.on(N.MESSAGE_RECEIVED,function(t){var n=t.message;switch(n.event){case"Contact:"+T.CONTACT_LIST_UPDATED:e._onContactListUpdated(n.payload);break;case"Contact:"+T.LAST_SEEN_UPDATED:e._updateLastSeenMap(n.payload);break;case"Contact:"+T.SUBSCRIPTION:e._handleNewSubscription(n.payload);break;case"Contact:"+T.ONLINE_STATUS:e._onOnlineStatusUpdated(n.payload);break;case"Contact:"+T.ERROR:e._onError(n.payload)}})}},{key:"_restoreLastSeen",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._storage.getItem(M.LAST_SEEN);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:this._lastSeenMap=p({},t,this._lastSeenMap),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),B.warn("Last seen cache cannot be recovered",e.t0.message);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return e}()},{key:"_getCachedLastSeen",value:function(){function e(e){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._lastSeenMap[t]){e.next=2;break}return e.abrupt("return",this._lastSeenMap[t]);case 2:if(!this._lastSeenRestoreAction){e.next=5;break}return e.next=5,this._lastSeenRestoreAction;case 5:return e.abrupt("return",this._lastSeenMap[t]);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"_updateLastSeenMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._lastSeenMap=p({},this._lastSeenMap,e)}},{key:"_restoreContactList",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._storage.getItem(M.CONTACT_LIST);case 3:if(t=e.sent){e.next=7;break}return this._syncContactList(),e.abrupt("return");case 7:if(n=t.jid,r=t.version,i=t.contacts,o=t.incomingRequests,a=t.outgoingRequests,n===this._connection.getJid()){e.next=10;break}return e.abrupt("return");case 10:this._contactVersion=r,this._contactList=this._getMapFromContacts(i),this._incomingRequests=this._getMapFromContacts(o),this._outgoingRequests=this._getMapFromContacts(a),this._syncContactList(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),B.warn("Cannot get contact list from storage.",e.t0),this._syncContactList();case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return e}()},{key:"_restoreLocalContactList",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._storage.getItem(M.CONTACT_LIST);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(n=t.jid,r=t.version,i=t.contacts,o=t.incomingRequests,a=t.outgoingRequests,n===this._connection.getJid()){e.next=9;break}return e.abrupt("return");case 9:this._contactVersion=r,this._contactList=this._getMapFromContacts(i),this._incomingRequests=this._getMapFromContacts(o),this._outgoingRequests=this._getMapFromContacts(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),B.warn("Cannot get contact list from storage.",e.t0);case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return e}()},{key:"_syncContactList",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,u,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,n=-1,r=function(){return 0===t},i=0,o=void 0,a=[],s=function e(){return c._fetchContactList(i).then(function(e){n!==i&&(n=i,t=0),o=e.version;var r=c._getCurrentUserBareJid();return e.contacts=e.contacts.filter(function(e){return e.jid!==r}),a=a.concat(e.contacts),c._updateContacts(e.contacts),c._resolveFinishedPendingRetrievals(),i++,e}).catch(function(n){if(!r())throw n;return t++,e()})},u=function(e){return e.contacts.length>=I.CONTACT_LIST_PAGE_SIZE},this._syncStatus="in-progress",this._prepareOutdatedEntities(),e.prev=10,e.next=13,d(s,u);case 13:this._onSyncComplete(o,a),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(10),this._syncStatus="failure",this._rejectPendingRetrievals(e.t0),B.error("Cannot fetch page "+i+" of contact list from server: ",e.t0.message);case 21:case"end":return e.stop()}},e,this,[[10,16]])}));return e}()},{key:"_fetchContactList",value:function(e){return this._pm.isActive()?this._contactService.fetchContactList(this._contactVersion,I.CONTACT_LIST_PAGE_SIZE,e):this._pm.request({command:R.COMMAND_FETCH_CONTACT_LIST,args:[this._contactVersion,e]}).then(function(e){var t=e.event,n=e.payload,r=e.error;if(t===R.COMMAND_FETCH_CONTACT_LIST+":success")return n;throw(0,j.deserializeError)(r)})}},{key:"_updateContacts",value:function(e){var t=this;e.forEach(function(e){t._updateContactListItem(e),t._updateOutgoingRequestItem(e)})}},{key:"_updateContactListItem",value:function(e){var t=e.jid,n=e.direction,r=this._outdatedContacts.get(t);r?(this._outdatedContacts.delete(t),"none"!==n?this._editContact(e):this._removeContact(r)):"none"!==n&&this._addContact(e)}},{key:"_updateOutgoingRequestItem",value:function(e){var t=e.jid,n=e.direction,r=this._outdatedOutgoingRequests.get(t);r?(this._outdatedOutgoingRequests.delete(t),"none"!==n&&this._removeFriendRequest(r)):"none"===n&&this._addFriendRequest(p({},e,{direction:C.OUTGOING}))}},{key:"_addContact",value:function(e){var t=e.jid;this._contactList.has(t)||(this._contactList.set(t,e),this.emit(T.CONTACT_LIST_UPDATED,{change:"add",item:e}))}},{key:"_removeContact",value:function(e){var t=e.jid,n=this._contactList.get(t);n&&(this._contactList.delete(t),this.emit(T.CONTACT_LIST_UPDATED,{change:"remove",item:n}))}},{key:"_editContact",value:function(e){var t=e.jid;this._contactList.has(t)&&(this._contactList.set(t,e),this.emit(T.CONTACT_LIST_UPDATED,{change:"edit",item:e}))}},{key:"_addFriendRequest",value:function(e){var t=e.jid,n=e.direction===C.INCOMING?this._incomingRequests:this._outgoingRequests;n.has(t)||(n.set(t,e),this.emit(T.FRIEND_REQUESTS_UPDATED,{change:"add",item:e}))}},{key:"_removeFriendRequest",value:function(e){var t=e.jid;(e.direction===C.INCOMING?this._incomingRequests:this._outgoingRequests).delete(t)&&this.emit(T.FRIEND_REQUESTS_UPDATED,{change:"remove",item:e})}},{key:"_onSyncComplete",value:function(e,t){t.length>0&&this._clearOutdatedEntities(),this._contactVersion=e,this._resolveAllPendingRetrievals(),this._updateContactInfoToStorage(),this._syncStatus="complete"}},{key:"_updateContactInfoToStorage",value:function(){this._storage.setItem(M.CONTACT_LIST,{jid:this._connection.getJid(),version:this._contactVersion,contacts:l(this._contactList),incomingRequests:l(this._incomingRequests),outgoingRequests:l(this._outgoingRequests)})}},{key:"_prepareOutdatedEntities",value:function(){this._outdatedContacts=new Map(this._contactList),this._outdatedOutgoingRequests=new Map(this._outgoingRequests)}},{key:"_resetOutdatedEntities",value:function(){this._outdatedContacts.clear(),this._outdatedOutgoingRequests.clear()}},{key:"_clearOutdatedEntities",value:function(){this._outdatedContacts.forEach(this._removeContact.bind(this)),this._outdatedOutgoingRequests.forEach(this._removeFriendRequest.bind(this)),this._resetOutdatedEntities()}},{key:"_isSameContactListVersion",value:function(e){return this._contactVersion===e}},{key:"_resolveFinishedPendingRetrievals",value:function(){var e=l(this._contactList),t=l(this._outgoingRequests),n=function(e){return function(t){var n=t.pageSize*t.pageIndex,r=t.pageSize*(t.pageIndex+1);return e.length<r||(t.resolve(e.slice(n,r)),!1)}};this._pendingContactRetrievals=this._pendingContactRetrievals.filter(n(e)),this._pendingOutgoingRequestRetrievals=this._pendingOutgoingRequestRetrievals.filter(n(t))}},{key:"_resolveAllPendingRetrievals",value:function(){var e=l(this._contactList),t=l(this._outgoingRequests),n=function(e){return function(t){var n=t.pageSize*t.pageIndex,r=t.pageSize*(t.pageIndex+1);t.resolve(e.slice(n,r))}};this._pendingContactRetrievals.forEach(n(e)),this._pendingOutgoingRequestRetrievals.forEach(n(t)),this._clearPendingRetrievals()}},{key:"_rejectPendingRetrievals",value:function(e){this._pendingContactRetrievals.forEach(function(t){return t.reject(e)}),this._pendingOutgoingRequestRetrievals.forEach(function(t){return t.reject(e)}),this._clearPendingRetrievals()}},{key:"_clearPendingRetrievals",value:function(){this._pendingContactRetrievals=[],this._pendingOutgoingRequestRetrievals=[]}},{key:"_resetState",value:function(){this._resetOutdatedEntities(),this._contactList.clear(),this._incomingRequests.clear(),this._outgoingRequests.clear(),this._onlineStatusMap.clear(),this._lastSeenMap={},this._contactVersion="",this._pendingContactRetrievals=[],this._pendingOutgoingRequestRetrievals=[],this._syncStatus=H}},{key:"_onOnlineStatusUpdated",value:function(e){var t=e.jid,n=e.type,r=_.Strophe.getBareJidFromJid(t),i=_.Strophe.getResourceFromJid(t),o=this._onlineStatusMap.get(r)||new Set,a=!!o.size;"online"===n?o.add(i):o.delete(i),this._onlineStatusMap.set(r,o);var s=!!o.size;a!==s&&this.emit(T.ONLINE_STATUS,{jid:r,type:s?"online":"offline"}),s||(this._lastSeenMap[r]=Date.now())}},{key:"_onContactListUpdated",value:function(e){var t=e.jid;this._contactList.get(t)?this._editContact(e):this._addContact(e);var n=this._incomingRequests.get(t);if(n)return void this._removeFriendRequest(n);var r=this._outgoingRequests.get(t);r&&this._removeFriendRequest(r)}},{key:"_handleNewSubscription",value:function(e){var t=e.jid,n=e.type;if(!this._isCurrentUser(t)){if("remove"!==n)return this._isBidirectionalSubscription(t,n)?void this._handleBidirectionalSubscription(t):void this._addFriendRequest(p({},e,{direction:n}));this._removeFriendRequest(p({},e,{direction:C.INCOMING})),this._removeFriendRequest(p({},e,{direction:C.OUTGOING})),this._removeContact(e)}}},{key:"_getCurrentUserBareJid",value:function(){return _.Strophe.getBareJidFromJid(this._connection.getJid())}},{key:"_isCurrentUser",value:function(e){return e===this._getCurrentUserBareJid()}},{key:"_isBidirectionalSubscription",value:function(e,t){var n=void 0;return t===x.SubscriptionType.INCOMING?n=this._outgoingRequests:t===x.SubscriptionType.OUTGOING&&(n=this._incomingRequests),n&&n.has(e)}},{key:"_handleBidirectionalSubscription",value:function(e){this.acceptFriendRequest(e).catch(function(e){B.error("Failed to accept friend request triggered by having both incoming and outgoing friend request for the same user: "+e.message,e)})}},{key:"_onError",value:function(e){this.emit(T.ERROR,e)}},{key:"_isFriend",value:function(e){return!!this._contactList.get(e)}},{key:"_getMapFromContacts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.filter(function(t){return t.jid!==e._getCurrentUserBareJid()}).map(function(e){return[e.jid,e]});return new Map(n)}},{key:"_hasSyncStarted",value:function(){return"in-progress"===this._syncStatus||"complete"===this._syncStatus}}]),e}();t.default=z,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(202),o=r(i),a=n(317),s=r(a),u=n(199),c=r(u),d=n(318),l=r(d),f=n(312),h=r(f);t.default={ContactEvent:o,ContactSetting:s,DeviceEvent:c,ContactDirection:l,SubscriptionType:h},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FRIEND_REQUESTS_PAGE_SIZE=20,t.CONTACT_LIST_PAGE_SIZE=50},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INCOMING="in",t.OUTGOING="out"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e){return Date.now()-k>=e}function u(e){return e===M.CONNECTED}function c(e,t){return!!e.find(function(e){var n=e.id;return t===n})}function d(e,t){var n=e.findIndex(function(e){var n=e.id;return t===n});if(-1===n)return e;var r=e.slice(0);return r.splice(n,1),r}function l(e){var t=new Map,n=function(e,n){if(t.has(e))throw new I.ConflictError("Cannot register handler for a command twice.");t.set(e,n)};return e.on(T.REQUEST_RECEIVED,function(n){var r=n.requestId,i=n.message,o=i.command,s=i.args,u=void 0===s?[]:s;if(t.has(o)){t.get(o).apply(void 0,a(u)).then(function(t){var n={event:o+":success"};t&&(n.payload=t),e.respond(r,n)}).catch(function(t){e.respond(r,{event:o+":failure",error:(0,R.serializeError)(t)})})}}),{register:n}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(5),p=i(h),v=n(8),m=i(v),g=n(3),_=i(g),y=n(12),b=i(y),w=n(46),$=n(199),E=r($),S=n(41),O=r(S),A=n(37),M=r(A),x=n(14),T=n(11),I=n(0),C=n(4),R=n(31),N=C.LoggerFactory.getInstance().getLogger("user/DeviceManager"),k=5e3,P=function(){function e(t,n,r,i){o(this,e),(0,p.default)(this),this._pm=t,this._connection=n,this._userService=r,this._storage=i,this._peerCommandHandler=l(this._pm),this._setupEventHandlers(),this._setupPeerEventHandlers(),this._setupDeviceEventHandlers()}return f(e,[{key:"getActiveDeviceList",value:function(){var e=this;return Promise.resolve().then(function(){if(!u(e._connection.getStatus()))throw new I.InvalidOperationError("No active connection to get active device list.");return e._getDeviceListFromStorage().catch(e._fetchActiveDeviceList.bind(e))})}},{key:"kickDevice",value:function(e){var t=this;return Promise.resolve().then(function(){if((0,_.default)("param",e,function(e){return(0,m.default)(e)&&e.length>0},"Kick device action requires non-empty string for device id"),!u(t._connection.getStatus()))throw new I.InvalidOperationError("No active connection to kick device.");return t._delegateKickDevice(e).then(function(){return t._removeDeviceFromStorage(e).then(function(){t.emit(E.DEVICE_LIST_UPDATED)}).catch(function(){t.emit(E.DEVICE_LIST_UPDATED)})})})}},{key:"kickOthers",value:function(){var e=this;return Promise.resolve().then(function(){if(!u(e._connection.getStatus()))throw new I.InvalidOperationError("No active connection to kick all devices.");return e._delegateKickOtherDevices().then(function(){return e._removeOtherDevicesFromStorage().then(function(){e.emit(E.DEVICE_LIST_UPDATED)}).catch(function(){e.emit(E.DEVICE_LIST_UPDATED)})})})}},{key:"_setupEventHandlers",value:function(){var e=this;this._connection.on(O.STATUS_CHANGED,function(t){var n=t.status,r=t.reconnect;u(n)&&!r&&e._removeDeviceListFromStorage()})}},{key:"_setupPeerEventHandlers",value:function(){var e=this;this._peerCommandHandler.register("DeviceManager:fetchActiveDeviceList",function(){return e._userService.fetchActiveDeviceList()}),this._peerCommandHandler.register("DeviceManager:kickDevice",function(t){return e._userService.deactivateDevice(t)}),this._peerCommandHandler.register("DeviceManager:kickOthers",function(t){return e._userService.deactivateAllDevices(t)})}},{key:"_setupDeviceEventHandlers",value:function(){var e=this;new b.default(this._userService).add(E.DEVICE_LIST_RECEIVED,function(){e._removeDeviceListFromStorage(),e.emit(E.DEVICE_LIST_UPDATED)})}},{key:"_fetchActiveDeviceList",value:function(){var e=this;return this._fetchDeviceListDeferred?this._fetchDeviceListDeferred:(this._fetchDeviceListDeferred=this._delegateFetchActiveDeviceList().then(function(t){return e._fetchDeviceListDeferred=null,e._writeDeviceListToStorage(t),t}).catch(function(t){throw e._fetchDeviceListDeferred=null,t}),this._fetchDeviceListDeferred)}},{key:"_delegateFetchActiveDeviceList",value:function(){if(this._pm.isActive())return this._userService.fetchActiveDeviceList();var e={command:"DeviceManager:fetchActiveDeviceList"};return this._pm.request(e).then(function(e){var t=e.event,n=e.payload,r=e.error;if("DeviceManager:fetchActiveDeviceList:failure"===t)throw(0,R.deserializeError)(r);return n})}},{key:"_delegateKickDevice",value:function(e){if(this._pm.isActive())return this._userService.deactivateDevice(e);var t={command:"DeviceManager:kickDevice",args:[e]};return this._pm.request(t).then(function(e){var t=e.event,n=e.error;if("DeviceManager:kickDevice:failure"===t)throw(0,R.deserializeError)(n)})}},{key:"_delegateKickOtherDevices",value:function(){if(this._pm.isActive())return this._userService.deactivateAllDevices(!1);var e={command:"DeviceManager:kickOthers"};return this._pm.request(e).then(function(e){var t=e.event,n=e.error;if("DeviceManager:kickOthers:failure"===t)throw(0,R.deserializeError)(n)})}},{key:"_isValidDeviceListInfo",value:function(e){var t=this._connection.getJid();return e&&e.jid===t&&!s(e.lastUpdatedTime)}},{key:"_removeDeviceFromStorage",value:function(e){var t=this;return this._getDeviceListFromStorage().then(function(n){if(!c(n,e))return void t._removeDeviceListFromStorage();var r=d(n,e);t._writeDeviceListToStorage(r)})}},{key:"_removeOtherDevicesFromStorage",value:function(){var e=this;return this._getDeviceListFromStorage().then(function(t){if(!c(t,w.uniqueId))return void e._removeDeviceListFromStorage();var n=t.filter(function(e){var t=e.id;return w.uniqueId===t});e._writeDeviceListToStorage(n)})}},{key:"_getDeviceListFromStorage",value:function(){var e=this;return this._storage.getItem(x.ACTIVE_DEVICE_LIST).catch(function(e){throw N.warn("Cannot get device list from storage: "+e+"."),e}).then(function(t){if(e._isValidDeviceListInfo(t))return t.devices;throw new Error("The device list info from storage is invalid")})}},{key:"_writeDeviceListToStorage",value:function(e){var t=this._connection.getJid(),n=Date.now();this._storage.setItem(x.ACTIVE_DEVICE_LIST,{jid:t,lastUpdatedTime:n,devices:e})}},{key:"_removeDeviceListFromStorage",value:function(){this._storage.removeItem(x.ACTIVE_DEVICE_LIST)}}]),e}();t.default=P,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return e.name+"-"+Date.now()+Math.random().toString(16).substring(2,6)}function s(e){return e.replace("http:","https:").replace(":80","")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(5),l=i(d),f=n(12),h=i(f),p=n(645),v=i(p),m=n(647),g=i(m),_=n(648),y=i(_),b=n(46),w=i(b),$=n(203),E=r($),S=n(7),O=r(S),A=n(649),M=i(A),x=n(650),T=i(x),I=n(651),C=i(I),R=n(321),N=i(R),k=n(654),P=i(k),j=n(31),D=n(657),L=n(77),U=r(L),F=n(11),q=r(F),B=n(0),H=window.File&&window.FileReader&&window.FileList&&window.Blob,z=function(){function e(t,n,r,i){o(this,e),(0,l.default)(this),this._pm=t,this._connection=n,this._fileService=r,this._applicationIdentifier=i,this._fileEndpoint=new Map,this._uploads=new Map,this._setupPeerEventHandlers()}return c(e,[{key:"shareFile",value:function(e,t){if(!H)return Promise.reject(new B.NotSupportedError("File API not supported. abort"));var n=[];if(O.isBareJid(t)&&n.push(t),n.length<=0){var r=this._connection.getJid();n.push(r)}return this._doShareFile(e,n)}},{key:"uploadAsset",value:function(e,t){return H?this._doUploadAsset(e,t):Promise.reject(new B.NotSupportedError("File API not supported. abort"))}},{key:"cancelUpload",value:function(e){var t=this._uploads.get(e);return!!t&&(t.request.cancel(),t.handler.reset(),this._uploads.delete(e),!0)}},{key:"loadMetadata",value:function(e,t){var n=e.name,r=e.type,i=e.size;return(0,v.default)(e.type,"image/")?(0,M.default)(e).then(function(e){return(0,N.default)(e,t).then(function(t){return(0,g.default)({name:n,type:r,size:i,thumbnail:t.data},(0,D.loadImage)(e))})}):(0,v.default)(e.type,"video/")?(0,T.default)(e).then(function(e){return Promise.all([(0,P.default)(e,t),e])}).then(function(e){var t=u(e,2),o=t[0],a=t[1],s=(0,D.loadVideo)(a);return a.src="",a.load(),(0,g.default)({name:n,type:r,size:i,thumbnail:o.data},s)}):(0,v.default)(e.type,"audio/")?(0,C.default)(e).then(function(e){return{name:n,type:r,size:i,duration:e.duration}}):Promise.resolve({name:n,type:r,size:i})}},{key:"_setupPeerEventHandlers",value:function(){var e=this;this._peerEventHandler=new h.default(this._pm),this._peerEventHandler.add(q.REQUEST_RECEIVED,function(t){var n=t.requestId,r=t.message,i=r.command,o=r.args;if("FileManager:requestUpload"===i){var a=u(o,2),s=a[0],c=a[1];e._requestUpload({name:s},c).then(function(t){e._pm.respond(n,{event:"FileManager:requestUpload:success",payload:Object.assign({file:s,recipients:c},t)})}).catch(function(t){e._pm.respond(n,{event:"FileManager:requestUpload:failure",payload:{file:s,recipients:c},error:{name:t.name,message:t.message}})})}})}},{key:"_setupFileEventHandlers",value:function(e,t){var n=this,r=new h.default(t);return r.add(U.UPLOAD_SUCCESS,function(t){var i=t.fileId,o=t.expires,a=(""+n._fileEndpoint.get(e)+i).replace(/([^:]\/)\/+/g,"$1");n._fileEndpoint.delete(e),r.reset(),n._uploads.delete(e),n.emit(U.UPLOAD_SUCCESS,{token:e,url:a,expires:o})}),r.add(U.UPLOAD_FAILURE,function(t){var i=t.error;r.reset(),n._uploads.delete(e),n.emit(U.UPLOAD_FAILURE,{token:e,error:{message:i.message}})}),r.add(U.UPLOAD_PROGRESS,function(t){n.emit(U.UPLOAD_PROGRESS,Object.assign({token:e},t))}),r.add(U.UPLOAD_CANCEL,function(){n.emit(U.UPLOAD_CANCEL,{token:e})}),r}},{key:"_doShareFile",value:function(e,t){var n=this;return this._doUpload(e,t).then(function(e){var t=e.token,r=e.url;return n._fileEndpoint.set(t,r+"/files/"),t})}},{key:"_doUploadAsset",value:function(e,t){var n=this,r={type:"assets",value:t},i=this._connection.getJid();return this._doUpload(e,[i],r).then(function(e){var r=e.token,i=e.url;return n._fileEndpoint.set(r,i+"/assets/"+t+"/"),r})}},{key:"_doUpload",value:function(e,t,n){var r=this;return this._requestUpload(e,t).then(function(t){var i=t.token,o=t.url,u=r._connection.getJid(),c=s(o),d=new y.default(e,c,{applicationIdentifier:r._applicationIdentifier,deviceId:w.default.uniqueId,jid:u,ssoToken:i,subResource:n}),l=a(e),f=r._setupFileEventHandlers(l,d);return r._uploads.set(l,{request:d,handler:f}),d.upload(),{token:l,url:c}})}},{key:"_requestUpload",value:function(e,t){if(this._pm.isActive())return this._fileService.requestUpload(E.MAAII_FILE_SERVER,t);var n=e.name+"-"+Date.now(),r={command:"FileManager:requestUpload",args:[n,t]};return this._pm.request(r).then(function(e){var t=e.event,n=e.payload,r=e.error;if("FileManager:requestUpload:failure"===t)throw(0,j.deserializeError)(r);return n})}},{key:"deinit",value:function(){this._uploads.forEach(function(e){e.handler.reset()}),this._uploads.clear(),this._peerEventHandler.reset()}}]),e}();t.default=z,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.max,r=t.quality,o=void 0===r?s:r;return new Promise(function(t){n||(n=Math.max(e.width,e.height));var r=(0,a.default)(e.width,e.height,n),s=r.width,u=r.height;t({width:s,height:u,data:(0,i.bicubic)(e,s,u).toDataURL("image/jpeg",o)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(652),o=n(653),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=.5;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(26),u=r(s),c=n(3),d=r(c),l=n(0),f=n(323),h=r(f),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:(0,h.default)()};o(this,e),(0,d.default)("factory.audio",t.audio,u.default,"factory should have `audio` function property"),this.audioFactory=t.audio}return a(e,[{key:"startAudioRecording",value:function(){var e=this;if(this.audioRecorder){if(this.recording)return Promise.reject(new l.InvalidOperationError("Another recording is in progress."))}else try{this.audioRecorder=this.audioFactory()}catch(e){return Promise.reject(e)}return this.audioRecorder.record().then(function(){e.recording=!0})}},{key:"stopAudioRecording",value:function(){var e=this;return this.recording?this.audioRecorder.finish().then(function(t){return e.recording=!1,t}).catch(function(t){throw e.recording=!1,t}):Promise.reject(new l.InvalidOperationError("No active recording."))}},{key:"cancelAudioRecording",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recording){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.audioRecorder.cancel();case 4:this.recording=!1;case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"deinit",value:function(){this.audioFactory=null,this.audioRecorder&&(this.audioRecorder.cancel(),this.audioRecorder=null),this.recording=!1}}]),e}();t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e){for(var t=[],n=0;n<2;++n)t[n]=e.inputBuffer.getChannelData(n);return t}function a(e){window.AudioContext=window.AudioContext||window.webkitAudioContext;var t=new AudioContext(e);return null===t.createScriptProcessor&&(t.createScriptProcessor=t.createJavaScriptNode),t}function s(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lib/Mp3EncoderWorker.js",n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;if(!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||n))return function(){throw new c.NotSupportedError("The getUserMedia API is not implemented on this browser, microphone is not accessible.")};void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){return new Promise(function(t,r){n.call(navigator,e,t,r)})});var s=function(){var t=i(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:if(n=e.sent,r=n.filter(function(e){return"audioinput"===e.kind}),0!==r.length){e.next=8;break}throw new c.NotAvailableError("No microphone is available on this device.");case 8:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),d="function"==typeof t?t:function(){return(0,l.default)(t)},p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.bufferSize,i=t.bitRate;r(this,e),this.bufferSize=n||f,this.bitRate=i||h}return u(e,[{key:"record",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recording){e.next=2;break}throw new c.InvalidOperationError("Recording already in progress");case 2:return this.recording=!0,e.prev=3,e.next=6,s();case 6:return t=void 0,e.prev=7,e.next=10,navigator.mediaDevices.getUserMedia({audio:!0});case 10:t=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(7),new c.ForbiddenError("Microphone access is not allowed.");case 16:this.stream=t,this.deferred=new Promise(function(e){n.stopRecording=e}),this.worker=d(),this.worker.onmessage=function(e){n.stopRecording(e.data.blob),n.worker.terminate(),n.worker=null},this.audioContext=a(),this.worker.postMessage({command:"start",process:"background",sampleRate:this.audioContext.sampleRate,bitRate:this.bitRate}),this.wire(t),e.next=33;break;case 25:if(e.prev=25,e.t1=e.catch(3),!this.audioContext){e.next=31;break}return e.next=30,this.audioContext.close();case 30:this.audioContext=null;case 31:throw this.recording=!1,e.t1;case 33:case"end":return e.stop()}},e,this,[[3,25],[7,13]])}));return e}()},{key:"wire",value:function(e){var t=this;this.microphone=this.audioContext.createMediaStreamSource(e),this.processor=this.audioContext.createScriptProcessor(this.bufferSize,2,2),this.microphone.connect(this.processor),this.processor.connect(this.audioContext.destination),this.processor.onaudioprocess=function(e){t.worker.postMessage({command:"record",buffers:o(e)})}}},{key:"finish",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recording){e.next=2;break}throw new c.InvalidOperationError("Recording not started");case 2:return e.next=4,this.unwire();case 4:return this.worker.postMessage({command:"finish"}),e.abrupt("return",this.deferred);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"cancel",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.unwire();case 2:if(this.worker){e.next=4;break}return e.abrupt("return");case 4:this.worker.postMessage({command:"cancel"}),this.worker.terminate(),this.worker=null;case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"unwire",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.stream.getTracks()[0].stop(),this.microphone.disconnect(),this.processor.disconnect(),this.processor.onaudioprocess=null,e.next=6,this.audioContext.close();case 6:this.recording=!1;case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"reset",value:function(){if(this.recording)throw new c.InvalidOperationError("Recording in process, cannot reset.");this.audioContext.close(),this.audioContext=null,this.stream=null,this.microphone=null,this.processor=null,this.recording=!0}}]),e}();return function(e){return new p(e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var c=n(0),d=n(297),l=function(e){return e&&e.__esModule?e:{default:e}}(d),f=4096,h=128;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M800RateProvider=t.RateUnit=t.QueryType=void 0;var r=n(658),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(659);t.QueryType=o.QueryType,t.RateUnit=o.RateUnit,t.M800RateProvider=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CALL="call",t.SMS="sms"},function(e,t,n){function r(){if(null!==y)return y;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<t&&e[i]<=r&&n%e[i]!=0;i++);t!==i&&e[i]<=r||(e[t++]=n)}return y=e,e}function i(e){for(var t=r(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function o(e){var t=u.mont(e);return 0===h.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function a(e,t){if(e<16)return new u(2===t||5===t?[140,123]:[140,39]);t=new u(t);for(var n,r;;){for(n=new u(s(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(f),n.testn(1)||n.iadd(h),t.cmp(h)){if(!t.cmp(p))for(;n.mod(v).cmp(m);)n.iadd(_)}else for(;n.mod(c).cmp(g);)n.iadd(_);if(r=n.shrn(1),i(r)&&i(n)&&o(r)&&o(n)&&l.test(r)&&l.test(n))return n}}var s=n(327);e.exports=a,a.simpleSieve=i,a.fermatTest=o;var u=n(205),c=new u(24),d=n(328),l=new d,f=new u(1),h=new u(2),p=new u(5),v=(new u(16),new u(8),new u(10)),m=new u(3),g=(new u(7),new u(11)),_=new u(4),y=(new u(12),null)},function(e,t,n){"use strict";(function(t,r){function i(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}function o(e,t){if(e>s)throw new RangeError("requested too many random bytes");var n=u.allocUnsafe(e);if(e>0)if(e>a)for(var i=0;i<e;i+=a)c.getRandomValues(n.slice(i,i+a));else c.getRandomValues(n);return"function"==typeof t?r.nextTick(function(){t(null,n)}):n}var a=65536,s=4294967295,u=n(666).Buffer,c=t.crypto||t.msCrypto;c&&c.getRandomValues?e.exports=o:e.exports=i}).call(t,n(19),n(39))},function(e,t,n){function r(e){this.rand=e||new o.Rand}var i=n(205),o=n(668);e.exports=r,r.create=function(e){return new r(e)},r.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var r=new i(this.rand.generate(n))}while(r.cmp(e)>=0);return r},r.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},r.prototype.test=function(e,t,n){var r=e.bitLength(),o=i.mont(e),a=new i(1).toRed(o);t||(t=Math.max(1,r/48|0));for(var s=e.subn(1),u=0;!s.testn(u);u++);for(var c=e.shrn(u),d=s.toRed(o);t>0;t--){var l=this._randrange(new i(2),s);n&&n(l);var f=l.toRed(o).redPow(c);if(0!==f.cmp(a)&&0!==f.cmp(d)){for(var h=1;h<u;h++){if(f=f.redSqr(),0===f.cmp(a))return!1;if(0===f.cmp(d))break}if(h===u)return!1}}return!0},r.prototype.getDivisor=function(e,t){var n=e.bitLength(),r=i.mont(e),o=new i(1).toRed(r);t||(t=Math.max(1,n/48|0));for(var a=e.subn(1),s=0;!a.testn(s);s++);for(var u=e.shrn(s),c=a.toRed(r);t>0;t--){var d=this._randrange(new i(2),a),l=e.gcd(d);if(0!==l.cmpn(1))return l;var f=d.toRed(r).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(c)){for(var h=1;h<s;h++){if(f=f.redSqr(),0===f.cmp(o))return f.fromRed().subn(1).gcd(e);if(0===f.cmp(c))break}if(h===s)return f=f.redSqr(),f.fromRed().subn(1).gcd(e)}}return!1}},function(e,t,n){"use strict";function r(e){if(void 0!==e.firstElementChild)return e.firstElementChild;var t=e.childNodes||[];return Array.prototype.find.call(t,function(e){return 1===e.nodeType})||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstElementChild=r},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(352)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(353),a=i(o),s=n(86),u=n(393),c=i(u),d=n(673),l=i(d),f=n(674),h=i(f),p=n(676),v=i(p),m=n(677),g=r(m),_=n(324),y=r(_);t.default=(0,a.default)({},c.default,l.default,h.default,v.default,y,{util:g,version:s.version}),e.exports=t.default},function(e,t,n){var r=n(354),i=n(225),o=i(function(e,t,n){r(e,t,n)});e.exports=o},function(e,t,n){function r(e,t,n,l,f){e!==t&&a(t,function(a,c){if(u(a))f||(f=new i),s(e,t,c,n,r,l,f);else{var h=l?l(d(e,c),a,c+"",e,t,f):void 0;void 0===h&&(h=a),o(e,c,h)}},c)}var i=n(93),o=n(215),a=n(217),s=n(384),u=n(9),c=n(84),d=n(223);e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var i=n(95),o=Array.prototype,a=o.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}var i=n(95);e.exports=r},function(e,t,n){function r(e){return i(this.__data__,e)>-1}var i=n(95);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=n(95);e.exports=r},function(e,t,n){function r(){this.__data__=new i,this.size=0}var i=n(94);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}var i=n(94),o=n(139),a=n(140),s=200;e.exports=r},function(e,t,n){function r(e){return!(!a(e)||o(e))&&(i(e)?p:c).test(s(e))}var i=n(26),o=n(368),a=n(9),s=n(214),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,d=Function.prototype,l=Object.prototype,f=d.toString,h=l.hasOwnProperty,p=RegExp("^"+f.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[u]=n:delete e[u]),i}var i=n(63),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t,n){function r(e){return!!o&&o in e}var i=n(369),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(18),i=r["__core-js_shared__"];e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n(372),o=n(94),a=n(139);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(373),o=n(374),a=n(375),s=n(376),u=n(377);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(96);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(i){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var i=n(96),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)}var i=n(96),o=Object.prototype,a=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?o:t,this}var i=n(96),o="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=n(97);e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return i(this,e).get(e)}var i=n(97);e.exports=r},function(e,t,n){function r(e){return i(this,e).has(e)}var i=n(97);e.exports=r},function(e,t,n){function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=n(97);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}e.exports=n},function(e,t,n){function r(e,t,n,r,y,b,w){var $=g(e,n),E=g(t,n),S=w.get(E);if(S)return void i(e,n,S);var O=b?b($,E,n+"",e,t,w):void 0,A=void 0===O;if(A){var M=d(E),x=!M&&f(E),T=!M&&!x&&m(E);O=E,M||x||T?d($)?O=$:l($)?O=s($):x?(A=!1,O=o(E,!0)):T?(A=!1,O=a(E,!0)):O=[]:v(E)||c(E)?(O=$,c($)?O=_($):p($)&&!h($)||(O=u(E))):A=!1}A&&(w.set(E,O),y(O,E,r,b,w),w.delete(E)),i(e,n,O)}var i=n(215),o=n(218),a=n(219),s=n(100),u=n(221),c=n(81),d=n(2),l=n(143),f=n(82),h=n(26),p=n(9),v=n(64),m=n(102),g=n(223),_=n(388);e.exports=r},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(32),o=n(20),a="[object Arguments]";e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){return a(e)&&o(e.length)&&!!s[i(e)]}var i=n(32),o=n(144),a=n(20),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){function r(e){return i(e,o(e))}var i=n(50),o=n(84);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){if(!i(e))return a(e);var t=o(e),n=[];for(var r in e)("constructor"!=r||!t&&u.call(e,r))&&n.push(r);return n}var i=n(9),o=n(80),a=n(391),s=Object.prototype,u=s.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){var r=n(227),i=n(216),o=n(51),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(229),a=r(o),s=n(46),u=r(s),c=n(0),d=r(c),l=n(28),f=r(l),h=n(564),p=r(h),v=n(570),m=r(v),g=n(314),_=r(g),y=n(301),b=r(y),w=n(308),$=r(w),E=n(313),S=r(E);t.default=i({constants:a.default},a.default,{device:u.default,error:d.default,pubsub:f.default,storage:p.default,Client:m.default,ConfigurationManager:_.default,Connection:b.default,PeerManager:$.default,AccountManager:S.default}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR=t.WARN=t.INFO=t.DEBUG=t.TRACE=void 0;var r=n(106);t.TRACE=r.LogLevel.Trace,t.DEBUG=r.LogLevel.Debug,t.INFO=r.LogLevel.Info,t.WARN=r.LogLevel.Warn,t.ERROR=r.LogLevel.Error},function(e,t,n){"use strict";var r=n(13),i=n.n(r),o=n(21),a=n.n(o),s=n(234),u=n.n(s),c=n(2),d=n.n(c),l=n(159),f=n.n(l),h=n(260),p=n(89),v=function(){function e(t){i()(this,e),f()("streams",t,d.a),this._streams=t,this[p.a]=u()(t,function(e){return e[p.a]})}return a()(e,[{key:"write",value:function(e){var t=this;this._streams.forEach(function(n){n[p.a]&&Object(h.a)(n,t),n.write(e)})}}]),e}();t.a=v},function(e,t,n){e.exports={default:n(397),__esModule:!0}},function(e,t,n){n(398);var r=n(16).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(42);r(r.S+r.F*!n(53),"Object",{defineProperty:n(44).f})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){function r(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}var i=n(401),o=n(413),a=n(244);e.exports=r},function(e,t,n){function r(e,t,n,r){var u=n.length,c=u,d=!r;if(null==e)return!c;for(e=Object(e);u--;){var l=n[u];if(d&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++u<c;){l=n[u];var f=l[0],h=e[f],p=l[1];if(d&&l[2]){if(void 0===h&&!(f in e))return!1}else{var v=new i;if(r)var m=r(h,p,f,e,t,v);if(!(void 0===m?o(p,h,a|s,r,v):m))return!1}}return!0}var i=n(93),o=n(151),a=1,s=2;e.exports=r},function(e,t,n){function r(e,t,n,r,m,_){var y=c(e),b=c(t),w=y?p:u(e),$=b?p:u(t);w=w==h?v:w,$=$==h?v:$;var E=w==v,S=$==v,O=w==$;if(O&&d(e)){if(!d(t))return!1;y=!0,E=!1}if(O&&!E)return _||(_=new i),y||l(e)?o(e,t,n,r,m,_):a(e,t,w,n,r,m,_);if(!(n&f)){var A=E&&g.call(e,"__wrapped__"),M=S&&g.call(t,"__wrapped__");if(A||M){var x=A?e.value():e,T=M?t.value():t;return _||(_=new i),m(x,T,n,r,_)}}return!!O&&(_||(_=new i),s(e,t,n,r,m,_))}var i=n(93),o=n(236),a=n(405),s=n(408),u=n(88),c=n(2),d=n(82),l=n(102),f=1,h="[object Arguments]",p="[object Array]",v="[object Object]",m=Object.prototype,g=m.hasOwnProperty;e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t,n,r,i,E,O){switch(n){case $:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!E(new o(e),new o(t)));case f:case h:case m:return a(+e,+t);case p:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case v:var A=u;case _:var M=r&d;if(A||(A=c),e.size!=t.size&&!M)return!1;var x=O.get(e);if(x)return x==t;r|=l,O.set(e,t);var T=s(A(e),A(t),r,i,E,O);return O.delete(e),T;case b:if(S)return S.call(e)==S.call(t)}return!1}var i=n(63),o=n(220),a=n(62),s=n(236),u=n(406),c=n(407),d=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",v="[object Map]",m="[object Number]",g="[object RegExp]",_="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",$="[object DataView]",E=i?i.prototype:void 0,S=E?E.valueOf:void 0;e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(e,t,n,r,a,u){var c=n&o,d=i(e),l=d.length;if(l!=i(t).length&&!c)return!1;for(var f=l;f--;){var h=d[f];if(!(c?h in t:s.call(t,h)))return!1}var p=u.get(e);if(p&&u.get(t))return p==t;var v=!0;u.set(e,t),u.set(t,e);for(var m=c;++f<l;){h=d[f];var g=e[h],_=t[h];if(r)var y=c?r(_,g,h,t,e,u):r(g,_,h,e,t,u);if(!(void 0===y?g===_||a(g,_,n,r,u):y)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(v=!1)}return u.delete(e),u.delete(t),v}var i=n(237),o=1,a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(222),i=r(Object.keys,Object);e.exports=i},function(e,t,n){var r=n(49),i=n(18),o=r(i,"DataView");e.exports=o},function(e,t,n){var r=n(49),i=n(18),o=r(i,"Promise");e.exports=o},function(e,t,n){var r=n(49),i=n(18),o=r(i,"Set");e.exports=o},function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,i(a)]}return t}var i=n(243),o=n(38);e.exports=r},function(e,t,n){function r(e,t){return s(e)&&u(t)?c(d(e),t):function(n){var r=o(n,e);return void 0===r&&r===t?a(n,e):i(t,r,l|f)}}var i=n(151),o=n(415),a=n(245),s=n(156),u=n(243),c=n(244),d=n(70),l=1,f=2;e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(107);e.exports=r},function(e,t,n){var r=n(417),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function r(e){var t=i(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}var i=n(418),o=500;e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=n(140),o="Expected a function";r.Cache=i,e.exports=r},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n){t=i(t,e);for(var r=-1,d=t.length,l=!1;++r<d;){var f=c(t[r]);if(!(l=null!=e&&n(e,f)))break;e=e[f]}return l||++r!=d?l:!!(d=null==e?0:e.length)&&u(d)&&s(f,d)&&(a(e)||o(e))}var i=n(69),o=n(81),a=n(2),s=n(65),u=n(144),c=n(70);e.exports=r},function(e,t,n){function r(e){return a(e)?i(s(e)):o(e)}var i=n(422),o=n(423),a=n(156),s=n(70);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return i(t,e)}}var i=n(107);e.exports=r},function(e,t,n){function r(e,t){var n;return i(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}var i=n(71);e.exports=r},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!i(n))return e(n,r);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==r(s[a],a,s););return n}}var i=n(33);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){var o=(0,u.default)(n)?function(e){return(0,a.default)(n,function(t){return t(e)})}:n;return(0,d.default)(i,e,t,o,r)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(160),a=r(o),s=n(2),u=r(s);t.default=i;var c=n(248),d=r(c)},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}e.exports=n},function(e,t,n){function r(e,t){var n=!0;return i(e,function(e,r,i){return n=!!t(e,r,i)}),n}var i=n(71);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(460),v=r(p),m=function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Invalid argument supplied.",n))}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromArgumentName",value:function(e,n){return new t("Invalid argument supplied: "+e+".",n)}}]),t}(v.default);t.default=m},function(e,t,n){n(431),e.exports=n(16).Object.getPrototypeOf},function(e,t,n){var r=n(109),i=n(249);n(432)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(42),i=n(16),o=n(68);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(434),__esModule:!0}},function(e,t,n){n(112),n(169),e.exports=n(170).f("iterator")},function(e,t,n){var r=n(164),i=n(161);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(165),i=n(87),o=n(168),a={};n(66)(a,n(30)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(44),i=n(52),o=n(113);e.exports=n(53)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(73),i=n(255),o=n(439);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),d=o(a,c);if(e&&n!=n){for(;c>d;)if((s=u[d++])!=s)return!0}else for(;c>d;d++)if((e||d in u)&&u[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(164),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(43).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(442),i=n(443),o=n(72),a=n(73);e.exports=n(251)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(445),__esModule:!0}},function(e,t,n){n(256),n(450),n(451),n(452),e.exports=n(16).Symbol},function(e,t,n){var r=n(111)("meta"),i=n(67),o=n(54),a=n(44).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(68)(function(){return u(Object.preventExtensions({}))}),d=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";d(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;d(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&d(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:l,getWeak:f,onFreeze:h}},function(e,t,n){var r=n(113),i=n(172),o=n(114);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(166);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(73),i=n(257).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t){},function(e,t,n){n(171)("asyncIterator")},function(e,t,n){n(171)("observable")},function(e,t,n){e.exports={default:n(454),__esModule:!0}},function(e,t,n){n(455),e.exports=n(16).Object.setPrototypeOf},function(e,t,n){var r=n(42);r(r.S,"Object",{setPrototypeOf:n(456).set})},function(e,t,n){var r=n(67),i=n(52),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(149)(Function.call,n(258).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(458),__esModule:!0}},function(e,t,n){n(459);var r=n(16).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(42);r(r.S,"Object",{create:n(165)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(24),l=r(d),f=n(259),h=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),t}(f.BaseError);t.default=h},function(e,t,n){"use strict";function r(e){void 0!==e&&a(this,"message",{configurable:!0,value:e,writable:!0});var t=this.constructor.name;void 0!==t&&t!==this.name&&a(this,"name",{configurable:!0,value:t,writable:!0}),s(this,this.constructor)}function i(e,t){if(null==t||t===Error)t=r;else if("function"!=typeof t)throw new TypeError("super_ should be a function");var n;if("string"==typeof e)n=e,e=void 0!==o?function(){return o(t,arguments,this.constructor)}:function(){t.apply(this,arguments)},void 0!==u&&(u(e,n),n=void 0);else if("function"!=typeof e)throw new TypeError("constructor should be either a string or a function");e.super_=e.super=t;var i={constructor:{configurable:!0,value:e,writable:!0}};return void 0!==n&&(i.name={configurable:!0,value:n,writable:!0}),e.prototype=Object.create(t.prototype,i),e}var o="undefined"!=typeof Reflect?Reflect.construct:void 0,a=Object.defineProperty,s=Error.captureStackTrace;void 0===s&&(s=function(e){var t=new Error;a(e,"stack",{configurable:!0,get:function(){var e=t.stack;return a(this,"stack",{configurable:!0,value:e,writable:!0}),e},set:function(t){a(e,"stack",{configurable:!0,value:t,writable:!0})}})}),r.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:r,writable:!0}});var u=function(){function e(e,t){return a(e,"name",{configurable:!0,value:t})}try{var t=function(){};if(e(t,"foo"),"foo"===t.name)return e}catch(e){}}();t=e.exports=i,t.BaseError=r},function(e,t,n){"use strict";function r(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var u=i[0],d=void 0;if(!v()(u))return d=u instanceof Error?{err:u}:u,void e[n](s()({},t,d));if(d=l()(i),!h()(d)){var f=h()(t)?[t].concat(i):i;return void e[n].apply(e,o()(f))}if(Object(m.a)(u)>=i.length-1){var p=h()(t)?[t].concat(i):i;e[n].apply(e,o()(p))}else d instanceof Error&&(d={err:d}),e[n].apply(e,[s()({},t,d)].concat(o()(c()(i))))}t.a=r;var i=n(463),o=n.n(i),a=n(115),s=n.n(a),u=n(475),c=n.n(u),d=n(116),l=n.n(d),f=n(9),h=n.n(f),p=n(8),v=n.n(p),m=n(476)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(464),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){e.exports={default:n(465),__esModule:!0}},function(e,t,n){n(112),n(466),e.exports=n(16).Array.from},function(e,t,n){"use strict";var r=n(149),i=n(42),o=n(109),a=n(467),s=n(468),u=n(255),c=n(469),d=n(261);i(i.S+i.F*!n(470)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,l,f=o(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,_=d(f);if(m&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==_||h==Array&&s(_))for(t=u(f.length),n=new h(t);t>g;g++)c(n,g,m?v(f[g],g):f[g]);else for(l=_.call(f),n=new h;!(i=l.next()).done;g++)c(n,g,m?a(l,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){var r=n(52);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(72),i=n(30)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(44),i=n(87);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(30)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){e.exports={default:n(472),__esModule:!0}},function(e,t,n){n(473),e.exports=n(16).Object.assign},function(e,t,n){var r=n(42);r(r.S+r.F,"Object",{assign:n(474)})},function(e,t,n){"use strict";var r=n(113),i=n(172),o=n(114),a=n(109),s=n(254),u=Object.assign;e.exports=!u||n(68)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,d=i.f,l=o.f;u>c;)for(var f,h=s(arguments[c++]),p=d?r(h).concat(d(h)):r(h),v=p.length,m=0;v>m;)l.call(h,f=p[m++])&&(n[f]=h[f]);return n}:u},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:o(t),t=r-t,i(e,0,t<0?0:t)):[]}var i=n(173),o=n(90);e.exports=r},function(e,t,n){"use strict";function r(e){return s()(e)?o()(c.map(function(t){return Object(u.a)(e,t)})):0}t.a=r;var i=n(477),o=n.n(i),a=n(8),s=n.n(a),u=n(479),c=["%s","%d","%j"]},function(e,t,n){function r(e){return e&&e.length?i(e,o):0}var i=n(478),o=n(51);e.exports=r},function(e,t){function n(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}e.exports=n},function(e,t,n){"use strict";function r(e,t){var n=String(e),r=String(t);if(r.length<=0)return n.length+1;for(var i=0,o=n.indexOf(r,0);o>=0;)i+=1,o=n.indexOf(r,o+1);return i}t.a=r},function(e,t,n){"use strict";function r(e){function t(t){n&&(e.lastLevel=t.level,e.lastMsg=t.msg,e.lastObj=o()(t,["level","msg"])),e.write(t.msg)}s()("stream",e);var n=e[u.a];return t}t.a=r;var i=n(55),o=n.n(i),a=n(498),s=n.n(a),u=n(268)},function(e,t,n){function r(e,t){return e&&i(t,o(t),e)}var i=n(50),o=n(38);e.exports=r},function(e,t,n){function r(e,t){return e&&i(t,o(t),e)}var i=n(50),o=n(84);e.exports=r},function(e,t,n){function r(e,t){return i(e,o(e),t)}var i=n(50),o=n(155);e.exports=r},function(e,t,n){function r(e,t){return i(e,o(e),t)}var i=n(50),o=n(264);e.exports=r},function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,i=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case g:return i(e);case c:case d:return new r(+e);case _:return o(e,n);case y:case b:case w:case $:case E:case S:case O:case A:case M:return u(e,n);case l:return new r;case f:case v:return new r(e);case h:return a(e);case p:return new r;case m:return s(e)}}var i=n(141),o=n(487),a=n(488),s=n(489),u=n(219),c="[object Boolean]",d="[object Date]",l="[object Map]",f="[object Number]",h="[object RegExp]",p="[object Set]",v="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",_="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",$="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",M="[object Uint32Array]";e.exports=r},function(e,t,n){function r(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var i=n(141);e.exports=r},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e){return a?Object(a.call(e)):{}}var i=n(63),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;e.exports=r},function(e,t,n){var r=n(491),i=n(83),o=n(145),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(88),o=n(20),a="[object Map]";e.exports=r},function(e,t,n){var r=n(493),i=n(83),o=n(145),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){function r(e){return o(e)&&i(e)==a}var i=n(88),o=n(20),a="[object Set]";e.exports=r},function(e,t,n){function r(e,t){return t.length<2?e:i(e,o(t,0,-1))}var i=n(107),o=n(173);e.exports=r},function(e,t,n){function r(e){return i(e)?void 0:e}var i=n(64);e.exports=r},function(e,t,n){function r(e){return(null==e?0:e.length)?i(e,1):[]}var i=n(267);e.exports=r},function(e,t,n){function r(e){return a(e)||o(e)||!!(s&&e&&e[s])}var i=n(63),o=n(81),a=n(2),s=i?i.isConcatSpreadable:void 0;e.exports=r},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(247),o=r(i),a=n(499),s=r(a);t.default="production"!==e.env.NODE_ENV?s.default:o.default}).call(t,n(39))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'Argument or variable "'+e+'" should not be null or undefined.';return(0,d.default)(i,e,t,(0,a.default)(u.default),n)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(117),a=r(o),s=n(118),u=r(s);t.default=i;var c=n(248),d=r(c)},function(e,t,n){e.exports={default:n(501),__esModule:!0}},function(e,t,n){n(256),e.exports=n(16).Symbol.for},function(e,t,n){"use strict";(function(e,r){var i=n(115),o=n.n(i),a=n(13),s=n.n(a),u=n(21),c=n.n(u),d=n(8),l=n.n(d),f=n(269),h=n.n(f),p=n(178),v=n.n(p),m=n(271),g=n.n(m),_=n(55),y=n.n(_),b=n(179),w=n.n(b),$=n(119),E=n.n($),S=n(180),O=n(89),A=E.a.levels.labels,M=function(){function t(n,i){s()(this,t),this[O.a]=S.a,this._options=w()(n,{pretty:S.a||S.b});var o=w()(i||{},{console:e.console,stdout:r.stdout}),a=o.console,u=o.stdout;if(this._console=a,!S.a){var c=u;if(this._options.pretty){var d=E.a.pretty();d.pipe(c),c=d}this.write=c.write.bind(c),this._stream=c}}return c()(t,[{key:"write",value:function(e){var t=this._console[A[this.lastLevel]]||this._console.log;if(this._options.pretty){var n=l()(e)&&e.length>0?[e]:[];this.lastObj&&this.lastObj.err instanceof Error&&n.push(this.lastObj.err);var r=y()(this.lastObj,["msg","level","time","err"]);g()(r)||n.push(r),t.apply(void 0,n)}else{t(h()(o()({msg:this.lastMsg,level:this.lastLevel},this.lastObj),v.a))}}}]),t}();t.a=M}).call(t,n(19),n(39))},function(e,t,n){function r(e,t){if(null==e)return{};var n=i(s(e),function(e){return[e]});return t=o(t),a(e,n,function(e,n){return t(e,n[0])})}var i=n(45),o=n(27),a=n(270),s=n(177);e.exports=r},function(e,t,n){function r(e,t,n,r){if(!s(e))return e;t=o(t,e);for(var c=-1,d=t.length,l=d-1,f=e;null!=f&&++c<d;){var h=u(t[c]),p=n;if(c!=l){var v=f[h];p=r?r(v,h,f):void 0,void 0===p&&(p=s(v)?v:a(t[c+1])?[]:{})}i(f,h,p),f=f[h]}return e}var i=n(103),o=n(69),a=n(65),s=n(9),u=n(70);e.exports=r},function(e,t,n){function r(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}var i=n(506);e.exports=function(e,t){var n=t&&t.lowres?r:i,o=e[0];if("string"!=typeof o){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=n(e[s]);return a.join(" ")}var u=e.length;if(1===u)return o;for(var c="",d="",l=1,f=0,h=o.length,p=0;p<h;){if(37===o.charCodeAt(p)&&p+1<h){switch(o.charCodeAt(p+1)){case 100:if(l>=u)break;if(f<p&&(d+=o.slice(f,p)),null==e[l])break;d+=Number(e[l]),f=p+=2;break;case 79:case 111:case 106:if(l>=u)break;if(f<p&&(d+=o.slice(f,p)),void 0===e[l])break;var v=typeof e[l];if("string"===v){d+="'"+e[l]+"'",f=p+=2;break}if("function"===v){d+=e[l].name||"<anonymous>",f=p+=2;break}d+=n(e[l]),f=p+=2;break;case 115:if(l>=u)break;f<p&&(d+=o.slice(f,p)),d+=String(e[l]),f=p+=2;break;case 37:f<p&&(d+=o.slice(f,p)),d+="%",f=p+=2}++l}++p}for(0===f?d=o:f<h&&(d+=o.slice(f));l<u;)c=e[l++],d+=null===c||"object"!=typeof c?" "+c:" "+n(c);return d}},function(e,t){function n(e){return i(e,"",[],null),JSON.stringify(e)}function r(e,t,n){this.val=e,this.k=t,this.parent=n,this.count=1}function i(e,t,n,o){if("object"==typeof e&&null!==e){if("function"==typeof e.toJSON){if(e instanceof r)return void e.count++;if(void 0===e.toJSON.forceDecirc)return}for(var a=0;a<n.length;a++)if(n[a]===e)return void(o[t]=new r(e,t,o));n.push(e);for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&i(e[s],s,n,e);n.pop()}}e.exports=n,n.default=n,r.prototype.toJSON=function(){return 0==--this.count&&(this.parent[this.k]=this.val),"[Circular]"}},function(e,t,n){"use strict";var r=n(13),i=n.n(r),o=n(21),a=n.n(o),s=n(120),u=n.n(s),c=n(272),d=n.n(c),l=n(8),f=n.n(l),h=n(121),p=n.n(h),v=n(9),m=n.n(v),g=n(26),_=n.n(g),y=n(159),b=n.n(y),w=n(260),$=n(89),E=n(182),S=u()(E.a),O=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i()(this,e),b()("stream",t,m.a),b()("predicate",n,_.a),this._stream=t,this._predicate=n,this._passMetaToFilter=r,this[$.a]=t[$.a]||r}return a()(e,null,[{key:"byMinimalLogLevel",value:function(t,n){b()("stream",t,m.a),b()("level",n,function(e){return f()(e)?d()(S,e):p()(e)});var r=p()(n)?n:E.b[n];return new e(t,function(e,t){return t.level>=r},!0)}}]),a()(e,[{key:"write",value:function(e){(this._passMetaToFilter?this._predicate(e,{level:this.lastLevel,msg:this.lastMsg,obj:this.lastObj,logger:this.lastLogger}):this._predicate(e))&&(this._stream[$.a]&&Object(w.a)(this._stream,this),this._stream.write(e))}}]),e}();t.a=O},function(e,t,n){function r(e,t){return i(t,function(t){return e[t]})}var i=n(45);e.exports=r},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t){function n(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t,n){function r(e,t){return i(e,t,function(t,n){return o(e,n)})}var i=n(270),o=n(245);e.exports=r},function(e,t,n){"use strict";function r(e){function t(e){function t(t){for(var n=O.getState(),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return w.c.apply(void 0,[e,n,t].concat(i))}function r(e,t){return O.run(e,t)}return{getPinoLogger:function(){return e},child:h()(n,e),log:t,trace:h()(t,E.a.Trace),debug:h()(t,E.a.Debug),info:h()(t,E.a.Info),warn:h()(t,E.a.Warn),error:h()(t,E.a.Error),runInAsyncScope:r}}function n(e,n){return t(e.child(n))}var r=v()(e||{},{level:Object(E.c)(),streams:[new b.b],serializers:{err:m.stdSerializers.err}}),i=r.level,a=r.streams,u=r.serializers;y()("options.level",i,function(e){return l()(c()(E.a),e)},"Unsupported log level: "+i+"."),y()("options.streams",a,o.a,"Streams must be an array."),y()("options.serializers",u,s.a,"Serializers must be an object mapping property name to serializer function.");var d={level:i,serializers:u},f=[d],p=1===a.length?a[0]:new b.a(a);if(S.a){var _=Object(w.b)(p);d.browser={write:_}}else f.push(p);var O=Object($.a)();return t(g.a.apply(void 0,f))}t.a=r;var i=n(2),o=n.n(i),a=n(9),s=n.n(a),u=n(120),c=n.n(u),d=n(272),l=n.n(d),f=n(513),h=n.n(f),p=n(179),v=n.n(p),m=n(119),g=n.n(m),_=n(159),y=n.n(_),b=n(231),w=n(89),$=n(529),E=n(182),S=n(180)},function(e,t,n){var r=n(85),i=n(514),o=n(186),a=n(123),s=r(function(e,t){var n=a(t,o(s));return i(e,32,void 0,t,n)});s.placeholder={},e.exports=s},function(e,t,n){function r(e,t,n,r,$,E,S,O){var A=t&m;if(!A&&"function"!=typeof e)throw new TypeError(p);var M=r?r.length:0;if(M||(t&=~(y|b),r=$=void 0),S=void 0===S?S:w(h(S),0),O=void 0===O?O:h(O),M-=$?$.length:0,t&b){var x=r,T=$;r=$=void 0}var I=A?void 0:c(e),C=[e,t,n,r,$,x,T,E,S,O];if(I&&d(C,I),e=C[0],t=C[1],n=C[2],r=C[3],$=C[4],O=C[9]=void 0===C[9]?A?0:e.length:w(C[9]-M,0),!O&&t&(g|_)&&(t&=~(g|_)),t&&t!=v)R=t==g||t==_?a(e,t,O):t!=y&&t!=(v|y)||$.length?s.apply(void 0,C):u(e,t,n,r);else var R=o(e,t,n);return f((I?i:l)(R,C),e,t)}var i=n(274),o=n(515),a=n(516),s=n(276),u=n(527),c=n(280),d=n(528),l=n(283),f=n(284),h=n(90),p="Expected a function",v=1,m=2,g=8,_=16,y=32,b=64,w=Math.max;e.exports=r},function(e,t,n){function r(e,t,n){function r(){return(this&&this!==o&&this instanceof r?u:e).apply(s?n:this,arguments)}var s=t&a,u=i(e);return r}var i=n(122),o=n(18),a=1;e.exports=r},function(e,t,n){function r(e,t,n){function r(){for(var o=arguments.length,f=Array(o),h=o,p=u(r);h--;)f[h]=arguments[h];var v=o<3&&f[0]!==p&&f[o-1]!==p?[]:c(f,p);return(o-=v.length)<n?s(e,t,a,r.placeholder,void 0,f,v,void 0,void 0,n-o):i(this&&this!==d&&this instanceof r?l:e,this,f)}var l=o(e);return r}var i=n(146),o=n(122),a=n(276),s=n(279),u=n(186),c=n(123),d=n(18);e.exports=r},function(e,t){function n(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}e.exports=n},function(e,t,n){function r(e){var t=a(e),n=s[t];if("function"!=typeof n||!(t in i.prototype))return!1;if(e===n)return!0;var r=o(n);return!!r&&e===r[0]}var i=n(183),o=n(280),a=n(519),s=n(521);e.exports=r},function(e,t,n){function r(e){for(var t=e.name+"",n=i[t],r=a.call(i,t)?n.length:0;r--;){var o=n[r],s=o.func;if(null==s||s==e)return o.name}return t}var i=n(520),o=Object.prototype,a=o.hasOwnProperty;e.exports=r},function(e,t){var n={};e.exports=n},function(e,t,n){function r(e){if(u(e)&&!s(e)&&!(e instanceof i)){if(e instanceof o)return e;if(l.call(e,"__wrapped__"))return c(e)}return new o(e)}var i=n(183),o=n(282),a=n(184),s=n(2),u=n(20),c=n(522),d=Object.prototype,l=d.hasOwnProperty;r.prototype=a.prototype,r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e){if(e instanceof i)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var i=n(183),o=n(282),a=n(100);e.exports=r},function(e,t){function n(e){var t=e.match(r);return t?t[1].split(i):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,i=/,? & /;e.exports=n},function(e,t){function n(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(r,"{\n/* [wrapped with "+t+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=n},function(e,t,n){function r(e,t){return i(a,function(n){var r="_."+n[0];t&n[1]&&!o(e,r)&&e.push(r)}),e.sort()}var i=n(176),o=n(185),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length,r=a(t.length,n),s=i(e);r--;){var u=t[r];e[r]=o(u,n)?s[u]:void 0}return e}var i=n(100),o=n(65),a=Math.min;e.exports=r},function(e,t,n){function r(e,t,n,r){function u(){for(var t=-1,o=arguments.length,s=-1,l=r.length,f=Array(l+o),h=this&&this!==a&&this instanceof u?d:e;++s<l;)f[s]=r[s];for(;o--;)f[s++]=arguments[++t];return i(h,c?n:this,f)}var c=t&s,d=o(e);return u}var i=n(146),o=n(122),a=n(18),s=1;e.exports=r},function(e,t,n){function r(e,t){var n=e[1],r=t[1],v=n|r,m=v<(u|c|f),g=r==f&&n==l||r==f&&n==h&&e[7].length<=t[8]||r==(f|h)&&t[7].length<=t[8]&&n==l;if(!m&&!g)return e;r&u&&(e[2]=t[2],v|=n&u?0:d);var _=t[3];if(_){var y=e[3];e[3]=y?i(y,_,t[4]):_,e[4]=y?a(e[3],s):t[4]}return _=t[5],_&&(y=e[5],e[5]=y?o(y,_,t[6]):_,e[6]=y?a(e[5],s):t[6]),_=t[7],_&&(e[7]=_),r&f&&(e[8]=null==e[8]?t[8]:p(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}var i=n(277),o=n(278),a=n(123),s="__lodash_placeholder__",u=1,c=2,d=4,l=8,f=128,h=256,p=Math.min;e.exports=r},function(e,t,n){"use strict";function r(){function e(e,t){return o()(!1,'Async hooks are not supported in the current environment. Calling "runInAsyncScope" will have no effect. Log metadata explicitly or pass logger.child() with attached metadata instead.'),t()}function t(){return null}return{run:e,getState:t,isShim:!0}}t.a=r;var i=n(530),o=n.n(i)},function(e,t,n){"use strict";(function(t){var n=function(){};"production"!==t.env.NODE_ENV&&(n=function(e,t,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var i=2;i<r;i++)n[i-2]=arguments[i];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var o=0,a="Warning: "+t.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}}),e.exports=n}).call(t,n(39))},function(e,t,n){function r(e,t,n){var r=t&&n||0,d=t||[];e=e||{};var l=e.node||i,f=void 0!==e.clockseq?e.clockseq:o;if(null==l||null==f){var h=a();null==l&&(l=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=o=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,m=p-u+(v-c)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||p>u)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,c=v,o=f,p+=122192928e5;var g=(1e4*(268435455&p)+v)%4294967296;d[r++]=g>>>24&255,d[r++]=g>>>16&255,d[r++]=g>>>8&255,d[r++]=255&g;var _=p/4294967296*1e4&268435455;d[r++]=_>>>8&255,d[r++]=255&_,d[r++]=_>>>24&15|16,d[r++]=_>>>16&255,d[r++]=f>>>8|128,d[r++]=255&f;for(var y=0;y<6;++y)d[r+y]=l[y];return t||s(d)}var i,o,a=n(286),s=n(287),u=0,c=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(286),o=n(287);e.exports=r},function(e,t,n){var r;/*!
 * UAParser.js v0.7.19
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
!function(i,o){"use strict";var a="model",s="name",u="type",c="vendor",d="version",l="mobile",f="tablet",h={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){/*!
 * UAParser.js v0.7.19
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,r,i,o,a,s,u=0;u<t.length&&!a;){var c=t[u],d=t[u+1];for(n=r=0;n<c.length&&!a;)if(a=c[n++].exec(e))for(i=0;i<d.length;i++)s=a[++r],o=d[i],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(h.has(t[n][r],e))return"?"===n?void 0:n}else if(h.has(t[n],e))return"?"===n?void 0:n;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,d],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],d],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],d],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,d],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],d],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],d],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],d],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],d],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],d],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],d],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],d],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],d],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],d],[/(qqbrowserlite)\/([\w\.]+)/i],[s,d],[/(QQ)\/([\d\.]+)/i],[s,d],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,d],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,d],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,d],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[d,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[d,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,d],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[d,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],d],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],d],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[d,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,d],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],d],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],d],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],d],[/fxios\/([\w\.-]+)/i],[d,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[d,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[d,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],d],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[d,p.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,d],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],d],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,c,[u,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[u,f]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[u,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[c,"Amazon"],[u,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,p.str,v.device.amazon.model],[c,"Amazon"],[u,l]],[/android.+aft([bms])\sbuild/i],[a,[c,"Amazon"],[u,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[u,l]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[u,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[u,l]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[u,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[c,"Asus"],[u,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[u,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[c,"Sony"],[u,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,p.str,v.device.sprint.vendor],[a,p.str,v.device.sprint.model],[u,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,a,[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[a,/_/g," "],[u,l]],[/(nexus\s9)/i],[a,[c,"HTC"],[u,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[c,"Huawei"],[u,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[u,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[u,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[u,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[u,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,h.trim],[a,h.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[u,f]],[/smart-tv.+(samsung)/i],[c,[u,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[u,l]],[/sie-(\w*)/i],[a,[c,"Siemens"],[u,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],a,[u,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[c,"Acer"],[u,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[c,"LG"],[u,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[u,f]],[/(lg) netcast\.tv/i],[c,a,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[c,"LG"],[u,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[u,f]],[/linux;.+((jolla));/i],[c,a,[u,l]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,a,[u,l]],[/crkey/i],[[a,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[c,"Google"],[u,f]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[a,[c,"Google"],[u,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[c,"Meizu"],[u,f]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],a,[u,l]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[c,"OnePlus"],[u,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[c,"RCA"],[u,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[c,"Dell"],[u,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[c,"Verizon"],[u,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],a,[u,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[c,"NuVision"],[u,f]],[/android.+;\s(k88)\sbuild/i],[a,[c,"ZTE"],[u,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[c,"Swiss"],[u,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[c,"Swiss"],[u,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[c,"Zeki"],[u,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],a,[u,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[c,"Insignia"],[u,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[c,"NextBook"],[u,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],a,[u,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],a,[u,l]],[/android.+;\s(PH-1)\s/i],[a,[c,"Essential"],[u,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[c,"Envizen"],[u,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,a,[u,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[c,"MachSpeed"],[u,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,a,[u,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[c,"Rotor"],[u,f]],[/android.+(KS(.+))\s+build/i],[a,[c,"Amazon"],[u,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,a,[u,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,h.lowerize],c,a],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[d,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,d],[/rv\:([\w\.]{1,9}).+(gecko)/i],[d,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,d],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[d,p.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[d,p.str,v.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],d],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,d],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],d],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],d],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,d],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],d],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],d],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,d],[/(haiku)\s(\w+)/i],[s,d],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[d,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[d,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,d]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?h.extend(m,t):m;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};g.VERSION="0.7.19",g.BROWSER={NAME:s,MAJOR:"major",VERSION:d},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:d},g.OS={NAME:s,VERSION:d},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):n(288)?void 0!==(r=function(){return g}.call(t,n,t,e))&&(e.exports=r):i&&(i.UAParser=g);var _=i&&(i.jQuery||i.Zepto);if(void 0!==_&&!_.ua){var y=new g;_.ua=y.getResult(),_.ua.get=function(){return y.getUA()},_.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)_.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){var r,i;!function(o){/**
 * This script gives you the zone info key representing your device's time zone setting.
 *
 * @name jsTimezoneDetect
 * @version 1.0.6
 * @author Jon Nylander
 * @license MIT License - https://bitbucket.org/pellepim/jstimezonedetect/src/default/LICENCE.txt
 *
 * For usage and examples, visit:
 * http://pellepim.bitbucket.org/jstz/
 *
 * Copyright (c) Jon Nylander
 */
var a=function(){"use strict";var e={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},t=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},n=function(){var n=t(new Date(e.BASELINE_YEAR,0,2)),r=t(new Date(e.BASELINE_YEAR,5,2)),i=n-r;return i<0?n+",1":i>0?r+",1,s":n+",0"},r=function(){var e,t;if("undefined"!=typeof Intl&&void 0!==Intl.DateTimeFormat&&void 0!==(e=Intl.DateTimeFormat())&&void 0!==e.resolvedOptions)return t=e.resolvedOptions().timeZone,t&&(t.indexOf("/")>-1||"UTC"===t)?t:void 0},i=function(e){for(var t=new Date(e,0,1,0,0,1,0).getTime(),n=new Date(e,12,31,23,59,59).getTime(),r=t,i=new Date(r).getTimezoneOffset(),a=null,s=null;r<n-864e5;){var u=new Date(r),c=u.getTimezoneOffset();c!==i&&(c<i&&(a=u),c>i&&(s=u),i=c),r+=864e5}return!(!a||!s)&&{s:o(a).getTime(),e:o(s).getTime()}},o=function t(n,r,i){void 0===r&&(r=e.DAY,i=e.HOUR);for(var o=new Date(n.getTime()-r).getTime(),a=n.getTime()+r,s=new Date(o).getTimezoneOffset(),u=o,c=null;u<a-i;){var d=new Date(u);if(d.getTimezoneOffset()!==s){c=d;break}u+=i}return r===e.DAY?t(c,e.HOUR,e.MINUTE):r===e.HOUR?t(c,e.MINUTE,e.SECOND):c},s=function(e,t,n,r){if("N/A"!==n)return n;if("Asia/Beirut"===t){if("Africa/Cairo"===r.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===r.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===r.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===r.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===r.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===r.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return n},u=function(t,n){for(var r={},i=a.olson.dst_rules.zones,o=i.length,u=e.AMBIGUITIES[n],c=0;c<o;c++){var d=i[c],l=function(r){for(var i=0,o=0;o<t.length;o++)if(r.rules[o]&&t[o]){if(!(t[o].s>=r.rules[o].s&&t[o].e<=r.rules[o].e)){i="N/A";break}if(i=0,i+=Math.abs(t[o].s-r.rules[o].s),i+=Math.abs(r.rules[o].e-t[o].e),i>e.MAX_SCORE){i="N/A";break}}return i=s(t,n,i,r)}(i[c]);"N/A"!==l&&(r[d.name]=l)}for(var f in r)if(r.hasOwnProperty(f))for(var h=0;h<u.length;h++)if(u[h]===f)return f;return n},c=function(e){var t=function(){for(var e=[],t=0;t<a.olson.dst_rules.years.length;t++){var n=i(a.olson.dst_rules.years[t]);e.push(n)}return e}();return function(e){for(var t=0;t<e.length;t++)if(!1!==e[t])return!0;return!1}(t)?u(t,e):e};return{determine:function(){var t=r();return t||(t=a.olson.timezones[n()],void 0!==e.AMBIGUITIES[t]&&(t=c(t))),{name:function(){return t}}}}}();a.olson=a.olson||{},a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},a.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]},void 0!==e&&void 0!==e.exports?e.exports=a:null!==n(289)&&null!=n(288)?(r=[],void 0!==(i=function(){return a}.apply(t,r))&&(e.exports=i)):void 0===o?window.jstz=a:o.jstz=a}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(8),v=r(p),m=n(15),g=r(m),_=n(3),y=r(_),b="Unauthenticated",w=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Authentication is required to perform the operation.",n));return r.details={type:b},r}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,n=arguments[1];(0,y.default)("type",e,[v.default,function(e){return e.length>0}],"Type should not be empty.");var r='Authentication is required. The reason is: "'+e+'".',i=new t(r,n);return i.details={type:e},i}}]),t}(g.default);t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){var o=(0,u.default)(n)?function(e){return(0,a.default)(n,function(t){return t(e)})}:n;return(0,d.default)(i,e,t,o,r)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(160),a=r(o),s=n(2),u=r(s);t.default=i;var c=n(191),d=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(8),v=r(p),m=n(15),g=r(m),_=n(3),y=r(_),b=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Value is already in use.",n));return r.details={path:null},r}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromFieldPath",value:function(e,n){(0,y.default)("path",e,[v.default,function(e){return e.length>0}],"Path should not be empty.");var r=new t('Value at path "'+e+'" is already in use.',n);return r.details={path:e},r}}]),t}(g.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(2),v=r(p),m=n(15),g=r(m),_=n(3),y=r(_),b=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Operation is forbidden due to insufficient access permissions.",n));return r.details={context:{permissions:null}},r}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromRequiredPermissions",value:function(e,n){(0,y.default)("permissions",e,v.default,"Permissions should be an array.");var r=e.join(","),i="Operation is forbidden. Required permissions: "+r+".",o=new t(i,n);return o.details={context:{permissions:e}},o}}]),t}(g.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(24),l=r(d),f=n(15),h=r(f),p=function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Invalid state or operation.",n))}return(0,l.default)(t,e),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(541),s=r(a),u=n(13),c=r(u),d=n(23),l=r(d),f=n(21),h=r(f),p=n(24),v=r(p),m=n(118),g=r(m),_=n(117),y=r(_),b=n(8),w=r(b),$=n(290),E=r($),S=n(15),O=r(S),A=n(3),M=r(A),x=function(e){function t(e,n){(0,c.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Resource was not found.",n));return r.details={context:{resource:null,id:null}},r}return(0,v.default)(t,e),(0,h.default)(t,null,[{key:"createFromResourceDetails",value:function(e,n){(0,M.default)("details",e,(0,E.default)({resource:function(e){return(0,w.default)(e)&&e.length>0},id:(0,y.default)(g.default)}),"Details should have resource and id properties.");var r=e.resource,i=e.id,o='Resource "'+r+'" ('+(0,s.default)(i)+") was not found.",a=new t(o,n);return a.details={context:{resource:r,id:i}},a}}]),t}(O.default);t.default=x},function(e,t,n){e.exports={default:n(542),__esModule:!0}},function(e,t,n){var r=n(16),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){function r(e){var t=o(e);return function(n){return i(n,e,t)}}var i=n(544),o=n(38);e.exports=r},function(e,t){function n(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(8),v=r(p),m=n(15),g=r(m),_=n(3),y=r(_),b=function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Operation is not implemented.",n))}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromOperationName",value:function(e,n){return(0,y.default)("operationName",e,[v.default,function(e){return e.length>0}],"Operation name should not be empty."),new t('Operation "'+e+'" is not implemented.',n)}}]),t}(g.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(24),l=r(d),f=n(15),h=r(f),p=function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Value has already been updated by another party.",n))}return(0,l.default)(t,e),t}(h.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i),a=n(13),s=r(a),u=n(23),c=r(u),d=n(21),l=r(d),f=n(24),h=r(f),p=n(121),v=r(p),m=n(8),g=r(m),_=n(290),y=r(_),b=n(15),w=r(b),$=n(3),E=r($),S=function(e){function t(e,n){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e||"Operation failed due to timeout.",n))}return(0,h.default)(t,e),(0,l.default)(t,null,[{key:"createFromOperationDetails",value:function(e,n){return(0,E.default)("details",e,(0,y.default)({operationName:function(e){return(0,g.default)(e)&&e.length>0},timeoutPeriodMs:function(e){return(0,g.default)(e)||(0,v.default)(e)}}),"Details should have operationName and timeoutPeriodMs properties."),new t('Operation "'+e.operationName+'" failed due to timeout. Timeout period was '+e.timeoutPeriodMs+"ms.",n)}}]),t}(w.default);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,x.default)(e)&&(0,A.default)(e.message)&&e.message.length>0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),a=r(o),s=n(13),u=r(s),c=n(23),d=r(c),l=n(21),f=r(l),h=n(24),p=r(h),v=n(549),m=r(v),g=n(55),_=r(g),y=n(192),b=r(y),w=n(160),$=r(w),E=n(557),S=r(E),O=n(8),A=r(O),M=n(9),x=r(M),T=n(2),I=r(T),C=n(15),R=r(C),N=n(3),k=r(N),P=function(e){function t(e,n){(0,u.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e||"Invalid input was provided.",n));return r.details=[],r}return(0,p.default)(t,e),(0,f.default)(t,null,[{key:"createFromJoiError",value:function(e){(0,k.default)("joiError",e,S.default,"Expected Error instance."),(0,k.default)("joiError",e,function(e){return(0,I.default)(e.details)},"Joi error should contain details array.");var n=new t("Input does not match the schema: "+e.message+".");return n.details=e.details,n}},{key:"createFromMongooseValidationError",value:function(e){(0,k.default)("mongooseValidationError",e,S.default,"Expected Error instance."),(0,k.default)("mongooseValidationError",e,function(e){return(0,x.default)(e.errors)},"Mongoose validation error should contain errors object with error details");var n="Model doesn't pass validation: "+(0,m.default)(e.message,".")+".",r=new t(n);return r.details=(0,b.default)(e.errors,function(e){return{path:e.path,message:e.message,type:e.kind,context:(0,_.default)(e,["path","kind","message"])}}),r}},{key:"createFromDetails",value:function(e,n){(0,k.default)("errorOrErrors",e,function(e){return(0,I.default)(e)?(0,$.default)(e,i):i(e)},"Validation error (details) or array of validation errors should be passed.");var r=Array.isArray(e)?e:[e],o=1===r.length?r[0].message:"Invalid input was provided ("+r.length+" validation errors). See details for description.",a=new t(o,n);return a.details=r,a}}]),t}(R.default);t.default=P},function(e,t,n){function r(e,t,n){if((e=u(e))&&(n||void 0===t))return e.replace(c,"");if(!e||!(t=i(t)))return e;var r=s(e),d=a(r,s(t))+1;return o(r,0,d).join("")}var i=n(158),o=n(550),a=n(551),s=n(552),u=n(157),c=/\s+$/;e.exports=r},function(e,t,n){function r(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:i(e,t,n)}var i=n(173);e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--&&i(t,e[n],0)>-1;);return n}var i=n(181);e.exports=r},function(e,t,n){function r(e){return o(e)?a(e):i(e)}var i=n(553),o=n(554),a=n(555);e.exports=r},function(e,t){function n(e){return e.split("")}e.exports=n},function(e,t){function n(e){return r.test(e)}var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=n},function(e,t){function n(e){return e.match(l)||[]}var r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",u="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",o,a].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*",c="[\\ufe0e\\ufe0f]?"+s+u,d="(?:"+["[^\\ud800-\\udfff]"+r+"?",r,o,a,"[\\ud800-\\udfff]"].join("|")+")",l=RegExp(i+"(?="+i+")|"+d+c,"g");e.exports=n},function(e,t,n){function r(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,function(e,i,o){r[++n]=t(e,i,o)}),r}var i=n(71),o=n(33);e.exports=r},function(e,t,n){function r(e){if(!o(e))return!1;var t=i(e);return t==u||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!a(e)}var i=n(32),o=n(20),a=n(64),s="[object DOMException]",u="[object Error]";e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e,n){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||"The action is interrupted.",n))}return o(t,e),t}(s.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||"The operation is not supported.",n));return o.details=[],o}return o(t,e),t}(s.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||"The resource is temporary not available.",n));return o.details=[],o}return o(t,e),t}(s.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||"Unexpected response.",n));return o.details=[],o}return o(t,e),t}(s.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(15),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n,o){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||"Call creation failed.",n));return a.details=o,a}return o(t,e),a(t,null,[{key:"createFromDetails",value:function(e,n){var r=e.uri,i="Failed to make a call to "+r,o=new t(i,n);return o.details=e,o}}]),t}(u.default);t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o.code=e,o}return o(t,e),t}(s.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(293),o=r(i),a=n(569),s=r(a);t.default={EncryptedStorage:o.default,EncryptedStorageWorkerBinding:s.default},e.exports=t.default},function(e,t,n){(function(t){var n,n;/*!
    localForage -- Offline Storage, Improved
    Version 1.7.3
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof n&&n;if(!u&&c)return n(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,n,r){(function(e){"use strict";function t(){d=!0;for(var e,t,n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}d=!1}function r(e){1!==l.push(e)||d||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,s=new o(t),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),i=function(){u.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var c=new e.MessageChannel;c.port1.onmessage=t,i=function(){c.port2.postMessage(0)}}var d,l=[];n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,e!==r&&u(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){p(function(){var r;try{r=t(n)}catch(t){return v.reject(e,t)}r===e?v.reject(e,new TypeError("Cannot resolve promise with itself")):v.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function n(t){o||(o=!0,v.reject(e,t))}function r(t){o||(o=!0,v.resolve(e,t))}function i(){t(r,n)}var o=!1,a=c(i);"error"===a.status&&n(a.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function d(e){return e instanceof this?e:v.resolve(new this(r),e)}function l(e){var t=new this(r);return v.reject(t,e)}function f(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,s=-1,u=new this(r);++s<n;)!function(e,r){function s(e){o[r]=e,++a!==n||i||(i=!0,v.resolve(u,o))}t.resolve(e).then(s,function(e){i||(i=!0,v.reject(u,e))})}(e[s],s);return u}function h(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,a=new this(r);++o<n;)!function(e){t.resolve(e).then(function(e){i||(i=!0,v.resolve(a,e))},function(e){i||(i=!0,v.reject(a,e))})}(e[o]);return a}var p=e(1),v={},m=["REJECTED"],g=["FULFILLED"],_=["PENDING"];t.exports=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===g||"function"!=typeof t&&this.state===m)return this;var n=new this.constructor(r);if(this.state!==_){a(n,this.state===g?e:t,this.outcome)}else this.queue.push(new o(n,e,t));return n},o.prototype.callFulfilled=function(e){v.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){v.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},v.resolve=function(e,t){var n=c(s,t);if("error"===n.status)return v.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=g,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},v.reject=function(e,t){e.state=m,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},i.resolve=d,i.reject=l,i.all=f,i.race=h},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function o(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function a(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function s(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function c(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function d(e){return new ge(function(t){var n=e.transaction(_e,Ee),r=i([""]);n.objectStore(_e).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function l(e){return"boolean"==typeof ye?ge.resolve(ye):d(e).then(function(e){return ye=e})}function f(e){var t=be[e.name],n={};n.promise=new ge(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function h(e){var t=be[e.name],n=t.deferredOperations.pop();if(n)return n.resolve(),n.promise}function p(e,t){var n=be[e.name],r=n.deferredOperations.pop();if(r)return r.reject(t),r.promise}function v(e,t){return new ge(function(n,r){if(be[e.name]=be[e.name]||O(),e.db){if(!t)return n(e.db);f(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=me.open.apply(me,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(_e)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),h(e)}})}function m(e){return v(e,!1)}function g(e){return v(e,!0)}function _(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function y(e){return new ge(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function b(e){return i([c(atob(e.data))],{type:e.type})}function w(e){return e&&e.__local_forage_encoded_blob}function $(e){var t=this,n=t._initReady().then(function(){var e=be[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return a(n,e,e),n}function E(e){f(e);for(var t=be[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,m(e).then(function(t){return e.db=t,_(e)?g(e):t}).then(function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r}).catch(function(t){throw p(e,t),t})}function S(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return ge.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),g(e)}).then(function(){return E(e).then(function(){S(e,t,n,r-1)})}).catch(n);n(i)}}function O(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function A(e){function t(){return ge.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];var o=be[r.name];o||(o=O(),be[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=$);for(var a=[],s=0;s<o.forages.length;s++){var u=o.forages[s];u!==n&&a.push(u._initReady().catch(t))}var c=o.forages.slice(0);return ge.all(a).then(function(){return r.db=o.db,m(r)}).then(function(e){return r.db=e,_(r,n._defaultConfig.version)?g(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<c.length;t++){var i=c[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function M(e,t){var n=this;e=s(e);var r=new ge(function(t,r){n.ready().then(function(){S(n._dbInfo,$e,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=a.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),w(e)&&(e=b(e)),t(e)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function x(e,t){var n=this,r=new ge(function(t,r){n.ready().then(function(){S(n._dbInfo,$e,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=a.openCursor(),u=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;w(r)&&(r=b(r));var i=e(r,n.key,u++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function T(e,t,n){var r=this;e=s(e);var i=new ge(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===we.call(t)?l(o.db).then(function(e){return e?t:y(t)}):t}).then(function(t){S(r._dbInfo,Ee,function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return o(i,n),i}function I(e,t){var n=this;e=s(e);var r=new ge(function(t,r){n.ready().then(function(){S(n._dbInfo,Ee,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=a.delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function C(e){var t=this,n=new ge(function(e,n){t.ready().then(function(){S(t._dbInfo,Ee,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n}function R(e){var t=this,n=new ge(function(e,n){t.ready().then(function(){S(t._dbInfo,$e,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=o.count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n}function N(e,t){var n=this,r=new ge(function(t,r){if(e<0)return void t(null);n.ready().then(function(){S(n._dbInfo,$e,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,u=a.openCursor();u.onsuccess=function(){var n=u.result;if(!n)return void t(null);0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e))},u.onerror=function(){r(u.error)}}catch(e){r(e)}})}).catch(r)});return o(r,t),r}function k(e){var t=this,n=new ge(function(e,n){t.ready().then(function(){S(t._dbInfo,$e,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=o.openCursor(),s=[];a.onsuccess=function(){var t=a.result;if(!t)return void e(s);s.push(t.key),t.continue()},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return o(n,e),n}function P(e,t){t=u.apply(this,arguments);var n=this.config();e="function"!=typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;if(e.name){var a=e.name===n.name&&i._dbInfo.db,s=a?ge.resolve(i._dbInfo.db):m(e).then(function(t){var n=be[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});r=e.storeName?s.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;f(e);var r=be[e.name],i=r.forages;t.close();for(var o=0;o<i.length;o++){var a=i[o];a._dbInfo.db=null,a._dbInfo.version=n}return new ge(function(t,r){var i=me.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,h(n._dbInfo)}}).catch(function(t){throw(p(e,t)||ge.resolve()).catch(function(){}),t})}}):s.then(function(t){f(e);var n=be[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++){r[i]._dbInfo.db=null}return new ge(function(t,n){var r=me.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)h(r[t]._dbInfo)}).catch(function(t){throw(p(e,t)||ge.resolve()).catch(function(){}),t})})}else r=ge.reject("Invalid arguments");return o(r,t),r}function j(e){var t,n,r,i,o,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),d=new Uint8Array(c);for(t=0;t<s;t+=4)n=Oe.indexOf(e[t]),r=Oe.indexOf(e[t+1]),i=Oe.indexOf(e[t+2]),o=Oe.indexOf(e[t+3]),d[u++]=n<<2|r>>4,d[u++]=(15&r)<<4|i>>2,d[u++]=(3&i)<<6|63&o;return c}function D(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=Oe[n[t]>>2],r+=Oe[(3&n[t])<<4|n[t+1]>>4],r+=Oe[(15&n[t+1])<<2|n[t+2]>>6],r+=Oe[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function L(e,t){var n="";if(e&&(n=Be.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===Be.call(e.buffer))){var r,i=xe;e instanceof ArrayBuffer?(r=e,i+=Ie):(r=e.buffer,"[object Int8Array]"===n?i+=Re:"[object Uint8Array]"===n?i+=Ne:"[object Uint8ClampedArray]"===n?i+=ke:"[object Int16Array]"===n?i+=Pe:"[object Uint16Array]"===n?i+=De:"[object Int32Array]"===n?i+=je:"[object Uint32Array]"===n?i+=Le:"[object Float32Array]"===n?i+=Ue:"[object Float64Array]"===n?i+=Fe:t(new Error("Failed to get type for BinaryArray"))),t(i+D(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=Ae+e.type+"~"+D(this.result);t(xe+Ce+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function U(e){if(e.substring(0,Te)!==xe)return JSON.parse(e);var t,n=e.substring(qe),r=e.substring(Te,qe);if(r===Ce&&Me.test(n)){var o=n.match(Me);t=o[1],n=n.substring(o[0].length)}var a=j(n);switch(r){case Ie:return a;case Ce:return i([a],{type:t});case Re:return new Int8Array(a);case Ne:return new Uint8Array(a);case ke:return new Uint8ClampedArray(a);case Pe:return new Int16Array(a);case De:return new Uint16Array(a);case je:return new Int32Array(a);case Le:return new Uint32Array(a);case Ue:return new Float32Array(a);case Fe:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}}function F(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function q(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new ge(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){F(i,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=He,i}function B(e,t,n,r,i,o){e.executeSql(n,r,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?o(e,a):F(e,t,function(){e.executeSql(n,r,i,o)},o)},o):o(e,a)},o)}function H(e,t){var n=this;e=s(e);var r=new ge(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){B(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function z(e,t){var n=this,r=new ge(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){B(n,i,"SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var u=o.item(s),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function G(e,t,n,r){var i=this;e=s(e);var a=new ge(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var s=t,u=i._dbInfo;u.serializer.serialize(t,function(t,c){c?a(c):u.db.transaction(function(n){B(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(G.apply(i,[e,s,n,r-1]));a(t)}})})}).catch(a)});return o(a,n),a}function V(e,t,n){return G.apply(this,[e,t,n,1])}function J(e,t){var n=this;e=s(e);var r=new ge(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){B(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function K(e){var t=this,n=new ge(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){B(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function Y(e){var t=this,n=new ge(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){B(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function W(e,t){var n=this,r=new ge(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){B(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return o(r,t),r}function X(e){var t=this,n=new ge(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){B(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return o(n,e),n}function Q(e){return new ge(function(t,n){e.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})},function(e,t){n(t)})},function(e){n(e)})})}function Z(e,t){t=u.apply(this,arguments);var n=this.config();e="function"!=typeof e&&e||{},e.name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return r=e.name?new ge(function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),t(e.storeName?{db:r,storeNames:[e.storeName]}:Q(r))}).then(function(e){return new ge(function(t,n){e.db.transaction(function(r){for(var i=[],o=0,a=e.storeNames.length;o<a;o++)i.push(function(e){return new ge(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}(e.storeNames[o]));ge.all(i).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):ge.reject("Invalid arguments"),o(r,t),r}function ee(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function te(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}function ne(){return!te()||localStorage.length>0}function re(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=ee(e,t._defaultConfig),ne()?(t._dbInfo=n,n.serializer=He,ge.resolve()):ge.reject()}function ie(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return o(n,e),n}function oe(e,t){var n=this;e=s(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return o(r,t),r}function ae(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(i),a++)))return c}}});return o(r,t),r}function se(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return o(r,t),r}function ue(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return o(n,e),n}function ce(e){var t=this,n=t.keys().then(function(e){return e.length});return o(n,e),n}function de(e,t){var n=this;e=s(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return o(r,t),r}function le(e,t,n){var r=this;e=s(e);var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new ge(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return o(i,n),i}function fe(e,t){if(t=u.apply(this,arguments),e="function"!=typeof e&&e||{},!e.name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return r=e.name?new ge(function(t){t(e.storeName?ee(e,i._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):ge.reject("Invalid arguments"),o(r,t),r}function he(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function pe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ke(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();"undefined"==typeof Promise&&e(3);var ge=Promise,_e="local-forage-detect-blob-support",ye=void 0,be={},we=Object.prototype.toString,$e="readonly",Ee="readwrite",Se={_driver:"asyncStorage",_initStorage:A,_support:function(){try{if(!me)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:x,getItem:M,setItem:T,removeItem:I,clear:C,length:R,key:N,keys:k,dropInstance:P},Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ae="~~local_forage_type~",Me=/^~~local_forage_type~([^~]+)~/,xe="__lfsc__:",Te=xe.length,Ie="arbf",Ce="blob",Re="si08",Ne="ui08",ke="uic8",Pe="si16",je="si32",De="ur16",Le="ui32",Ue="fl32",Fe="fl64",qe=Te+Ie.length,Be=Object.prototype.toString,He={serialize:L,deserialize:U,stringToBuffer:j,bufferToString:D},ze={_driver:"webSQLStorage",_initStorage:q,_support:function(){return"function"==typeof openDatabase}(),iterate:z,getItem:H,setItem:V,removeItem:J,clear:K,length:Y,key:W,keys:X,dropInstance:Z},Ge={_driver:"localStorageWrapper",_initStorage:re,_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:ae,getItem:oe,setItem:le,removeItem:de,clear:ie,length:ce,key:se,keys:ue,dropInstance:fe},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Je=function(e,t){for(var n=e.length,r=0;r<n;){if(Ve(e[r],t))return!0;r++}return!1},Ke=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ye={},We={},Xe={INDEXEDDB:Se,WEBSQL:ze,LOCALSTORAGE:Ge},Qe=[Xe.INDEXEDDB._driver,Xe.WEBSQL._driver,Xe.LOCALSTORAGE._driver],Ze=["dropInstance"],et=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ze),tt={description:"",driver:Qe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},nt=function(){function e(t){r(this,e);for(var n in Xe)if(Xe.hasOwnProperty(n)){var i=Xe[n],o=i._driver;this[n]=o,Ye[o]||this.defineDriver(i)}this._defaultConfig=pe({},tt),this._config=pe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":ve(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new ge(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var a=et.concat("_initStorage"),s=0,u=a.length;s<u;s++){var c=a[s];if((!Je(Ze,c)||e[c])&&"function"!=typeof e[c])return void n(i)}!function(){for(var t=0,n=Ze.length;t<n;t++){var r=Ze[t];e[r]||(e[r]=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=ge.reject(t);return o(n,arguments[arguments.length-1]),n}}(r))}}();var d=function(n){Ye[r]&&console.info("Redefining LocalForage driver: "+r),Ye[r]=e,We[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}});return a(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ye[e]?ge.resolve(Ye[e]):ge.reject(new Error("Driver not found."));return a(r,t,n),r},e.prototype.getSerializer=function(e){var t=ge.resolve(He);return a(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return a(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){s._config.driver=s.driver()}function i(e){return s._extend(e),r(),s._ready=s._initStorage(s._config),s._ready}function o(e){return function(){function t(){for(;n<e.length;){var o=e[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(o).then(i).catch(t)}r();var a=new Error("No available storage method found.");return s._driverSet=ge.reject(a),s._driverSet}var n=0;return t()}}var s=this;Ke(e)||(e=[e]);var u=this._getSupportedDrivers(e),c=null!==this._driverSet?this._driverSet.catch(function(){return ge.resolve()}):ge.resolve();return this._driverSet=c.then(function(){var e=u[0];return s._dbInfo=null,s._ready=null,s.getDriver(e).then(function(e){s._driver=e._driver,r(),s._wrapLibraryMethodsWithReady(),s._initDriver=o(u)})}).catch(function(){r();var e=new Error("No available storage method found.");return s._driverSet=ge.reject(e),s._driverSet}),a(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!We[e]},e.prototype._extend=function(e){pe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=et.length;e<t;e++)he(this,et[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),rt=new nt;t.exports=rt},{3:3}]},{},[4])(4)})}).call(t,n(19))},function(e,t,n){!function(r,i,o){e.exports=t=i(n(29),n(194),n(195))}(0,function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.algo,a=o.SHA1,s=o.HMAC,u=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=s.create(n.hasher,e),o=i.create(),a=i.create([1]),u=o.words,c=a.words,d=n.keySize,l=n.iterations;u.length<d;){var f=r.update(t).finalize(a);r.reset();for(var h=f.words,p=h.length,v=f,m=1;m<l;m++){v=r.finalize(v),r.reset();for(var g=v.words,_=0;_<p;_++)h[_]^=g[_]}o.concat(f),c[0]++}return o.sigBytes=4*d,o}});t.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)}}(),e.PBKDF2})},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){return function(){function t(e,t,n){for(var r=[],o=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,u=n[e.charCodeAt(a)]>>>6-a%4*2;r[o>>>2]|=(s|u)<<24-o%4*8,o++}return i.create(r,o)}var n=e,r=n.lib,i=r.WordArray,o=n.enc;o.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=t[o>>>2]>>>24-o%4*8&255,s=t[o+1>>>2]>>>24-(o+1)%4*8&255,u=t[o+2>>>2]>>>24-(o+2)%4*8&255,c=a<<16|s<<8|u,d=0;d<4&&o+.75*d<n;d++)i.push(r.charAt(c>>>6*(3-d)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var n=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(n=s)}return t(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(29),n(295))}(0,function(e){e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc,u=(s.Utf8,s.Base64),c=n.algo,d=c.EvpKDF,l=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?E:b}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),f=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),h=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=f.CBC=function(){function e(e,n,r){var i=this._iv;if(i){var o=i;this._iv=t}else var o=this._prevBlock;for(var a=0;a<r;a++)e[n+a]^=o[a]}var n=h.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),n.Decryptor=n.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),n}(),v=n.pad={},m=v.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var u=o.create(a,r);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:m}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),_=n.format={},y=_.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=o.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(u)},parse:function(e){var t=u.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=o.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:r})}},b=r.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return g.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=n.kdf={},$=w.OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var i=d.create({keySize:t+n}).compute(e,r),a=o.create(i.words.slice(t),4*n);return i.sigBytes=4*t,g.create({key:i,iv:a,salt:r})}},E=r.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:$}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=b.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,b.decrypt.call(this,e,t,i.key,r)}})}()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=Object.prototype.toString.call(e).split(" ")[1].replace("]",""),n=e;return"String"!==t&&(n=JSON.stringify(e)),""+t+v+n}function a(e){var t=e.match(m);if(!t)throw new h.default("Corrupted, cannot decode");var n=c(t,3),r=n[1],i=n[2];if("String"===r)return i;if("Undefined"!==r){var o=JSON.parse(i);return"Date"===r?new Date(o):o}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=n(297),l=r(d),f=n(291),h=r(f),p=n(31),v="~:~",m=new RegExp("^(.{4,9})"+v+"(.*)"),g=function(){function e(t){i(this,e),this._commands={},this._worker=(0,l.default)(M800_ENCRYPTED_STORAGE_WORKER_PATH),this._commandCount=0,this._worker.onmessage=this._onWorkerMessage.bind(this),this._inited=this._sendImmediateRequest("init",{key:t})}return u(e,[{key:"_hasInited",value:function(){return this._inited}},{key:"setItem",value:function(e,t){return this._sendRequest("setItem",{key:e,value:o(t)})}},{key:"getItem",value:function(e){return this._sendRequest("getItem",{key:e}).then(function(e){return a(e)})}},{key:"removeItem",value:function(e){return this._sendRequest("removeItem",{key:e})}},{key:"_sendImmediateRequest",value:function(e,t){var n=this;return new Promise(function(r,i){var o=++n._commandCount;n._commands[o]={resolve:r,reject:i},n._worker.postMessage({command:e,data:s({id:o},t)})})}},{key:"_sendRequest",value:function(e,t){var n=this;return this._hasInited().then(function(){return n._sendImmediateRequest(e,t)})}},{key:"_onWorkerMessage",value:function(e){var t=e.data,n=t.event,r=t.data,i=r.id,o=r.value,a=r.error;n.endsWith(":success")?(this._commands[i].resolve(o),delete this._commands[i]):n.endsWith(":failure")&&(this._commands[i].reject((0,p.deserializeError)(a)),delete this._commands[i])}}]),e}();t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=new(Function.prototype.bind.apply(e,[null].concat(r,n)));return(0,v.default)(o.init)&&o.init(),o}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),d=i(c),l=n(1),f=n(74),h=i(f),p=n(26),v=i(p),m=n(121),g=i(m),_=n(126),y=i(_),b=n(57),w=i(b),$=n(3),E=i($),S=n(588),O=i(S),A=n(301),M=i(A),x=n(602),T=i(x),I=n(230),C=n(41),R=n(37),N=r(R),k=n(105),P=r(k),j=n(603),D=i(j),L=n(308),U=i(L),F=n(605),q=i(F),B=n(606),H=i(B),z=n(620),G=i(z),V=n(628),J=i(V),K=n(635),Y=i(K),W=n(637),X=i(W),Q=n(313),Z=i(Q),ee=n(314),te=i(ee),ne=n(315),re=i(ne),ie=n(319),oe=i(ie),ae=n(320),se=i(ae),ue=n(322),ce=i(ue),de=n(293),le=i(de),fe=n(324),he=n(28),pe=i(he),ve=n(4),me=n(10),ge=n(661),_e=i(ge),ye=n(672),be=i(ye),we=10,$e=function(){function e(t,n,r){var i=this;o(this,e),(0,d.default)(this),(0,y.default)("appMeta",t,["applicationIdentifier","applicationVersion","applicationKey","applicationSecret","carrier"]),(0,w.default)("config",n,"'config' is required.");var a=n.imServers,u=n.signUpServers,c=n.verificationServers,f=n.tokenCallback,p=n.autoReconnect,m=n.multiTab,g=n.persistConnection,_=n.maxServerRetries,b=n.log;r=r||{},this._appMeta=t,this._config=n,this._singleTab=!1===m,this._connectionConfig={imServers:a,tokenCallback:f,maxServerRetries:_},this._userConfig={signUpServers:u,manageToken:!(0,v.default)(f),maxServerRetries:_},this._verificationConfig={verificationServers:c,maxServerRetries:_},this._initConfig=(0,h.default)(n,["imServers","signUpServers","verificationServers","multiTab","autoReconnect","persistConnection","messageSortingCriteria","maxConcurrency","log"]),void 0===p?this._autoReconnect=function(){return we}:(0,v.default)(p)?this._autoReconnect=p:this._autoReconnect=function(){return p},this._singleTab||(0,be.default)(),!0!==window.disableEncryptedBoshTransport&&(0,_e.default)();var $=ve.LoggerFactory.getInstance();$.setLevel(b&&b.level),this._logger=$.getLogger("core/Client"),this._serviceLocator=new T.default,this._moduleDefinitions={};var E=s({},this._getPresetModuleDefinitions(),r);if(this._prepare(E),g){var S=this.getConnection(),O=S.getLastSession();O&&S.connect(l.Strophe.getBareJidFromJid(O.jid),O.opts).catch(function(e){i._logger.warn(e)})}}return u(e,[{key:"addFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,E.default)("bundle",e,function(e){return e&&(0,me.isFunction)(e.getModuleDefinitions)},"Expect a valid M800 SDK bundle");var n=s({},e.getModuleDefinitions(this._appMeta,this._config),t);this._prepare(n,e.name)}},{key:"_getModuleDefinitions",value:function(){return this._moduleDefinitions}},{key:"_updateModuleDefinitions",value:function(e){this._moduleDefinitions=s({},this._moduleDefinitions,e)}},{key:"_getPresetModuleDefinitions",value:function(){return{tab:{deps:[],factory:a(D.default)},pm:{deps:["tab"],factory:a(this._singleTab?q.default:U.default)},config:{deps:[],factory:a(te.default,this._appMeta,this._initConfig)},stateSync:{deps:["pm"],factory:a(O.default,{singleTab:this._singleTab})},account:{deps:["pm","service.user","config","connection"],factory:a(Z.default,this._appMeta,this._userConfig)},connection:{deps:["pm","stateSync","service.connect","service.user","storage","config"],factory:a(M.default,this._appMeta,this._connectionConfig)},contact:{deps:["pm","connection","service.contact","storage"],factory:a(re.default,{applicationKey:this._appMeta.applicationKey})},device:{deps:["pm","connection","service.user","storage"],factory:a(oe.default)},file:{deps:["pm","connection","service.file"],factory:a(se.default,this._appMeta.applicationIdentifier)},media:{deps:[],factory:a(ce.default)},rate:{deps:[],factory:a(fe.M800RateProvider)},storage:{deps:[],factory:a(le.default)},"plugin.pubsub":{deps:[],factory:function(){return pe.default}},"service.config":{deps:[],factory:function(){return{getXmppTimeout:function(){return 6e3}}}},"service.connect":{deps:["plugin.pubsub"],factory:a(G.default)},"service.user":{deps:["plugin.pubsub","service.connect","service.notification","service.config"],factory:a(H.default)},"service.contact":{deps:["plugin.pubsub","service.connect"],factory:a(Y.default)},"service.notification":{deps:["plugin.pubsub"],factory:a(J.default)},"service.file":{deps:["service.connect"],factory:a(X.default)}}}},{key:"_prepare",value:function(e,t){var n=this,r=this.getServiceLocator(),i=Object.keys(e);i.forEach(function(t){var n=e[t],i=n.deps,o=n.factory;r.factory(t,i,o)}),this._updateModuleDefinitions(e);var o=[];i.forEach(function(e){o.push(r.getAsync(e))}),Promise.all(o).then(function(){t?n.emit(I.FEATURE_READY,t):n.emit(I.READY)})}},{key:"_handleStatusChanged",value:function(e){var t=e.status,n=e.reason;if(t===N.CONNECTING)return void clearTimeout(this._reconnectTimer);t===N.DISCONNECTED&&n&&n.type===P.NETWORK&&this._reconnect()}},{key:"_reconnect",value:function(){var e=this,t=this._getReconnectTimeout();t>=0&&(this._reconnectTimer=setTimeout(function(){e.connection.getStatus()===N.DISCONNECTED&&e.connection.reconnect()},1e3*t))}},{key:"_getReconnectTimeout",value:function(){var e=this._autoReconnect();return!0===e?we:(0,g.default)(e)?e:-1}},{key:"getServiceLocator",value:function(){return this._serviceLocator}},{key:"getConnection",value:function(){return this.connection||(this.connection=this._serviceLocator.get("connection"),this.connection.on(C.STATUS_CHANGED,this._handleStatusChanged.bind(this))),this.connection}}]),e}();t.default=$e,e.exports=t.default},function(e,t,n){"use strict";var r,i=n(572),o=n(580),a=n(581),s=n(582);r=e.exports=function(e,t){var n,r,a,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=a=!0,r=!1):(n=s.call(e,"c"),r=s.call(e,"e"),a=s.call(e,"w")),c={value:t,configurable:n,enumerable:r,writable:a},u?i(o(u),c):c},r.gs=function(e,t,n){var r,u,c,d;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:a(t)?null==n?n=void 0:a(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(r=!0,u=!1):(r=s.call(e,"c"),u=s.call(e,"e")),d={get:t,set:n,configurable:r,enumerable:u},c?i(o(c),d):d}},function(e,t,n){"use strict";e.exports=n(573)()?Object.assign:n(574)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(575),i=n(579),o=Math.max;e.exports=function(e,t){var n,a,s,u=o(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<u;++a)t=arguments[a],r(t).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(576)()?Object.keys:n(577)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(198),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(198);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var r=n(198),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&a(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";e.exports=n(583)()?String.prototype.contains:n(584)},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!(0,u.default)(n))throw new p.default("Required keys should be an array of field names.");if(!(0,d.default)(t))throw new p.default('Argument or variable "'+e+'" should be an object.');var r=n.map(function(e){return{key:e,value:t[e]}}).filter(function(e){var t=e.value;return(0,a.default)(t)}).map(function(e){return e.key}),o=r.join(", "),s='Argument or variable "'+e+"\" doesn't have required fields: "+o+".";return(0,f.default)(i,e,r,function(e){return 0===e.length},s)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(118),a=r(o),s=n(2),u=r(s),c=n(9),d=r(c);t.default=i;var l=n(191),f=r(l),h=n(189),p=r(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'Argument or variable "'+e+'" should not be null or undefined.';return(0,d.default)(i,e,t,(0,a.default)(u.default),n)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(117),a=r(o),s=n(118),u=r(s);t.default=i;var c=n(191),d=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),c=r(u),d=n(5),l=r(d),f=n(298),h=n(4),p=n(187),v=n(11),m=n(14),g=h.LoggerFactory.getInstance().getLogger("core/StateSynchronizer"),_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),(0,l.default)(this),this._pm=t,this._state=a({},n.initialState),this._storage=n.singleTab?sessionStorage:localStorage,this._lastUpdate=0}return s(e,[{key:"init",value:function(){var e=this;try{var t=JSON.parse(this._storage.getItem(m.APP_STATE));Object.assign(this._state,t.state),this._lastUpdate=t.ts}catch(e){g.warn("[StateSynchronizer] State is not recoverable")}this._pm.on(v.MESSAGE_RECEIVED,function(t){var n=t.message,r=n.event,i=n.payload;"StateSynchronizer:stateChange"!==r||i.ts<e._lastUpdate||0===i.diff.length||(e._lastUpdate=i.ts,e._state=(0,f.applyPatch)(e._state,i.diff),e.emit(p.STATE_CHANGED,e._state))})}},{key:"setState",value:function(e,t){var n=void 0;n=(0,c.default)(e)?Object.assign({},this._state,i({},e,t)):Object.assign({},this._state,e);var r=(0,f.diff)(this._state,n,2);if(0!==r.length){var o=this._lastUpdate=Date.now();this._storage.setItem(m.APP_STATE,JSON.stringify({ts:o,state:n})),this._state=n,this.emit(p.STATE_CHANGED,n),this._pm.broadcast({event:"StateSynchronizer:stateChange",payload:{ts:o,diff:r}})}}},{key:"getState",value:function(e){return e?this._state[e]:this._state}}]),e}();_.STATE_CHANGED=p.STATE_CHANGED,t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return p||(p=(0,c.default)({level:u.LogLevel.Info,streams:[new h.ConsoleStream]})),p}function a(){return v||(v=o().child({name:"m800-web-sdk"})),v}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerFactory=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getDefaultLogger=a;var u=n(106),c=r(u),d=n(10),l=n(299),f=r(l),h=n(300),p=void 0,v=void 0,m=void 0;t.LoggerFactory=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.LogLevel.Info,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();i(this,e),this._minLogLevel=t,this._defaultLogger=n,this._rootLogger=r}return s(e,[{key:"setLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.LogLevel.Info;this._minLogLevel=e,this._rootLogger.getPinoLogger().level=e}},{key:"getLogger",value:function(e){var t=void 0;return t=(0,d.isObject)(e)?e.constructor.name:(0,d.isString)(e)?e:Array.isArray(e)?e.join("/"):e.name,new f.default(this._defaultLogger,{component:t})}}],[{key:"getInstance",value:function(){return m||(m=new e),m}}]),e}()},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(179),u=i(s),c=n(55),d=i(c),l=n(271),f=i(l),h=n(8),p=i(h),v=n(591),m=i(v),g=n(106),_=(0,m.default)(g.LogLevelValue),y={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"},b=function(){function e(t){o(this,e),this[g.NEEDS_METADATA]=!0;var n=(0,u.default)(t||{},{console:r.console}),i=n.console;this._console=i}return a(e,[{key:"write",value:function(e){var t=this._console[_[this.lastLevel]]||this._console.log;_[this.lastLevel]===g.LogLevel.Trace&&(t=this._console.debug||this._console.log);var n=(0,d.default)(this.lastObj,["msg","level","time","err","name","component"]),r=this.lastObj,i=r.time,o=r.name,a=r.component,s=""+new Date(i).toLocaleString("en-HK",y),u=""+[o,a].filter(function(e){return(0,p.default)(e)&&e.length>0}).join("/"),c=(0,p.default)(e)&&e.length>0?["["+s+"] "+_[this.lastLevel].toUpperCase()+" ("+u+"): "+e]:[];this.lastObj&&this.lastObj.err instanceof Error&&c.push(this.lastObj.err),(0,f.default)(n)||c.push(n),t.apply(void 0,c)}}]),e}();t.default=b,e.exports=t.default}).call(t,n(19))},function(e,t,n){var r=n(227),i=n(592),o=n(51),a=Object.prototype,s=a.toString,u=i(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),e[t]=n},r(o));e.exports=u},function(e,t,n){function r(e,t){return function(n,r){return i(n,e,t(r),{})}}var i=n(593);e.exports=r},function(e,t,n){function r(e,t,n,r){return i(e,function(e,i,o){t(r,n(e),i,o)}),r}var i=n(246);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){if(r(this,e),!t)throw new Error("`emitter` is not an object");if(this.emitter=t,"function"==typeof t.off)this.removeListenerFromEmitter=t.off.bind(t);else{if("function"!=typeof t.removeListener)throw new Error("`emitter` is not a valid event emitter");this.removeListenerFromEmitter=t.removeListener.bind(t)}this.eventHandler={},this.onceHandler={}}return i(e,[{key:"add",value:function(e,t){var n=this.eventHandler[e];n||(n=[],this.eventHandler[e]=n),n.push(t),this.emitter.on(e,t)}},{key:"once",value:function(e,t){var n=this.onceHandler[e];n||(n={},this.onceHandler[e]=n);var r=function(){n[t]=null,t()};n[t]=r,this.emitter.once(e,r)}},{key:"remove",value:function(e,t){var n=this;if(t){var r=this.onceHandler[e];if(r){var i=r[t];if(i)return this.removeListenerFromEmitter(e,i),void(r[t]=null)}return void this.removeListenerFromEmitter(e,t)}var o=this.eventHandler[e];o&&(o.forEach(function(t){n.removeListenerFromEmitter(e,t)}),this.eventHandler[e]=null);var a=this.onceHandler[e];if(a){Object.keys(a).forEach(function(t){n.removeListenerFromEmitter(e,a[t])}),this.onceHandler[e]=null}}},{key:"reset",value:function(){var e=this;Object.keys(this.eventHandler).forEach(function(t){e.remove(t)}),Object.keys(this.onceHandler).forEach(function(t){e.remove(t)}),this.eventHandler={},this.onceHandler={}}}]),e}();t.default=o,e.exports=t.default},function(e,t){e.exports={country_phone_code_to_countries:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","[46]\\d{4}|[01589]\\d{5}"],AD:["376","[16]\\d{5,8}|[37-9]\\d{5}",[["(\\d{3})(\\d{3})","$1 $2",["[137-9]|6[0-8]"]],["(\\d{4})(\\d{4})","$1 $2",["180","180[02]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["690"]]]],AE:["971","[2-79]\\d{7,8}|800\\d{2,9}",[["([2-4679])(\\d{3})(\\d{4})","$1 $2 $3",["[2-4679][2-8]"]],["(5\\d)(\\d{3})(\\d{4})","$1 $2 $3",["5"]],["([479]00)(\\d)(\\d{5})","$1 $2 $3",["[479]00"],"$1"],["([68]00)(\\d{2,9})","$1 $2",["[68]00"],"$1"]],"0","0$1"],AF:["93","[2-7]\\d{8}",[["([2-7]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"]]],"0","0$1"],AG:["1","[2589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"268"],AI:["1","[2589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"264"],AL:["355","[2-57]\\d{7}|6\\d{8}|8\\d{5,7}|9\\d{5}",[["(4)(\\d{3})(\\d{4})","$1 $2 $3",["4[0-6]"]],["(6\\d)(\\d{3})(\\d{4})","$1 $2 $3",["6"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4[7-9]"]],["(\\d{3})(\\d{3,5})","$1 $2",["[235][16-9]|[79]|8[016-9]"]]],"0","0$1"],AM:["374","[1-9]\\d{7}",[["(\\d{2})(\\d{6})","$1 $2",["1|47"]],["(\\d{2})(\\d{6})","$1 $2",["4[1349]|[5-7]|88|9[1-9]"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23]"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8|90"],"0 $1"]],"0","(0$1)"],AO:["244","[29]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3"]]],AR:["54","11\\d{8}|[2368]\\d{9}|9\\d{10}",[["([68]\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"]],["(9)(11)(\\d{4})(\\d{4})","$2 15-$3-$4",["911"],null,null,"$1 $2 $3-$4"],["(9)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9(?:2[2-4689]|3[3-8])","9(?:2(?:2[013]|3[067]|49|6[01346]|8|9[147-9])|3(?:36|4[1-358]|5[138]|6|7[069]|8[013578]))","9(?:2(?:2(?:0[013-9]|[13])|3(?:0[013-9]|[67])|49|6(?:[0136]|4[0-59])|8|9(?:[19]|44|7[013-9]|8[14]))|3(?:36|4(?:[12]|3[4-6]|[58]4)|5(?:1|3[0-24-689]|8[46])|6|7[069]|8(?:[01]|34|[578][45])))","9(?:2(?:2(?:0[013-9]|[13])|3(?:0[013-9]|[67])|49|6(?:[0136]|4[0-59])|8|9(?:[19]|44|7[013-9]|8[14]))|3(?:36|4(?:[12]|3(?:4|5[014]|6[1-39])|[58]4)|5(?:1|3[0-24-689]|8[46])|6|7[069]|8(?:[01]|34|[578][45])))"],null,null,"$1 $2 $3-$4"],["(9)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9[23]"],null,null,"$1 $2 $3-$4"],["(11)(\\d{4})(\\d{4})","$1 $2-$3",["11"],null,"true"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["2(?:2[013]|3[067]|49|6[01346]|8|9[147-9])|3(?:36|4[1-358]|5[138]|6|7[069]|8[013578])","2(?:2(?:0[013-9]|[13])|3(?:0[013-9]|[67])|49|6(?:[0136]|4[0-59])|8|9(?:[19]|44|7[013-9]|8[14]))|3(?:36|4(?:[12]|3[4-6]|[58]4)|5(?:1|3[0-24-689]|8[46])|6|7[069]|8(?:[01]|34|[578][45]))","2(?:2(?:0[013-9]|[13])|3(?:0[013-9]|[67])|49|6(?:[0136]|4[0-59])|8|9(?:[19]|44|7[013-9]|8[14]))|3(?:36|4(?:[12]|3(?:4|5[014]|6[1-39])|[58]4)|5(?:1|3[0-24-689]|8[46])|6|7[069]|8(?:[01]|34|[578][45]))"],null,"true"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["[23]"],null,"true"]],"0","0$1","0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))?15)?","9$1"],AS:["1","[5689]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"684"],AT:["43","[1-9]\\d{3,12}",[["(116\\d{3})","$1",["116"],"$1"],["(1)(\\d{3,12})","$1 $2",["1"]],["(5\\d)(\\d{3,5})","$1 $2",["5[079]"]],["(5\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["5[079]"]],["(5\\d)(\\d{4})(\\d{4,7})","$1 $2 $3",["5[079]"]],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:[28]0|32)|[89]"]],["(\\d{4})(\\d{3,9})","$1 $2",["2|3(?:1[1-578]|[3-8])|4[2378]|5[2-6]|6(?:[12]|4[1-9]|5[468])|7(?:[24][1-8]|35|[5-79])"]]],"0","0$1"],AU:["61","1\\d{4,9}|[2-578]\\d{8}",[["([2378])(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|[45]"],"0$1"],["(16)(\\d{3,4})","$1 $2",["16"],"0$1"],["(16)(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(1[389]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["1[389]0","1(?:[38]0|9)0"]],["(180)(2\\d{3})","$1 $2",["180","1802"]],["(19\\d)(\\d{3})","$1 $2",["19[13]"]],["(19\\d{2})(\\d{4})","$1 $2",["19[679]"]],["(13)(\\d{2})(\\d{2})","$1 $2 $3",["13[1-9]"]]],"0",null,null,null,null,null,["[237]\\d{8}|8(?:51(?:0(?:0[03-9]|[1247]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-6])|1(?:1[69]|[23]\\d|4[0-4]))|[6-8]\\d{4}|9(?:[02-9]\\d{3}|1(?:[0-57-9]\\d{2}|6[0135-9]\\d)))\\d{3}","14(?:5\\d|71)\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[6-9]|7[02-9]|8[12457-9]|9[017-9])\\d{6}","180(?:0\\d{3}|2)\\d{3}","19(?:0[0126]\\d|[679])\\d{5}","500\\d{6}",null,null,"16\\d{3,7}","550\\d{6}","13(?:00\\d{3}|45[0-4]|\\d)\\d{3}"]],AW:["297","[25-9]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],AX:["358","1\\d{5,11}|[35]\\d{5,9}|2\\d{4,9}|4\\d{5,10}|6\\d{7,9}|7\\d{4,9}|8\\d{6,9}",[["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[6-8])0"]],["(75\\d{3})","$1",["75[12]"]],["(116\\d{3})","$1",["116"],"$1"],["(\\d{2})(\\d{4,10})","$1 $2",["[14]|2[09]|50|7[135]"]],["(\\d)(\\d{4,11})","$1 $2",["[25689][1-8]|3"]]],"0",null,null,null,null,null,["18[1-8]\\d{3,9}","4\\d{5,10}|50\\d{4,8}","800\\d{4,7}","[67]00\\d{5,6}",null,null,"[13]0\\d{4,8}|2(?:0(?:[016-8]\\d{3,7}|[2-59]\\d{2,7})|9\\d{4,8})|60(?:[12]\\d{5,6}|6\\d{7})|7(?:1\\d{7}|3\\d{8}|5[03-9]\\d{2,7})"]],AZ:["994","[1-9]\\d{8}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2(?:[0-36]|[45]2)|365"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[4-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"]],"0","(0$1)"],BA:["387","[3-9]\\d{7,8}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-356]|[7-9]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6[047]"]]],"0","0$1"],BB:["1","[2589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"246"],BD:["880","[2-79]\\d{5,9}|1\\d{9}|8[0-7]\\d{4,8}",[["(2)(\\d{7,8})","$1-$2",["2"]],["(\\d{2})(\\d{4,6})","$1-$2",["[3-79]1"]],["(\\d{4})(\\d{3,6})","$1-$2",["1|3(?:0|[2-58]2)|4(?:0|[25]2|3[23]|[4689][25])|5(?:[02-578]2|6[25])|6(?:[0347-9]2|[26][25])|7[02-9]2|8(?:[023][23]|[4-7]2)|9(?:[02][23]|[458]2|6[016])"]],["(\\d{3})(\\d{3,7})","$1-$2",["[3-79][2-9]|8"]]],"0","0$1"],BE:["32","[1-9]\\d{7,8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4[6-9]"]],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[23]|4[23]|9[2-4]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[156]|7[018]|8(?:0[1-9]|[1-79])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"]]],"0","0$1"],BF:["226","[25-7]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],BG:["359","[23567]\\d{5,7}|[489]\\d{6,8}",[["(2)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"]],["(2)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"]],["(\\d{3})(\\d{4})","$1 $2",["43[124-7]|70[1-9]"]],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[124-7]|70[1-9]"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[78]00"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["99[69]"]],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"]],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["48|8[7-9]|9[08]"]]],"0","0$1"],BH:["973","[136-9]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2"]]],BI:["257","[267]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],BJ:["229","[2689]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"]]]],BL:["590","[56]\\d{8}",[["([56]\\d{2})(\\d{2})(\\d{4})","$1 $2-$3",["590|69[01]"]]],"0",null,null,null,null,null,["590(?:2[7-9]|5[12]|87)\\d{4}","69(?:0\\d{2}|1(?:2[29]|3[0-5]))\\d{4}"]],BM:["1","[4589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"441"],BN:["673","[2-578]\\d{6}",[["([2-578]\\d{2})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","[23467]\\d{7}|8\\d{8}",[["([234])(\\d{7})","$1 $2",["[2-4]"]],["([67]\\d{7})","$1",["[67]"]],["(800)(\\d{2})(\\d{4})","$1 $2 $3",["800"]]],"0",null,"0(1\\d)?"],BQ:["599","[347]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2",["[13-7]"]],["(9)(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],null,null,null,null,null,null,["(?:318[023]|41(?:6[023]|70)|7(?:1[578]|50)\\d)\\d{3}","(?:31(?:8[14-8]|9[14578])|416[145-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}"]],BR:["55","[1-46-9]\\d{7,10}|5(?:[0-4]\\d{7,9}|5(?:[2-8]\\d{7}|9\\d{7,8}))",[["(\\d{4})(\\d{4})","$1-$2",["300|40[02]","300|40(?:0|20)"]],["([3589]00)(\\d{2,3})(\\d{4})","$1 $2 $3",["[3589]00"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["[1-9][1-9]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[1-9][1-9]9"],"($1)"]],"0",null,"0(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","[2589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"242"],BT:["975","[1-8]\\d{6,7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1|77"]],["([2-8])(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]]]],BW:["267","[2-79]\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2",["[2-6]"]],["(7\\d)(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(90)(\\d{5})","$1 $2",["90"]]]],BY:["375","[1-4]\\d{8}|8(?:0(?:0\\d{3,7}|[13]\\d{7})|(?:10|20\\d)\\d{7})|9\\d{9,10}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["17[0-3589]|2[4-9]|[34]","17(?:[02358]|1[0-2]|9[0189])|2[4-9]|[34]"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:5[24]|6[235]|7[467])|2(?:1[246]|2[25]|3[26])","1(?:5[24]|6(?:2|3[04-9]|5[0346-9])|7(?:[46]|7[37-9]))|2(?:1[246]|2[25]|3[26])"],"8 0$1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["([89]\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8[01]|9"],"8 $1"],["(82\\d)(\\d{4})(\\d{4})","$1 $2 $3",["82"],"8 $1"],["(800)(\\d{3})","$1 $2",["800"],"8 $1"],["(800)(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"]],"8",null,"8?0?"],BZ:["501","[2-8]\\d{6}|0\\d{10}",[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(0)(800)(\\d{4})(\\d{3})","$1-$2-$3-$4",["080","0800"]]]],CA:["1","[2-9]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,null,["(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|65)|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|48|79|8[17])|6(?:0[04]|13|22|39|47)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}","900[2-9]\\d{6}","5(?:(?:00|22|33|44|66|77|88)[2-9]|21[23])\\d{6}"]],CC:["61","[1458]\\d{5,9}",[["([2378])(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|[45]"],"0$1"],["(16)(\\d{3,4})","$1 $2",["16"],"0$1"],["(16)(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(1[389]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["1[389]0","1(?:[38]0|9)0"]],["(180)(2\\d{3})","$1 $2",["180","1802"]],["(19\\d)(\\d{3})","$1 $2",["19[13]"]],["(19\\d{2})(\\d{4})","$1 $2",["19[679]"]],["(13)(\\d{2})(\\d{2})","$1 $2 $3",["13[1-9]"]]],"0",null,null,null,null,null,["8(?:51(?:0(?:02|31|60)|118)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:08|22|68)|4[29]8|62\\d|70[23]|959))\\d{3}","14(?:5\\d|71)\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[6-9]|7[02-9]|8[12547-9]|9[017-9])\\d{6}","180(?:0\\d{3}|2)\\d{3}","19(?:0[0126]\\d|[679])\\d{5}","500\\d{6}",null,null,null,"550\\d{6}","13(?:00\\d{2})?\\d{4}"]],CD:["243","[2-6]\\d{6}|[18]\\d{6,8}|9\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["12"]],["([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8[0-2459]|9"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"]],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"]]],"0","0$1"],CF:["236","[278]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],CG:["242","[028]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["801"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["800"]]]],CH:["41","[2-9]\\d{8}|860\\d{9}",[["([2-9]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]|[89]1"]],["([89]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["860"]]],"0","0$1"],CI:["225","[02-8]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],CK:["682","[2-8]\\d{4}",[["(\\d{2})(\\d{3})","$1 $2"]]],CL:["56","1230\\d{7}|[2-46-9]\\d{8,10}|5[1-3578]\\d{7}",[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[23]"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[357]|4[1-35]|6[13-57]"],"($1)"],["(9)(\\d{4})(\\d{4})","$1 $2 $3",["9"]],["(44)(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["([68]00)(\\d{3})(\\d{3,4})","$1 $2 $3",["[68]00"],"$1"],["(600)(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["600"],"$1"],["(1230)(\\d{3})(\\d{4})","$1 $2 $3",["123","1230"],"$1"],["(\\d{5})(\\d{4})","$1 $2",["219"],"($1)"]],"0","0$1","0|(1(?:1[0-69]|2[0-57]|5[13-58]|69|7[0167]|8[018]))"],CM:["237","[2368]\\d{7,8}",[["([26])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[23]|88"]]]],CN:["86","[1-7]\\d{6,11}|8[0-357-9]\\d{6,9}|9\\d{7,10}",[["([48]00)(\\d{3})(\\d{4})","$1 $2 $3",["[48]00"]],["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2\\d)[19]","(?:10|2\\d)(?:10|9[56])","(?:10|2\\d)(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["[3-9]","[3-9]\\d\\d[19]","[3-9]\\d\\d(?:10|9[56])"],"0$1"],["(21)(\\d{4})(\\d{4,6})","$1 $2 $3",["21"],"0$1","true"],["([12]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["10[1-9]|2[02-9]","10[1-9]|2[02-9]","10(?:[1-79]|8(?:0[1-9]|[1-9]))|2[02-9]"],"0$1","true"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:1[02-9]|35|49|5|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|[35][2-9]|6[47-9]|7|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[04-9]|4[3-6]|6[2368])|8(?:1[236-8]|2[5-7]|3|5[1-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])"],"0$1","true"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["3(?:11|7[179])|4(?:[15]1|3[1-35])|5(?:1|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[457]|6[09])|8(?:[57]1|98)"],"0$1","true"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["807","8078"],"0$1","true"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1(?:[3-57-9]|66)"]],["(10800)(\\d{3})(\\d{4})","$1 $2 $3",["108","1080","10800"]],["(\\d{3})(\\d{7,8})","$1 $2",["950"]]],"0",null,"(1(?:[129]\\d{3}|79\\d{2}))|0"],CO:["57","(?:[13]\\d{0,3}|[24-8])\\d{7}",[["(\\d)(\\d{7})","$1 $2",["1(?:[2-7]|8[2-9]|9[0-3])|[24-8]","1(?:[2-7]|8[2-9]|9(?:09|[1-3]))|[24-8]"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3"]],["(1)(\\d{3})(\\d{7})","$1-$2-$3",["1(?:80|9[04])","1(?:800|9(?:0[01]|4[78]))"],"0$1",null,"$1 $2 $3"]],"0",null,"0([3579]|4(?:44|56))?"],CR:["506","[24-9]\\d{7,9}",[["(\\d{4})(\\d{4})","$1 $2",["[24-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]0"]]],null,null,"(19(?:0[012468]|1[09]|20|66|77|99))"],CU:["53","[2-57]\\d{5,7}",[["(\\d)(\\d{6,7})","$1 $2",["7"]],["(\\d{2})(\\d{4,6})","$1 $2",["[2-4]"]],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"]],"0","(0$1)"],CV:["238","[259]\\d{6}",[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3"]]],CW:["599","[134679]\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2",["[13-7]"]],["(9)(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],null,null,null,null,null,null,["9(?:[48]\\d{2}|50\\d|7(?:2[0-24]|[34]\\d|6[35-7]|77|8[7-9]))\\d{4}","9(?:5(?:[12467]\\d|3[01])|6(?:[15-9]\\d|3[01]))\\d{4}",null,null,null,null,null,"955\\d{5}",null,"60[0-2]\\d{4}"]],CX:["61","[1458]\\d{5,9}",[["([2378])(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|[45]"],"0$1"],["(16)(\\d{3,4})","$1 $2",["16"],"0$1"],["(16)(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(1[389]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["1[389]0","1(?:[38]0|9)0"]],["(180)(2\\d{3})","$1 $2",["180","1802"]],["(19\\d)(\\d{3})","$1 $2",["19[13]"]],["(19\\d{2})(\\d{4})","$1 $2",["19[679]"]],["(13)(\\d{2})(\\d{2})","$1 $2 $3",["13[1-9]"]]],"0",null,null,null,null,null,["8(?:51(?:0(?:01|30|59)|117)|91(?:00[6-9]|1(?:21|49|78|81)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}","14(?:5\\d|71)\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[6-9]|7[02-9]|8[12547-9]|9[017-9])\\d{6}","180(?:0\\d{3}|2)\\d{3}","19(?:0[0126]\\d|[679])\\d{5}","500\\d{6}",null,null,null,"550\\d{6}","13(?:00\\d{2})?\\d{4}"]],CY:["357","[257-9]\\d{7}",[["(\\d{2})(\\d{6})","$1 $2"]]],CZ:["420","[2-8]\\d{8}|9\\d{8,11}",[["([2-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(96\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["96"]],["(9\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9[36]"]]]],DE:["49","[1-35-9]\\d{3,14}|4(?:[0-8]\\d{3,12}|9(?:[0-37]\\d|4(?:[1-35-8]|4\\d?)|5\\d{1,2}|6[1-8]\\d?)\\d{2,8})",[["(1\\d{2})(\\d{7,8})","$1 $2",["1[67]"]],["(15\\d{3})(\\d{6})","$1 $2",["15[0568]"]],["(1\\d{3})(\\d{7})","$1 $2",["15"]],["(\\d{2})(\\d{3,11})","$1 $2",["3[02]|40|[68]9"]],["(\\d{3})(\\d{3,11})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14]|[4-9]1)|3(?:[35-9][15]|4[015])|[4-8][1-9]1|9(?:06|[1-9]1)"]],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|[7-9](?:0[1-9]|[1-9])","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|[46][1246]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|3[1357]|4[13578]|6[1246]|7[1356]|9[1346])|5(?:0[14]|2[1-3589]|3[1357]|[49][1246]|6[1-4]|7[1346]|8[13568])|6(?:0[356]|2[1-489]|3[124-6]|4[1347]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|3[1357]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|4[1347]|6[0135-9]|7[1467]|8[136])|9(?:0[12479]|2[1358]|3[1357]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|[7-9](?:0[1-9]|[1-9])"]],["(3\\d{4})(\\d{1,10})","$1 $2",["3"]],["(800)(\\d{7,12})","$1 $2",["800"]],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:37|80)|900","1(?:37|80)|900[1359]"]],["(1\\d{2})(\\d{5,11})","$1 $2",["181"]],["(18\\d{3})(\\d{6})","$1 $2",["185","1850","18500"]],["(18\\d{2})(\\d{7})","$1 $2",["18[68]"]],["(18\\d)(\\d{8})","$1 $2",["18[2-579]"]],["(700)(\\d{4})(\\d{4})","$1 $2 $3",["700"]],["(138)(\\d{4})","$1 $2",["138"]],["(15[013-68])(\\d{2})(\\d{8})","$1 $2 $3",["15[013-68]"]],["(15[279]\\d)(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"]],["(1[67]\\d)(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"]]],"0","0$1"],DJ:["253","[27]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],DK:["45","[2-9]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],DM:["1","[57-9]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"767"],DO:["1","[589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"8[024]9"],DZ:["213","(?:[1-4]|[5-9]\\d)\\d{7}",[["([1-4]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"]],["([5-8]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"]],["(9\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"]]],"0","0$1"],EC:["593","1\\d{9,10}|[2-8]\\d{7}|9\\d{8}",[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[247]|[356][2-8]"],null,null,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(1800)(\\d{3})(\\d{3,4})","$1 $2 $3",["180","1800"],"$1"]],"0","(0$1)"],EE:["372","[3-9]\\d{6,7}|800\\d{6,7}",[["([3-79]\\d{2})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]"]],["(70)(\\d{2})(\\d{4})","$1 $2 $3",["70"]],["(8000)(\\d{3})(\\d{3})","$1 $2 $3",["800","8000"]],["([458]\\d{3})(\\d{3,4})","$1 $2",["40|5|8(?:00|[1-5])","40|5|8(?:00[1-9]|[1-5])"]]]],EG:["20","1\\d{4,9}|[24-6]\\d{8}|3\\d{7}|[89]\\d{8,9}",[["(\\d)(\\d{7,8})","$1 $2",["[23]"]],["(\\d{2})(\\d{6,7})","$1 $2",["1(?:3|5[239])|[4-6]|[89][2-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1[0-25]|[89]00"]]],"0","0$1"],EH:["212","[5-9]\\d{8}",[["([5-7]\\d{2})(\\d{6})","$1-$2",["5(?:2[015-7]|3[0-4])|[67]"]],["([58]\\d{3})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|92)|892","5(?:2(?:[2-48]|9[0-7])|3(?:[5-79]|8[0-7])|924)|892"]],["(5\\d{4})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]"]],["([5]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:4[067]|5[03])"]],["(8[09])(\\d{7})","$1-$2",["8(?:0|9[013-9])"]]],"0",null,null,null,null,"528[89]"],ER:["291","[178]\\d{6}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3"]],"0","0$1"],ES:["34","[5-9]\\d{8}",[["([89]00)(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["([5-9]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[568]|[79][0-8]"]]]],ET:["251","[1-59]\\d{8}",[["([1-59]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"]]],"0","0$1"],FI:["358","1\\d{4,11}|[2-9]\\d{4,10}",[["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[6-8])0"]],["(75\\d{3})","$1",["75[12]"]],["(116\\d{3})","$1",["116"],"$1"],["(\\d{2})(\\d{4,10})","$1 $2",["[14]|2[09]|50|7[135]"]],["(\\d)(\\d{4,11})","$1 $2",["[25689][1-8]|3"]]],"0","0$1",null,null,null,null,["1(?:[3569][1-8]\\d{3,9}|[47]\\d{5,10})|2[1-8]\\d{3,9}|3(?:[1-8]\\d{3,9}|9\\d{4,8})|[5689][1-8]\\d{3,9}","4(?:[0-8]\\d{4,9}|9\\d{3,8})|50\\d{4,8}","800\\d{4,7}","[67]00\\d{5,6}",null,null,"[13]0\\d{4,8}|2(?:0(?:[016-8]\\d{3,7}|[2-59]\\d{2,7})|9\\d{4,8})|60(?:[12]\\d{5,6}|6\\d{7})|7(?:1\\d{7}|3\\d{8}|5[03-9]\\d{3,7})"]],FJ:["679","[2-9]\\d{6}|0\\d{10}",[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]]],FK:["500","[2-7]\\d{4}"],FM:["691","[39]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],FO:["298","[2-9]\\d{5}",[["(\\d{6})","$1"]],null,null,"(10(?:01|[12]0|88))"],FR:["33","[1-9]\\d{8}",[["([1-79])(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"]],["(8\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"]],"0","0$1"],GA:["241","0?\\d{7}",[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]]],GB:["44","\\d{7,10}",[["(7\\d{3})(\\d{6})","$1 $2",["7(?:[1-57-9]|62)","7(?:[1-57-9]|624)"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2|5[56]|7[06]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:[02-9]1|1)|3|9[018]"]],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"]],["(1\\d{3})(\\d{5,6})","$1 $2",["1"]],["(800)(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"]],["(845)(46)(4\\d)","$1 $2 $3",["845","8454","84546","845464"]],["(8\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8(?:4[2-5]|7[0-3])"]],["(80\\d)(\\d{3})(\\d{4})","$1 $2 $3",["80"]],["(800)(\\d{6})","$1 $2",["800"]]],"0","0$1",null,null,null,null,["2(?:0[01378]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{7}|1(?:1(?:3[0-48]|[46][0-4]|5[0-26-9]|[78][0-49])|21[0-7]|31[0-8]|[4-69]1\\d)\\d{6}|1(?:2(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)|3(?:0\\d|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[28][02-57-9]|[37]\\d|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|2[024-9]|3[015689]|4[02-9]|5[03-9]|6\\d|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0124578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|8\\d|9[2-57]))\\d{6}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[345])))|3(?:638[2-5]|647[23]|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[123]))|5(?:24(?:3[2-79]|6\\d)|276\\d|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[567]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|955[0-4])|7(?:26(?:6[13-9]|7[0-7])|442\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|84(?:3[2-58]))|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}|176888[2-46-8]\\d{2}|16977[23]\\d{3}","7(?:[1-3]\\d{3}|4(?:[0-46-9]\\d{2}|5(?:[0-689]\\d|7[0-57-9]))|5(?:0[0-8]|[13-9]\\d|2[0-35-9])\\d|7(?:0(?:0[01]|[1-9]\\d)|[1-7]\\d{2}|8[02-9]\\d|9[0-689]\\d)|8(?:[014-9]\\d|[23][0-8])\\d|9(?:[024-9]\\d{2}|1(?:[02-9]\\d|1[028])|3[0-689]\\d))\\d{5}","80(?:0(?:1111|\\d{6,7})|8\\d{7})","(?:87[123]|9(?:[01]\\d|8[2349]))\\d{7}","70\\d{8}",null,"(?:3[0347]|55)\\d{8}","76(?:0[012]|2[356]|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}","56\\d{8}","8(?:4(?:5464\\d|[2-5]\\d{7})|70\\d{7})"]],GD:["1","[4589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"473"],GE:["995","[34578]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5"]]],"0"],GF:["594","[56]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]],"0","0$1"],GG:["44","[135789]\\d{6,9}",[["(7\\d{3})(\\d{6})","$1 $2",["7(?:[1-57-9]|62)","7(?:[1-57-9]|624)"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2|5[56]|7[06]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:[02-9]1|1)|3|9[018]"]],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"]],["(1\\d{3})(\\d{5,6})","$1 $2",["1"]],["(800)(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"]],["(845)(46)(4\\d)","$1 $2 $3",["845","8454","84546","845464"]],["(8\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8(?:4[2-5]|7[0-3])"]],["(80\\d)(\\d{3})(\\d{4})","$1 $2 $3",["80"]],["(800)(\\d{6})","$1 $2",["800"]]],"0",null,null,null,null,null,["1481[25-9]\\d{5}","7(?:781\\d|839\\d|911[17])\\d{5}","80(?:0(?:1111|\\d{6,7})|8\\d{7})","(?:87[123]|9(?:[01]\\d|8[0-3]))\\d{7}","70\\d{8}",null,"(?:3[0347]|55)\\d{8}","76(?:0[012]|2[356]|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}","56\\d{8}","8(?:4(?:5464\\d|[2-5]\\d{7})|70\\d{7})"]],GH:["233","[235]\\d{8}|8\\d{7}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{5})","$1 $2",["8"]]],"0","0$1"],GI:["350","[256]\\d{7}",[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","[1-689]\\d{5}",[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3"]]],GM:["220","[2-9]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],GN:["224","[367]\\d{7,8}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","[56]\\d{8}",[["([56]\\d{2})(\\d{2})(\\d{4})","$1 $2-$3",["590|69[01]"]]],"0","0$1",null,null,null,null,["590(?:0[1-68]|1[0-2]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}","69(?:0\\d{2}|1(?:2[29]|3[0-5]))\\d{4}"]],GQ:["240","[23589]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","[26-9]\\d{9}",[["([27]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2[2-9]1|[689]"]],["(2\\d{3})(\\d{6})","$1 $2",["2[2-9][02-9]"]]]],GT:["502","[2-7]\\d{7}|1[89]\\d{9}",[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","[5689]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"671"],GW:["245","(?:4(?:0\\d{5}|4\\d{7})|9\\d{8})",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["44|9[5-7]"]],["(\\d{3})(\\d{4})","$1 $2",["40"]]]],GY:["592","[2-46-9]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],HK:["852","[2-7]\\d{7}|8[0-3]\\d{6,7}|9\\d{4,10}",[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|[89](?:0[1-9]|[1-9])"]],["(800)(\\d{3})(\\d{3})","$1 $2 $3",["800"]],["(900)(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["900"]],["(900)(\\d{2,5})","$1 $2",["900"]]]],HN:["504","[237-9]\\d{7}",[["(\\d{4})(\\d{4})","$1-$2"]]],HR:["385","[1-7]\\d{5,8}|[89]\\d{6,8}",[["(1)(\\d{4})(\\d{3})","$1 $2 $3",["1"]],["([2-5]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"]],["(9\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["9"]],["(6[01])(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"]],["([67]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"]],["(80[01])(\\d{2})(\\d{2,3})","$1 $2 $3",["80[01]"]],["(80[01])(\\d{3})(\\d{3})","$1 $2 $3",["80[01]"]]],"0","0$1"],HT:["509","[2-489]\\d{7}",[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3"]]],HU:["36","[1-9]\\d{7,8}",[["(1)(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"]]],"06","($1)"],ID:["62","(?:[1-79]\\d{6,10}|8\\d{7,11})",[["(\\d{2})(\\d{5,8})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,8})","$1 $2",["2[035-9]|[36][02-9]|[4579]"],"(0$1)"],["(8\\d{2})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"]],["(8\\d{2})(\\d{4})(\\d{4,5})","$1-$2-$3",["8[1-35-9]"]],["(1)(500)(\\d{3})","$1 $2 $3",["150","1500"],"$1"],["(177)(\\d{6,8})","$1 $2",["177"]],["(800)(\\d{5,7})","$1 $2",["800"]],["(804)(\\d{3})(\\d{4})","$1 $2 $3",["804"]],["(80\\d)(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80[79]"]]],"0","0$1"],IE:["353","[124-9]\\d{6,9}",[["(1)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"]],["(\\d{3})(\\d{5})","$1 $2",["40[24]|50[45]"]],["(48)(\\d{4})(\\d{4})","$1 $2 $3",["48"]],["(818)(\\d{3})(\\d{3})","$1 $2 $3",["818"]],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[24-69]|7[14]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["76|8[35-9]"],"0$1"],["(8\\d)(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8[35-9]5"],"0$1"],["(700)(\\d{3})(\\d{3})","$1 $2 $3",["700"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:5|8[059])","1(?:5|8[059]0)"],"$1"]],"0","(0$1)"],IL:["972","1\\d{6,11}|[2-589]\\d{3}(?:\\d{3,6})?|6\\d{3}|7\\d{6,9}",[["([2-489])(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["([57]\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(153)(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["153"]],["(1)([7-9]\\d{2})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(1255)(\\d{3})","$1-$2",["125","1255"]],["(1200)(\\d{3})(\\d{3})","$1-$2-$3",["120","1200"]],["(1212)(\\d{2})(\\d{2})","$1-$2-$3",["121","1212"]],["(1599)(\\d{6})","$1-$2",["159","1599"]],["(151)(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["151"]],["(\\d{4})","*$1",["[2-689]"]]],"0"],IM:["44","[135789]\\d{6,9}",[["(7\\d{3})(\\d{6})","$1 $2",["7(?:[1-57-9]|62)","7(?:[1-57-9]|624)"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2|5[56]|7[06]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:[02-9]1|1)|3|9[018]"]],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"]],["(1\\d{3})(\\d{5,6})","$1 $2",["1"]],["(800)(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"]],["(845)(46)(4\\d)","$1 $2 $3",["845","8454","84546","845464"]],["(8\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8(?:4[2-5]|7[0-3])"]],["(80\\d)(\\d{3})(\\d{4})","$1 $2 $3",["80"]],["(800)(\\d{6})","$1 $2",["800"]]],"0",null,null,null,null,null,["1624[5-8]\\d{5}","7(?:4576|[59]24\\d|624[0-4689])\\d{5}","808162\\d{4}","(?:872299|90[0167]624)\\d{4}","70\\d{8}",null,"3(?:08162\\d|3\\d{5}|4(?:40[49]06|5624\\d)|7(?:0624\\d|2299\\d))\\d{3}|55\\d{8}",null,"56\\d{8}","8(?:4(?:40[49]06|5624\\d)|70624\\d)\\d{3}"]],IN:["91","008\\d{9}|1\\d{7,12}|[2-9]\\d{9,10}",[["(\\d{8})","$1",["561","5616","56161"],"$1"],["(\\d{5})(\\d{5})","$1 $2",["6(?:[09]0|2[03689]|3[05-9])|7(?:[02-8]|19|9[037-9])|8(?:0[015-9]|[1-9])|9","6(?:[09]0|2(?:0[01]|39|60|8[0-2]|9[04])|3(?:0[01]|5[0-2]|60|7[05]|81|9[03-5]))|7(?:[07]|19[0-5]|2(?:[0235-9]|[14][017-9])|3(?:[025-9]|[134][017-9])|4(?:[0-35689]|[47][017-9])|5(?:[02-46-9]|[15][017-9])|6(?:[02-9]|1[0-257-9])|8(?:[0-79]|8[0189])|9(?:[089]|31|7[02-9]))|8(?:0(?:[01589]|6[67]|7[02-9])|1(?:[0-57-9]|6[07-9])|2(?:[014][07-9]|[235-9])|3(?:[03-57-9]|[126][07-9])|[45]|6(?:[02457-9]|[136][07-9])|7(?:[078][07-9]|[1-69])|8(?:[0-25-9]|3[07-9]|4[047-9])|9(?:[02-9]|1[027-9]))|9","6(?:[09]0|2(?:0[01]|39|60|8[0-2]|9[04])|3(?:0[01]|5[0-2]|60|7[05]|81|9[03-5]))|7(?:0|19[0-5]|2(?:[0235-79]|[14][017-9]|8(?:[0-69]|[78][089]))|3(?:[05-8]|1(?:[0189]|7[5-9])|2(?:[0-49][089]|[5-8])|3[017-9]|4(?:[07-9]|11)|9(?:[01689]|[2-5][089]|7[0189]))|4(?:[056]|1(?:[0135-9]|[24][089])|[29](?:[0-7][089]|[89])|3(?:[0-8][089]|9)|[47](?:[089]|11|7[02-8])|8(?:[0-24-7][089]|[389]))|5(?:[0346-9]|[15][017-9]|2(?:[03-9]|[12][089]))|6(?:[0346-9]|1[0-257-9]|2(?:[0-4]|[5-9][089])|5(?:[0-367][089]|[4589]))|7(?:0(?:[02-9]|1[089])|[1-9])|8(?:[0-79]|8(?:0[0189]|11|8[013-9]|9))|9(?:[089]|313|7(?:[02-8]|9[07-9])))|8(?:0(?:[01589]|6[67]|7(?:[02-8]|9[05-9]))|1(?:[02-57-9]|1(?:[0-35-9]|4[0-46-9])|6(?:[089]|7[02-8]))|2(?:0(?:[089]|7[02])|[14](?:[089]|7[02-8])|[235-9])|3(?:[03-57-9]|1(?:[089]|7[02-6])|2(?:[09]|77|8[0-689])|6(?:[089]|7[02-7]))|[45]|6(?:[02457-9]|[136](?:[089]|7[02-8]))|7(?:0[07-9]|[1-69]|[78](?:[089]|7[02-8]))|8(?:[0-25-9]|3(?:[089]|7[02-8])|4(?:[0489]|7[02-68]))|9(?:[02-9]|1(?:[0289]|7[2-6])))|9"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-9]|80[2-46]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[59][14]|[68][1-9]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1|9[15])|6(?:12|[2-4]1|5[17]|6[13]|7[14]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[23579]|[468][1-9])|[2-8]"]],["(\\d{2})(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3 $4",["008"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],"$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["160","1600"],"$1"],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],"$1"],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["180","1800"],"$1"],["(\\d{4})(\\d{3,4})(\\d{4})","$1 $2 $3",["186","1860"],"$1"],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18[06]"],"$1"]],"0","0$1",null,null,!0],IO:["246","3\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],IQ:["964","[1-7]\\d{7,9}",[["(1)(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["([2-6]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"]],["(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"]]],"0","0$1"],IR:["98","[1-8]\\d{5,9}|9(?:[0-4]\\d{8}|9\\d{8})",[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"]],["(\\d{2})(\\d{4,5})","$1 $2",["[1-8]"]],["(\\d{4,5})","$1",["96"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"]]],"0","0$1"],IS:["354","[4-9]\\d{6}|38\\d{7}",[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(3\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]]],IT:["39","[01589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9})",[["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|55"]],["(0[26])(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(0[26])(\\d{4,6})","$1 $2",["0[26]"]],["(0\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],["(0\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["0[13-57-9][2-46-8]"]],["(0\\d{3})(\\d{2,6})","$1 $2",["0[13-57-9][2-46-8]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13]|8(?:00|4[08]|9[59])","[13]|8(?:00|4[08]|9(?:5[5-9]|9))"]],["(\\d{4})(\\d{4})","$1 $2",["894","894[5-9]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["3"]]],null,null,null,null,null,null,["0(?:[26]\\d{4,9}|(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2346]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[34578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7})","3(?:[12457-9]\\d{8}|6\\d{7,8}|3\\d{7,9})","80(?:0\\d{6}|3\\d{3})","0878\\d{5}|1(?:44|6[346])\\d{6}|89(?:2\\d{3}|4(?:[0-4]\\d{2}|[5-9]\\d{4})|5(?:[0-4]\\d{2}|[5-9]\\d{6})|9\\d{6})","1(?:78\\d|99)\\d{6}",null,null,null,"55\\d{8}","84(?:[08]\\d{6}|[17]\\d{3})"]],JE:["44","[135789]\\d{6,9}",[["(7\\d{3})(\\d{6})","$1 $2",["7(?:[1-57-9]|62)","7(?:[1-57-9]|624)"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2|5[56]|7[06]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:[02-9]1|1)|3|9[018]"]],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"]],["(1\\d{3})(\\d{5,6})","$1 $2",["1"]],["(800)(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"]],["(845)(46)(4\\d)","$1 $2 $3",["845","8454","84546","845464"]],["(8\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8(?:4[2-5]|7[0-3])"]],["(80\\d)(\\d{3})(\\d{4})","$1 $2 $3",["80"]],["(800)(\\d{6})","$1 $2",["800"]]],"0",null,null,null,null,null,["1534[0-24-8]\\d{5}","7(?:509\\d|7(?:00[378]|97[7-9])|829\\d|937\\d)\\d{5}","80(?:07(?:35|81)|8901)\\d{4}","(?:871206|90(?:066[59]|1810|71(?:07|55)))\\d{4}","701511\\d{4}",null,"3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))\\d{4}|55\\d{8}","76(?:0[012]|2[356]|4[0134]|5[49]|6[0-369]|77|81|9[39])\\d{6}","56\\d{8}","8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|70002)\\d{4}"]],JM:["1","[589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"876"],JO:["962","[235-9]\\d{7,8}",[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(7)(\\d{4})(\\d{4})","$1 $2 $3",["7[457-9]"]],["(\\d{2})(\\d{7})","$1 $2",["70"]],["(\\d{3})(\\d{5,6})","$1 $2",["8[0158]|9"]]],"0","0$1"],JP:["81","[1-9]\\d{8,9}|00(?:[36]\\d{7,14}|7\\d{5,7}|8\\d{7})",[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"]],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[2579]0|80[1-9]"]],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|4(?:5[67]|66)|5(?:47|58|64|8[67])|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[78]|96)|477|51[24]|636)|9(?:496|802|9(?:1[23]|69))","1(?:267|3(?:7[247]|9[278])|4(?:5[67]|66)|5(?:47|58|64|8[67])|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[78]|96[2457-9])|477|51[24]|636[2-57-9])|9(?:496|802|9(?:1[23]|69))"]],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["1(?:2[3-6]|3[3-9]|4[2-6]|5[2-8]|[68][2-7]|7[2-689]|9[1-578])|2(?:2[03-689]|3[3-58]|4[0-468]|5[04-8]|6[013-8]|7[06-9]|8[02-57-9]|9[13])|4(?:2[28]|3[689]|6[035-7]|7[05689]|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9[4-9])|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9[014-9])|8(?:2[49]|3[3-8]|4[5-8]|5[2-9]|6[35-9]|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9[3-7])","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:[0468][2-9]|5[78]|7[2-4])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[4-7]|[89][2-8]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9[2-8])|3(?:[3-6][2-9]|7[2-6]|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5[4-7]|6[2-9]|8[2-8]|9[236-9])|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3[34]|4[2-69]|[5-7]))","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:[0468][2-9]|5[78]|7[2-4])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[4-7]|[89][2-8]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9(?:20|[3578]|4[04-9]|6[56]))|3(?:[3-6][2-9]|7(?:[2-5]|6[0-59])|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5(?:[467]|5[014-9])|6(?:[2-8]|9[02-69])|8[2-8]|9(?:[236-8]|9[23]))|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3(?:3[02-9]|4[0-24689])|4[2-69]|[5-7]))","1(?:2[3-6]|3[3-9]|4[2-6]|5(?:[236-8]|[45][2-69])|[68][2-7]|7[2-689]|9[1-578])|2(?:2(?:[04-689]|3[23])|3[3-58]|4[0-468]|5(?:[0468][2-9]|5[78]|7[2-4])|6(?:[0135-8]|4[2-5])|7(?:[0679]|8[2-7])|8(?:[024578]|3[25-9]|9[6-9])|9(?:11|3[2-4]))|4(?:2(?:2[2-9]|8[237-9])|3[689]|6[035-7]|7(?:[059][2-8]|[68])|80|9[3-5])|5(?:3[1-36-9]|4[4578]|5[013-8]|6[1-9]|7[2-8]|8[14-7]|9(?:[4-7]|[89][2-8]))|7(?:2[15]|3[5-9]|4[02-9]|6[135-8]|7[0-4689]|9(?:[017-9]|4[6-8]|5[2-478]|6[2-589]))|8(?:2(?:4[4-8]|9(?:20|[3578]|4[04-9]|6(?:5[25]|60)))|3(?:[3-6][2-9]|7(?:[2-5]|6[0-59])|8[2-5])|4[5-8]|5[2-9]|6(?:[37]|5(?:[467]|5[014-9])|6(?:[2-8]|9[02-69])|8[2-8]|9(?:[236-8]|9[23]))|7[579]|8[03-579]|9[2-8])|9(?:[23]0|4[02-46-9]|5[024-79]|6[4-9]|7[2-47-9]|8[02-7]|9(?:3(?:3[02-9]|4[0-24689])|4[2-69]|[5-7]))"]],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1|2(?:2[37]|5[5-9]|64|78|8[39]|91)|4(?:2[2689]|64|7[347])|5[2-589]|60|8(?:2[124589]|3[279]|[46-9])|9(?:[235-8]|93)","1|2(?:2[37]|5(?:[57]|[68]0|9[19])|64|78|8[39]|917)|4(?:2(?:20|[68]|9[178])|64|7[347])|5[2-589]|60|8(?:2[124589]|3[279]|[46-9])|9(?:[235-8]|93[34])","1|2(?:2[37]|5(?:[57]|[68]0|9(?:17|99))|64|78|8[39]|917)|4(?:2(?:20|[68]|9[178])|64|7[347])|5[2-589]|60|8(?:2[124589]|3[279]|[46-9])|9(?:[235-8]|93(?:31|4))"]],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["2(?:[34]7|[56]9|74|9[14-79])|82|993"]],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[2479][1-9]"]]],"0","0$1"],KE:["254","20\\d{6,7}|[4-9]\\d{6,9}",[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"]],["(\\d{3})(\\d{6})","$1 $2",["7"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"]]],"0","0$1","005|0"],KG:["996","[235-8]\\d{8,9}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[25-7]|31[25]"]],["(\\d{4})(\\d{5})","$1 $2",["3(?:1[36]|[2-9])"]],["(\\d{3})(\\d{3})(\\d)(\\d{3})","$1 $2 $3 $4",["8"]]],"0","0$1"],KH:["855","[1-9]\\d{7,9}",[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["1\\d[1-9]|[2-9]"],"0$1"],["(1[89]00)(\\d{3})(\\d{3})","$1 $2 $3",["1[89]0","1[89]00"]]],"0"],KI:["686","[2458]\\d{4}|3\\d{4,7}|[67]\\d{7}",[],null,null,"0"],KM:["269","[3478]\\d{6}",[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3"]]],KN:["1","[589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"869"],KP:["850","1\\d{9}|[28]\\d{7}",[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],"0","0$1"],KR:["82","00(?:3\\d{8,9}|7\\d{9,11})|[1-7]\\d{4,9}|8\\d{8}",[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"]],["(\\d{4})(\\d{4})","$1-$2",["1(?:5[246-9]|6[046-8]|8[03579])","1(?:5(?:22|44|66|77|88|99)|6(?:[07]0|44|6[16]|88)|8(?:00|33|55|77|99))"],"$1"],["(\\d{5})","$1",["1[016-9]1","1[016-9]11","1[016-9]114"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2[1-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60[2-9]|80"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["1[0-25-9]|(?:3[1-3]|[46][1-4]|5[1-5])[1-9]"]],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]0"]]],"0","0$1","0(8[1-46-8]|85\\d{2})?"],KW:["965","[12569]\\d{6,7}",[["(\\d{4})(\\d{3,4})","$1 $2",["[16]|2(?:[0-35-9]|4[0-35-9])|52[25]|9[024-9]"]],["(\\d{3})(\\d{5})","$1 $2",["244|5(?:[015]|6[56])"]]]],KY:["1","[3589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"345"],KZ:["7","(?:33\\d|7\\d{2}|80[089])\\d{7}",[["([3489]\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"]],["(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"]]],"8",null,null,null,null,null,["33622\\d{5}|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9])|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[234]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[234]\\d|5[139])|4(?:2\\d|3[1235-9]|59)|5(?:[23]\\d|4[01246-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59)))\\d{5}","7(?:0[012578]|47|6[02-4]|7[15-8]|85)\\d{7}","800\\d{7}","809\\d{7}","808\\d{7}",null,null,null,"751\\d{7}"]],LA:["856","[2-8]\\d{7,9}",[["(20)(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["20"]],["([2-8]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"]],["(30)(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30"]]],"0","0$1"],LB:["961","[13-9]\\d{6,7}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["([7-9]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["7(?:[01]|6[013-9]|8[89]|9[1-3])|[89][01]"]]],"0"],LC:["1","[5789]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"758"],LI:["423","6\\d{8}|[23789]\\d{6}",[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[237-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[56]"]],["(69)(7\\d{2})(\\d{4})","$1 $2 $3",["697"]]],"0",null,"0|10(?:01|20|66)"],LK:["94","[1-9]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"]]],"0","0$1"],LR:["231","2\\d{7,8}|[378]\\d{8}|4\\d{6}|5\\d{6,8}",[["(2\\d)(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["([4-5])(\\d{3})(\\d{3})","$1 $2 $3",["[45]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23578]"]]],"0","0$1"],LS:["266","[2568]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2"]]],LT:["370","[3-9]\\d{7}",[["([34]\\d)(\\d{6})","$1 $2",["37|4(?:1|5[45]|6[2-4])"]],["([3-6]\\d{2})(\\d{5})","$1 $2",["3[148]|4(?:[24]|6[09])|528|6"]],["([7-9]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1"],["(5)(2\\d{2})(\\d{4})","$1 $2 $3",["52[0-79]"]]],"8","(8-$1)","[08]",null,!0],LU:["352","[24-9]\\d{3,10}|3(?:[0-46-9]\\d{2,9}|5[013-9]\\d{1,8})",[["(\\d{2})(\\d{3})","$1 $2",["[2-5]|7[1-9]|[89](?:0[2-9]|[1-9])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[2-5]|7[1-9]|[89](?:0[2-9]|[1-9])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,4})","$1 $2 $3 $4",["2(?:[12589]|4[12])|[3-5]|7[1-9]|8(?:0[2-9]|[1-9])|9(?:0[2-46-9]|[1-9])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["70|80[01]|90[015]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],null,null,"(15(?:0[06]|1[12]|35|4[04]|55|6[26]|77|88|99)\\d)"],LV:["371","[2689]\\d{7}",[["([2689]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2689]"]]]],LY:["218","[25679]\\d{8}",[["([25-79]\\d)(\\d{7})","$1-$2",["[25-79]"]]],"0","0$1"],MA:["212","[5-9]\\d{8}",[["([5-7]\\d{2})(\\d{6})","$1-$2",["5(?:2[015-7]|3[0-4])|[67]"]],["([58]\\d{3})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|92)|892","5(?:2(?:[2-48]|9[0-7])|3(?:[5-79]|8[0-7])|924)|892"]],["(5\\d{4})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]"]],["([5]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:4[067]|5[03])"]],["(8[09])(\\d{7})","$1-$2",["8(?:0|9[013-9])"]]],"0","0$1",null,null,null,null,["5(?:2(?:[015-79]\\d|2[02-9]|3[2-57]|4[2-8]|8[235-7])\\d|3(?:[0-48]\\d|[57][2-9]|6[2-8]|9[3-9])\\d|4[067]\\d{2}|5[03]\\d{2})\\d{4}","(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0[067]|6[1267]|7[07]))\\d{6}","80\\d{7}","89\\d{7}",null,null,null,null,"5924[01]\\d{4}"]],MC:["377","[34689]\\d{7,8}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[39]"],"$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"]],["(6)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"]],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["8"],"$1"]],"0","0$1"],MD:["373","[235-9]\\d{7}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"]],["([25-7]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["2[13-9]|[5-7]"]],["([89]\\d{2})(\\d{5})","$1 $2",["[89]"]]],"0","0$1"],ME:["382","[2-9]\\d{7,8}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]|6[036-9]"]]],"0","0$1"],MF:["590","[56]\\d{8}",[["([56]\\d{2})(\\d{2})(\\d{4})","$1 $2-$3",["590|69[01]"]]],"0",null,null,null,null,null,["590(?:0[079]|13|2[79]|30|43|5[0-268]|7[79]|87)\\d{4}","69(?:0\\d{2}|1(?:2[29]|3[0-5]))\\d{4}"]],MG:["261","[23]\\d{8}",[["([23]\\d)(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"]]],"0","0$1"],MH:["692","[2-6]\\d{6}",[["(\\d{3})(\\d{4})","$1-$2"]],"1"],MK:["389","[2-578]\\d{7}",[["(2)(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["([347]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[347]"]],["([58]\\d{2})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"]]],"0","0$1"],ML:["223","[246-9]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[246-9]"]]]],MM:["95","[178]\\d{5,7}|[24-6]\\d{5,8}|9(?:[279]\\d{0,2}|5|[34]\\d{1,2}|6(?:\\d{1,2})?|8(?:\\d{2})?)\\d{6}",[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["1|2[245]"]],["(2)(\\d{4})(\\d{4})","$1 $2 $3",["251"]],["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"]],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["432|67|81"]],["(\\d{2})(\\d{2})(\\d{3,4})","$1 $2 $3",["[4-8]"]],["(9)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"]],["(9)([34]\\d{4})(\\d{4})","$1 $2 $3",["9(?:3[0-36]|4[0-57-9])"]],["(9)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92[56]"]],["(9)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["93"]]],"0","0$1"],MN:["976","[12]\\d{7,9}|[57-9]\\d{7}",[["([12]\\d)(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"]],["([12]2\\d)(\\d{5,6})","$1 $2",["[12]2[1-3]"]],["([12]\\d{3})(\\d{5})","$1 $2",["[12](?:27|[3-5])","[12](?:27|[3-5]\\d)2"]],["(\\d{4})(\\d{4})","$1 $2",["[57-9]"],"$1"],["([12]\\d{4})(\\d{4,5})","$1 $2",["[12](?:27|[3-5])","[12](?:27|[3-5]\\d)[4-9]"]]],"0","0$1"],MO:["853","[268]\\d{7}",[["([268]\\d{3})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","[5689]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"670"],MQ:["596","[56]\\d{8}",[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]],"0","0$1"],MR:["222","[2-48]\\d{7}",[["([2-48]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","[5689]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"664"],MT:["356","[2357-9]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2"]]],MU:["230","[2-9]\\d{6,7}",[["([2-46-9]\\d{2})(\\d{4})","$1 $2",["[2-46-9]"]],["(5\\d{3})(\\d{4})","$1 $2",["5"]]]],MV:["960","[346-8]\\d{6,9}|9(?:00\\d{7}|\\d{6})",[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]00"]]]],MW:["265","(?:1(?:\\d{2})?|[2789]\\d{2})\\d{6}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(2\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[17-9]"]]],"0","0$1"],MX:["52","[1-9]\\d{9,10}",[["([358]\\d)(\\d{4})(\\d{4})","$1 $2 $3",["33|55|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2467]|3[0-2457-9]|5[089]|8[02-9]|9[0-35-9]"]],["(1)([358]\\d)(\\d{4})(\\d{4})","044 $2 $3 $4",["1(?:33|55|81)"],"$1",null,"$1 $2 $3 $4"],["(1)(\\d{3})(\\d{3})(\\d{4})","044 $2 $3 $4",["1(?:[2467]|3[0-2457-9]|5[089]|8[2-9]|9[1-35-9])"],"$1",null,"$1 $2 $3 $4"]],"01","01 $1","0[12]|04[45](\\d{10})","1$1",!0],MY:["60","[13-9]\\d{7,9}",[["([4-79])(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(3)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["([18]\\d)(\\d{3})(\\d{3,4})","$1-$2 $3",["1[02-46-9][1-9]|8"],"0$1"],["(1)([36-8]00)(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]0","1[36-8]00"]],["(11)(\\d{4})(\\d{4})","$1-$2 $3",["11"],"0$1"],["(15[49])(\\d{3})(\\d{4})","$1-$2 $3",["15[49]"],"0$1"]],"0"],MZ:["258","[28]\\d{7,8}",[["([28]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-7]"]],["(80\\d)(\\d{3})(\\d{3})","$1 $2 $3",["80"]]]],NA:["264","[68]\\d{7,8}",[["(8\\d)(\\d{3})(\\d{4})","$1 $2 $3",["8[1-35]"]],["(6\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["6"]],["(88)(\\d{3})(\\d{3})","$1 $2 $3",["88"]],["(870)(\\d{3})(\\d{3})","$1 $2 $3",["870"]]],"0","0$1"],NC:["687","[2-57-9]\\d{5}",[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-46-9]|5[0-4]"]]]],NE:["227","[0289]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["09|[289]"]],["(08)(\\d{3})(\\d{3})","$1 $2 $3",["08"]]]],NF:["672","[13]\\d{5}",[["(\\d{2})(\\d{4})","$1 $2",["1"]],["(\\d)(\\d{5})","$1 $2",["3"]]]],NG:["234","[1-6]\\d{5,8}|9\\d{5,9}|[78]\\d{5,13}",[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"]],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-6]|7(?:0[1-9]|[1-79])|8[2-9]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["70|8[01]|90[235-9]"]],["([78]00)(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]00"]],["([78]00)(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]00"]],["(78)(\\d{2})(\\d{3})","$1 $2 $3",["78"]]],"0","0$1"],NI:["505","[125-8]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2"]]],NL:["31","1\\d{4,8}|[2-7]\\d{8}|[89]\\d{6,9}",[["([1-578]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1[035]|2[0346]|3[03568]|4[0356]|5[0358]|7|8[4578]"]],["([1-5]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"]],["(6)(\\d{8})","$1 $2",["6[0-57-9]"]],["(66)(\\d{7})","$1 $2",["66"]],["(14)(\\d{3,4})","$1 $2",["14"],"$1"],["([89]0\\d)(\\d{4,7})","$1 $2",["[89]0"]]],"0","0$1"],NO:["47","0\\d{4}|[2-9]\\d{7}",[["([489]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[489]"]],["([235-7]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],null,null,null,null,null,null,["(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}","(?:4[015-8]|5[89]|87|9\\d)\\d{6}","80[01]\\d{5}","82[09]\\d{5}","880\\d{5}",null,"0\\d{4}|81(?:0(?:0[7-9]|1\\d)|5\\d{2})\\d{3}",null,"85[0-5]\\d{5}","810(?:0[0-6]|[2-8]\\d)\\d{3}"]],NP:["977","[1-8]\\d{7}|9(?:[1-69]\\d{6,8}|7[2-6]\\d{5,7}|8\\d{8})",[["(1)(\\d{7})","$1-$2",["1[2-6]"]],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-69]|7[15-9])"]],["(9\\d{2})(\\d{7})","$1-$2",["9(?:6[013]|7[245]|8)"],"$1"]],"0","0$1"],NR:["674","[458]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],NU:["683","[1-5]\\d{3}"],NZ:["64","6[235-9]\\d{6}|[2-57-9]\\d{7,9}",[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["240|[346]|7[2-57-9]|9[1-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["21"]],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:1[1-9]|[69]|7[0-35-9])|70|86"]],["(2\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["2[028]"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["90"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|5|[89]0"]]],"0","0$1"],OM:["968","(?:5|[279]\\d)\\d{6}|800\\d{5,6}",[["(2\\d)(\\d{6})","$1 $2",["2"]],["([79]\\d{3})(\\d{4})","$1 $2",["[79]"]],["([58]00)(\\d{4,6})","$1 $2",["[58]00"]]]],PA:["507","[1-9]\\d{6,7}",[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["6"]]]],PE:["51","[14-9]\\d{7,8}",[["(1)(\\d{7})","$1 $2",["1"]],["([4-8]\\d)(\\d{6})","$1 $2",["[4-7]|8[2-4]"]],["(\\d{3})(\\d{5})","$1 $2",["80"]],["(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"$1"]],"0","(0$1)"],PF:["689","4\\d{5,7}|8\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4[09]|8[79]"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]]]],PG:["675","[1-9]\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2",["[13-689]|27"]],["(\\d{4})(\\d{4})","$1 $2",["20|7"]]]],PH:["63","1\\d{10,12}|2\\d{5,7}|[3-7]\\d{8}|8\\d{7,9}|9\\d{9}",[["(2)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(2)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|5(?:22|44)|642|8(?:62|8[245])","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["([3-8]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[3-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["81|9"],"0$1"],["(1800)(\\d{3})(\\d{4})","$1 $2 $3",["180","1800"]],["(1800)(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["180","1800"]]],"0"],PK:["92","1\\d{8}|[2-8]\\d{5,11}|9(?:[013-9]\\d{4,10}|2\\d(?:111\\d{6}|\\d{3,7}))",[["([89]00)(\\d{3})(\\d{2})","$1 $2 $3",["[89]00"],"0$1"],["(1\\d{3})(\\d{5})","$1 $2",["1"],"$1"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"]],["(\\d{3})(\\d{6,7})","$1 $2",["2[349]|45|54|60|72|8[2-5]|9[2-469]","(?:2[349]|45|54|60|72|8[2-5]|9[2-469])\\d[2-9]"]],["(58\\d{3})(\\d{5})","$1 $2",["58[126]"]],["(3\\d{2})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(111)(\\d{3})(\\d{3})","$1 $2 $3 $4",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)1","(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)11","(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)111"]],["(\\d{3})(111)(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[349]|45|54|60|72|8[2-5]|9[2-9]","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d1","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d11","(?:2[349]|45|54|60|72|8[2-5]|9[2-9])\\d111"]]],"0","(0$1)"],PL:["48","[1-57-9]\\d{6,8}|6\\d{5,8}",[["(\\d{3})(\\d{3})","$1 $2",["11[68]|64"]],["(\\d{5})","$1",["19"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["26|39|45|5[0137]|6[0469]|7[02389]|8[08]"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[14]|2[0-57-9]|3[2-4]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145]"]]]],PM:["508","[45]\\d{5}",[["([45]\\d)(\\d{2})(\\d{2})","$1 $2 $3",["[45]"]]],"0","0$1"],PR:["1","[5789]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"787|939"],PS:["970","1\\d{9}|[24589]\\d{7,8}",[["([2489])(2\\d{2})(\\d{4})","$1 $2 $3",["[2489]2"]],["(5[69]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["5[69]"]],["(1[78]00)(\\d{3})(\\d{3})","$1 $2 $3",["1[78]0","1[78]00"],"$1"]],"0","0$1"],PT:["351","[2-46-9]\\d{8}",[["(2\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["([2-46-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[3-9]|[346-9]"]]]],PW:["680","[2-8]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],PY:["595","5[0-5]\\d{4,7}|[2-46-9]\\d{5,8}",[["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["9[1-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["870","8700"]],["(\\d{3})(\\d{4,5})","$1 $2",["[2-8][1-9]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8][1-9]"],"0$1"]],"0"],QA:["974","[2-8]\\d{6,7}",[["([28]\\d{2})(\\d{4})","$1 $2",["[28]"]],["([3-7]\\d{3})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","[268]\\d{8}",[["([268]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[268]"]]],"0","0$1",null,null,null,"262|69|8"],RO:["40","[23]\\d{5,8}|[7-9]\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"]],["(\\d{2})(\\d{4})","$1 $2",["[23]1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23][3-7]|[7-9]"]],["(2\\d{2})(\\d{3})","$1 $2",["2[3-6]"]]],"0","0$1"],RS:["381","[126-9]\\d{4,11}|3(?:[0-79]\\d{3,10}|8[2-9]\\d{2,9})",[["([23]\\d{2})(\\d{4,9})","$1 $2",["(?:2[389]|39)0"]],["([1-3]\\d)(\\d{5,10})","$1 $2",["1|2(?:[0-24-7]|[389][1-9])|3(?:[0-8]|9[1-9])"]],["(6\\d)(\\d{6,8})","$1 $2",["6"]],["([89]\\d{2})(\\d{3,9})","$1 $2",["[89]"]],["(7[26])(\\d{4,9})","$1 $2",["7[26]"]],["(7[08]\\d)(\\d{4,9})","$1 $2",["7[08]"]]],"0","0$1"],RU:["7","[347-9]\\d{9}",[["([3489]\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[3489]"]],["(7\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"]]],"8","8 ($1)",null,null,!0,null,["(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}","9\\d{9}","80[04]\\d{7}","80[39]\\d{7}","808\\d{7}"]],RW:["250","[027-9]\\d{7,8}",[["(2\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["([7-9]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(0\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],"0"],SA:["966","1\\d{7,8}|(?:[2-467]|92)\\d{7}|5\\d{8}|8\\d{9}",[["([1-467])(\\d{3})(\\d{4})","$1 $2 $3",["[1-467]"]],["(1\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1[1-467]"]],["(5\\d)(\\d{3})(\\d{4})","$1 $2 $3",["5"]],["(92\\d{2})(\\d{5})","$1 $2",["92"],"$1"],["(800)(\\d{3})(\\d{4})","$1 $2 $3",["800"],"$1"],["(811)(\\d{3})(\\d{3,4})","$1 $2 $3",["811"]]],"0","0$1"],SB:["677","[1-9]\\d{4,6}",[["(\\d{2})(\\d{5})","$1 $2",["[7-9]"]]]],SC:["248","[24689]\\d{5,6}",[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]"]]]],SD:["249","[19]\\d{8}",[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3"]],"0","0$1"],SE:["46","[1-35-9]\\d{5,11}|4\\d{6,8}",[["(8)(\\d{2,3})(\\d{2,3})(\\d{2})","$1-$2 $3 $4",["8"],null,null,"$1 $2 $3 $4"],["([1-69]\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90"],null,null,"$1 $2 $3 $4"],["([1-469]\\d)(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90"],null,null,"$1 $2 $3"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[0-5]|4[0-3])"],null,null,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[0-5]|4[0-3])"],null,null,"$1 $2 $3"],["(7\\d)(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["7"],null,null,"$1 $2 $3 $4"],["(77)(\\d{2})(\\d{2})","$1-$2$3",["77"],null,null,"$1 $2 $3"],["(20)(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],null,null,"$1 $2 $3"],["(9[034]\\d)(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9[034]"],null,null,"$1 $2 $3 $4"],["(9[034]\\d)(\\d{4})","$1-$2",["9[034]"],null,null,"$1 $2"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["25[245]|67[3-6]"],null,null,"$1 $2 $3 $4 $5"]],"0","0$1"],SG:["65","[36]\\d{7}|[17-9]\\d{7,10}",[["([3689]\\d{3})(\\d{4})","$1 $2",["[369]|8[1-9]"]],["(1[89]00)(\\d{3})(\\d{4})","$1 $2 $3",["1[89]0","1[89]00"]],["(7000)(\\d{4})(\\d{3})","$1 $2 $3",["700","7000"]],["(800)(\\d{3})(\\d{4})","$1 $2 $3",["800"]]]],SH:["290","[256]\\d{4}|8\\d{3}",[],null,null,null,null,null,null,["2(?:[0-57-9]\\d|6[4-9])\\d{2}","[56]\\d{4}",null,null,null,null,null,null,"262\\d{2}"]],SI:["386","[1-7]\\d{6,7}|[89]\\d{4,7}",[["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[12]|[34][24-8]|5[2-8]|7[3-8]"],"(0$1)"],["([3-7]\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"]],["([89][09])(\\d{3,6})","$1 $2",["[89][09]"]],["([58]\\d{2})(\\d{5})","$1 $2",["59|8[1-3]"]]],"0","0$1"],SJ:["47","0\\d{4}|[45789]\\d{7}",[["([489]\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[489]"]],["([235-7]\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],null,null,null,null,null,null,["79\\d{6}","(?:4[015-8]|5[89]|9\\d)\\d{6}","80[01]\\d{5}","82[09]\\d{5}","880\\d{5}",null,"0\\d{4}|81(?:0(?:0[7-9]|1\\d)|5\\d{2})\\d{3}",null,"85[0-5]\\d{5}","810(?:0[0-6]|[2-8]\\d)\\d{3}"]],SK:["421","(?:[2-68]\\d{5,8}|9\\d{6,8})",[["(2)(1[67])(\\d{3,4})","$1 $2 $3",["21[67]"]],["([3-5]\\d)(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5]"]],["(2)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"]],["([3-5]\\d)(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"]],["([689]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"]],["(9090)(\\d{3})","$1 $2",["909","9090"]]],"0","0$1"],SL:["232","[2-9]\\d{7}",[["(\\d{2})(\\d{6})","$1 $2"]],"0","(0$1)"],SM:["378","[05-7]\\d{7,9}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(0549)(\\d{6})","$1 $2",["054","0549"],null,null,"($1) $2"],["(\\d{6})","0549 $1",["[89]"],null,null,"(0549) $1"]],null,null,"([89]\\d{5})","0549$1"],SN:["221","[3789]\\d{8}",[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],SO:["252","[1-9]\\d{5,8}",[["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[13-5]|2[0-79]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{2})(\\d{5,7})","$1 $2",["15|28|6[1-35-9]|799|9[2-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3[59]|4[89]|6[24-6]|79|8[08]|90"]]],"0"],SR:["597","[2-8]\\d{5,6}",[["(\\d{3})(\\d{3})","$1-$2",["[2-4]|5[2-58]"]],["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","[19]\\d{8}",[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",null,"0$1"]],"0"],ST:["239","[29]\\d{6}",[["(\\d{3})(\\d{4})","$1 $2"]]],SV:["503","[267]\\d{7}|[89]\\d{6}(?:\\d{4})?",[["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","[5789]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"721"],SY:["963","[1-59]\\d{7,8}",[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"]],["(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0","0$1",null,null,!0],SZ:["268","[027]\\d{7}",[["(\\d{4})(\\d{4})","$1 $2",["[027]"]]]],TA:["290","8\\d{3}",[],null,null,null,null,null,null,["8\\d{3}"]],TC:["1","[5689]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"649"],TD:["235","[2679]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4"]]],TG:["228","[279]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","1\\d{8,9}|[2-9]\\d{7,8}",[["(2)(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["([13-9]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["14|[3-9]"]],["(1[89]00)(\\d{3})(\\d{3})","$1 $2 $3",["1[89]0","1[89]00"],"$1"]],"0","0$1"],TJ:["992","[3-57-9]\\d{8}",[["([349]\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["([457-9]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[148]|[578]|9(?:[0235-9]|1[59])"]],["(331700)(\\d)(\\d{2})","$1 $2 $3",["331","3317","33170","331700"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]","3(?:[1245]|3(?:[02-9]|1[0-589]))"]]],"8",null,null,null,!0],TK:["690","[2-47]\\d{3,6}"],TL:["670","[2-489]\\d{6}|7\\d{6,7}",[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7[3-8]"]]]],TM:["993","[1-6]\\d{7}",[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"]],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["13|[2-5]"]]],"8","(8 $1)"],TN:["216","[2-57-9]\\d{7}",[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3"]]],TO:["676","[02-8]\\d{4,6}",[["(\\d{2})(\\d{3})","$1-$2",["[1-6]|7[0-4]|8[05]"]],["(\\d{3})(\\d{4})","$1 $2",["7[5-9]|8[47-9]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]]]],TR:["90","[2-589]\\d{9}|444\\d{4}",[["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[23]|4(?:[0-35-9]|4[0-35-9])"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[02-69]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["51|[89]"],"0$1"],["(444)(\\d{1})(\\d{3})","$1 $2 $3",["444"]]],"0",null,null,null,!0],TT:["1","[589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"868"],TV:["688","[279]\\d{4,6}"],TW:["886","2\\d{6,8}|[3-689]\\d{7,8}|7\\d{7,9}",[["(20)(\\d)(\\d{4})","$1 $2 $3",["202"]],["([258]0)(\\d{3})(\\d{4})","$1 $2 $3",["20[013-9]|50[0-46-9]|80[0-79]"]],["([2-8])(\\d{3,4})(\\d{4})","$1 $2 $3",["[25][2-8]|[346]|[78][1-9]"]],["(9\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"]],["(70)(\\d{4})(\\d{4})","$1 $2 $3",["70"]]],"0","0$1"],TZ:["255","\\d{9}",[["([24]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[24]"]],["([67]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"]],["([89]\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"]]],"0","0$1"],UA:["380","[3-9]\\d{8}",[["([3-9]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[38]9|4(?:[45][0-5]|87)|5(?:0|[67][37])|6[36-8]|7|9[1-9]","[38]9|4(?:[45][0-5]|87)|5(?:0|6(?:3[14-7]|7)|7[37])|6[36-8]|7|9[1-9]"]],["([3-689]\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["(?:3[1-8]|4[136-8])2|5(?:[12457]2|6[24])|6(?:[12][29]|[49]2|5[24])|8[0-8]|90","3(?:[1-46-8]2[013-9]|52)|4(?:[1378]2|62[013-9])|5(?:[12457]2|6[24])|6(?:[12][29]|[49]2|5[24])|8[0-8]|90"]],["([3-6]\\d{3})(\\d{5})","$1 $2",["3(?:[1-46-8]|5[013-9])|4(?:[137][013-9]|[45][6-9]|6|8[4-6])|5(?:[1245][013-9]|3|6[0135689]|7[4-6])|6(?:[12][13-8]|[49][013-9]|5[0135-9])","3(?:[1-46-8](?:[013-9]|22)|5[013-9])|4(?:[137][013-9]|[45][6-9]|6(?:[013-9]|22)|8[4-6])|5(?:[1245][013-9]|3|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][13-8]|[49][013-9]|5[0135-9])"]]],"0","0$1"],UG:["256","\\d{9}",[["(\\d{3})(\\d{6})","$1 $2",["20[0-8]|4(?:6[45]|[7-9])|[7-9]","20(?:[013-8]|2[5-9])|4(?:6[45]|[7-9])|[7-9]"]],["(\\d{2})(\\d{7})","$1 $2",["3|4(?:[1-5]|6[0-36-9])"]],["(2024)(\\d{5})","$1 $2",["202","2024"]]],"0","0$1"],US:["1","[2-9]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,!0,null,["(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[026]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[0-24679]|4[67]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[16]|5[017]|6[0-279]|78|8[012])|7(?:0[1-46-8]|1[02-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|28|3[0-258]|4[3578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[014678]|4[0179]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}",null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}","900[2-9]\\d{6}","5(?:(?:00|22|33|44|66|77|88)[2-9]|21[23])\\d{6}"]],UY:["598","[2489]\\d{6,7}",[["(\\d{4})(\\d{4})","$1 $2",["[24]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9[1-9]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["[89]0"],"0$1"]],"0"],UZ:["998","[679]\\d{8}",[["([679]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[679]"]]],"8","8 $1"],VA:["39","(?:0(?:878\\d{5}|6698\\d{5})|[1589]\\d{5,10}|3(?:[12457-9]\\d{8}|[36]\\d{7,9}))",[["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|55"]],["(0[26])(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(0[26])(\\d{4,6})","$1 $2",["0[26]"]],["(0\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],["(0\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["0[13-57-9][2-46-8]"]],["(0\\d{3})(\\d{2,6})","$1 $2",["0[13-57-9][2-46-8]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13]|8(?:00|4[08]|9[59])","[13]|8(?:00|4[08]|9(?:5[5-9]|9))"]],["(\\d{4})(\\d{4})","$1 $2",["894","894[5-9]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["3"]]],null,null,null,null,null,null,["06698\\d{5}","3(?:[12457-9]\\d{8}|6\\d{7,8}|3\\d{7,9})","80(?:0\\d{6}|3\\d{3})","0878\\d{5}|1(?:44|6[346])\\d{6}|89(?:2\\d{3}|4(?:[0-4]\\d{2}|[5-9]\\d{4})|5(?:[0-4]\\d{2}|[5-9]\\d{6})|9\\d{6})","1(?:78\\d|99)\\d{6}",null,null,null,"55\\d{8}","84(?:[08]\\d{6}|[17]\\d{3})"]],VC:["1","[5789]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"784"],VE:["58","[24589]\\d{9}",[["(\\d{3})(\\d{7})","$1-$2"]],"0","0$1"],VG:["1","[2589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"284"],VI:["1","[3589]\\d{9}",[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",null,null,null,"$1-$2-$3"]],"1",null,null,null,null,"340"],VN:["84","1\\d{6,9}|2\\d{9}|6\\d{6,7}|7\\d{6}|8\\d{6,8}|9\\d{8}",[["([17]99)(\\d{4})","$1 $2",["[17]99"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"]],["(80)(\\d{5})","$1 $2",["80"]],["(69\\d)(\\d{4,5})","$1 $2",["69"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2[0-35-79]"]],["([89]\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8(?:8|9[89])|9"]],["(1[2689]\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1(?:[26]|8[68]|99)"]],["(86[89])(\\d{3})(\\d{3})","$1 $2 $3",["86[89]"]],["(1[89]00)(\\d{4,6})","$1 $2",["1[89]0","1[89]00"],"$1"]],"0","0$1",null,null,!0],VU:["678","[2-57-9]\\d{4,6}",[["(\\d{3})(\\d{4})","$1 $2",["[579]"]]]],WF:["681","[4-8]\\d{5}",[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3"]]],WS:["685","[2-8]\\d{4,6}",[["(8\\d{2})(\\d{3,4})","$1 $2",["8"]],["(7\\d)(\\d{5})","$1 $2",["7"]],["(\\d{5})","$1",["[2-6]"]]]],YE:["967","[1-7]\\d{6,8}",[["([1-7])(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"]],["(7\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["7[0137]"]]],"0","0$1"],YT:["262","[268]\\d{8}",[["([268]\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[268]"]]],"0",null,null,null,null,"269|63"],ZA:["27","[1-79]\\d{8}|8\\d{4,8}",[["(860)(\\d{3})(\\d{3})","$1 $2 $3",["860"]],["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"]],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-79]|8(?:[0-57]|6[1-9])"]]],"0","0$1"],ZM:["260","[289]\\d{8}",[["(\\d{2})(\\d{4})","$1 $2",null,"$1"],["([1-8])(\\d{2})(\\d{4})","$1 $2 $3",["[1-8]"],"$1"],["([29]\\d)(\\d{7})","$1 $2",["[29]"]],["(800)(\\d{3})(\\d{3})","$1 $2 $3",["800"]]],"0","0$1"],ZW:["263","2(?:[0-57-9]\\d{3,8}|6(?:[14]\\d{7}|\\d{4}))|[13-69]\\d{4,9}|7\\d{8}|8[06]\\d{5,8}",[["([49])(\\d{3})(\\d{2,4})","$1 $2 $3",["4|9[2-9]"]],["(7\\d)(\\d{3})(\\d{4})","$1 $2 $3",["7"]],["(86\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["86[24]"]],["([2356]\\d{2})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8|[78])|3(?:[09]8|17|3[78]|7[1569]|8[37])|5[15][78]|6(?:[29]8|37|[68][78]|75)"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|31|[56][14]|7[35]|84)|329"]],["([1-356]\\d)(\\d{3,5})","$1 $2",["1[3-9]|2[02569]|3[0-69]|5[05689]|6"]],["([235]\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[23]9|54"]],["([25]\\d{3})(\\d{3,5})","$1 $2",["(?:25|54)8","258[23]|5483"]],["(8\\d{3})(\\d{6})","$1 $2",["86"]],["(80\\d)(\\d{4})","$1 $2",["80"]]],"0","0$1"],"001":["979","\\d{9}",[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3"]]]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(597),o=r(i),a=n(127),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(598),__esModule:!0}},function(e,t,n){n(169),n(112),e.exports=n(599)},function(e,t,n){var r=n(262),i=n(30)("iterator"),o=n(72);e.exports=n(16).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){n(169),n(112),e.exports=n(601)},function(e,t,n){var r=n(52),i=n(261);e.exports=n(16).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return Promise.resolve(e)===e}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),d=r(c),l=n(2),f=r(l),h=n(26),p=r(h),v=n(3),m=r(v),g=n(0),_=function(){function e(){o(this,e),(0,d.default)(this),this._registry={},this._deferred={},this._initializing={}}return u(e,[{key:"register",value:function(e,t){if(this._registry[e])throw new g.ConflictError("Service already registered with name: "+e);this._doRegister(e,t)}},{key:"get",value:function(e){if(this._deferred[e]){if(!this._initializing[e]){var t=this._createInstanceFromFactory(e);if(!a(t))return t}throw new g.InvalidOperationError("Service is being initialized with name: "+e)}var n=this._registry[e];if(!n)throw new g.NotFoundError("No service registered with name: "+e);return n}},{key:"has",value:function(e){return!!this._deferred[e]||!!this._registry[e]}},{key:"isReady",value:function(e){return!!this._registry[e]}},{key:"getAsync",value:function(e){var t=this;return new Promise(function(n){if(t._deferred[e])return void n(t._initializing[e]?t._deferred[e].promise:t._createInstanceFromFactory(e));var r=t._registry[e];if(!r)throw new g.NotFoundError("No service registered with name: "+e);n(r)})}},{key:"unregister",value:function(t){if(this._deferred[t])return delete this._deferred[t],void delete this._initializing[t];if(!this._registry[t])throw new g.NotFoundError("No service registered with name: "+t);delete this._registry[t],this.emit(e.SERVICE_UNREGISTERED,t)}},{key:"factory",value:function(e,t,n){if(this._registry[e]||this._deferred[e])throw new g.ConflictError("Service already registered with name: "+e);if(!(0,f.default)(t)){if(n)throw new g.ArgumentError("`deps` should be an array, but found "+(void 0===t?"undefined":s(t)));n=t,t=[]}(0,m.default)("factory",n,p.default,"`factory` should be a function, but found "+(void 0===n?"undefined":s(n))),this._deferred[e]={deps:t,factory:n}}},{key:"reset",value:function(){var e=this;Object.keys(this._registry).forEach(function(t){e.unregister(t)}),this._deferred={},this._initializing={}}},{key:"_doRegister",value:function(t,n){this._registry[t]=n,this.emit(e.SERVICE_READY,t)}},{key:"_getDependency",value:function(e){return this._deferred[e]?this._initializing[e]?this._deferred[e].promise:this._createInstanceFromFactory(e):this.get(e)}},{key:"_createInstanceFromFactory",value:function(e){var t=this;this._initializing[e]=!0;var n=this._deferred[e],r=n.deps,o=n.factory,s=function(n){var r=function(n){delete t._deferred[e],delete t._initializing[e],t._doRegister(e,n)};return a(n)?n.then(function(n){if(t._deferred[e])return r(n),n}):(r(n),n)},u=r.map(function(e){return t._getDependency(e)});if(u.some(function(e){return a(e)}))return this._deferred[e].promise=Promise.all(u).then(function(e){return s(o.apply(void 0,i(e)))}),this._deferred[e].promise;var c=o.apply(void 0,i(u));return a(c)?(this._deferred[e].promise=s(c),this._deferred[e].promise):s(c)}}]),e}();_.SERVICE_READY="service-ready",_.SERVICE_UNREGISTERED="service-unregistered",t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(604),s=r(a),u=n(5),c=r(u),d=n(4),l=n(11),f=n(14),h=n(0),p=d.LoggerFactory.getInstance().getLogger("core/TabManager"),v="normal",m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(0,c.default)(this),this._group=t.group||v,this._id=s.default.id,this._participants=[],this._loadParticipants(),this._clearDuplicateTabSessionStorage()}return o(e,[{key:"init",value:function(){if("call"===this._group&&this._participants.find(function(e){return"call"===e.group}))throw new h.ConflictError("Another peer with group `call` already exist");var e=s.default.util.eventTypes;s.default.on(e.tabClosed,this._handleTabClosed.bind(this)),s.default.on("sync.presence",this._handlePresence.bind(this)),s.default.on("sync.message",this._handleMessage.bind(this)),this._onJoined()}},{key:"getParticipants",value:function(){return this._participants}},{key:"getId",value:function(){return this._id}},{key:"broadcastMessage",value:function(e,t){this._broadcast("sync.message",e,t)}},{key:"deinit",value:function(){s.default.off()}},{key:"_broadcast",value:function(e,t,n){try{s.default.broadcast(e,t,n),localStorage.removeItem("crosstab.MESSAGE_KEY")}catch(t){p.warn("Error occur during broadcast, message of type "+e+" may not be sent: "+t.message)}}},{key:"_handlePresence",value:function(e){var t=e.data,n=t.type,r=t.data;"presence"===n&&this._onParticipantJoined(r)}},{key:"_handleTabClosed",value:function(e){var t=e.origin;t!==this.getId()&&this._onParticipantLeft({id:t})}},{key:"_handleMessage",value:function(e){this.emit(l.MESSAGE_RECEIVED,e)}},{key:"_onJoined",value:function(){var e=this;this._participants.find(function(t){return t.id===e.getId()})||this._participants.push({id:this.getId(),group:this._group}),this._saveParticipants();var t={id:this.getId(),group:this._group};this._broadcast("sync.presence",{type:"presence",data:t})}},{key:"_onParticipantJoined",value:function(e){var t=e.id,n=e.group;t!==this.getId()&&(this._participants.push({id:t,group:n}),this.emit(l.PEER_JOINED,{id:t}))}},{key:"_onParticipantLeft",value:function(e){var t=e.id,n=this._participants.findIndex(function(e){return e.id===t});-1!==n&&(this._participants.splice(n,1),this._saveParticipants(),this.emit(l.PEER_LEFT,{id:t}))}},{key:"_loadParticipants",value:function(){var e=Object.keys(s.default.util.tabs),t=JSON.parse(localStorage.getItem(f.TAB_PARTICIPANTS))||[];this._participants=t.filter(function(t){return e.includes(t.id)})}},{key:"_saveParticipants",value:function(){localStorage.setItem(f.TAB_PARTICIPANTS,JSON.stringify(this._participants))}},{key:"_clearDuplicateTabSessionStorage",value:function(){var e=sessionStorage.getItem(f.TAB_ID);if(sessionStorage.setItem(f.TAB_ID,this.getId()),e){this.getParticipants().find(function(t){return t.id===e})&&sessionStorage.removeItem("strophe-bosh-session")}}}]),e}();t.default=m,e.exports=t.default},function(e,t,n){(function(r){var i;!function(r,o){void 0!==(i=function(e,t,n){"use strict";function i(){if(!F.supported){var e="crosstab not supported",t=[];throw x||t.push("localStorage not availabe"),r.addEventListener||t.push("addEventListener not available"),I&&t.push("mobile browser"),N&&t.push("frozen tab environment detected"),C||t.push("localStorage.setItem not allowed"),t.length>0&&(e+=": "+t.join(", ")),new Error(e)}}function o(e){if(e&&e.key in k.storageEventKeys){var t;try{t=e.newValue?JSON.parse(e.newValue):{}}catch(e){t={}}if(t&&t.id&&t.id!==F.id&&(e.newValue!==j||e.oldValue!==D))if(j=e.newValue,D=e.oldValue,e.key===k.keys.MESSAGE_KEY){var n=t.data;n.destination&&n.destination!==F.id||P.emit(n.event,n)}else e.key===k.keys.FROZEN_TAB_ENVIRONMENT?(N=t.data,F.supported=F.supported&&!t.data):e.key===k.keys.SUPPORTED_KEY&&(F.supported=F.supported&&t.data)}}function a(e,t){var n={id:F.id,data:t,timestamp:k.now()};x.setItem(e,JSON.stringify(n))}function s(e){return u(e).data}function u(e){var t=x?x.getItem(e):null;return t?JSON.parse(t):{}}function c(){for(var e in k.eventTypes)k.eventTypes[e]!==k.eventTypes.tabClosed&&P.removeAllListeners(k.eventTypes[e]);F.stopKeepalive=!0;var t=0;k.forEach(k.tabs,function(e,n){n!==k.keys.MASTER_TAB&&t++}),1===t?(k.tabs={},S()):w(k.eventTypes.tabClosed,F.id)}function d(){c(),r.removeEventListener("unload",l,!1)}function l(){c(),r.removeEventListener("beforeunload",d,!1)}function f(){F.stopKeepalive=!1,M()}function h(){f()}function p(){return k.tabs[k.keys.MASTER_TAB]}function v(e){k.tabs[k.keys.MASTER_TAB]=e}function m(){delete k.tabs[k.keys.MASTER_TAB]}function g(){var e=p();return e?e.id:0}function _(){return g()===F.id}function y(){var e=null;k.forEach(k.tabs,function(t){(!e||t.id<e)&&(e=t.id)}),e===F.id?w(k.eventTypes.tabPromoted,F.id):v({id:e,lastUpdated:k.now()})}function b(e,t,n){n=n||"0";var r=e.toString();return r.length>=t?r:new Array(t-r.length+1).join(n)+r}function w(e,t,n){F.supported||i();var r={id:k.generateId(),event:e,data:t,destination:n,origin:F.id,timestamp:k.now()};r.destination!==r.origin&&a(k.keys.MESSAGE_KEY,r),r.destination&&r.destination!==r.origin||P.emit(e,r)}function $(e,t){w(e,t,p().id)}function E(){F.supported=!1,N=!0,a(k.keys.FROZEN_TAB_ENVIRONMENT,!0),a(k.keys.SUPPORTED_KEY,!1)}function S(){a(k.keys.TABS_KEY,k.tabs)}function O(){function e(e){return n-e.lastUpdated<G}function t(t,n){return n!==k.keys.MASTER_TAB&&!e(t)}var n=k.now(),r={id:F.id,lastUpdated:n};w(k.eventTypes.tabUpdated,r);var i=k.filter(k.tabs,t);if(k.forEach(i,function(e){w(k.eventTypes.tabClosed,e.id)}),!U){var o=p();o&&o.id!==r.id?(R&&A(),k.events.emit("setupComplete")):o&&o.id===r.id&&k.events.emit("setupComplete")}}function A(){var e,t;F.util.events.once("PONG",function(){U||(clearTimeout(e),a(k.keys.SUPPORTED_KEY,!0),a(k.keys.FROZEN_TAB_ENVIRONMENT,!1),k.events.emit("setupComplete"))}),t=k.now();var n=function(r){var i=k.now()-t;U||(r<=0&&i>V?(E(),k.events.emit("setupComplete")):e=setTimeout(function(){n(r-1)},5))};e=setTimeout(function(){n(5)},V-25),F.broadcastMaster("PING")}function M(){F.supported&&!F.stopKeepalive&&O()}var x,T=r.navigator&&(r.navigator.userAgent||r.navigator.vendor)||r.opera||"none",I=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(T)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(T.substr(0,4));try{x=r.localStorage,x=r["ie8-eventlistener/storage"]||r.localStorage}catch(e){}var C=!0;try{x.setItem("__crosstab",""),x.removeItem("__crosstab")}catch(e){C=!1}var R=!1,N=!1,k={keys:{MESSAGE_KEY:"crosstab.MESSAGE_KEY",TABS_KEY:"crosstab.TABS_KEY",MASTER_TAB:"MASTER_TAB",SUPPORTED_KEY:"crosstab.SUPPORTED",FROZEN_TAB_ENVIRONMENT:"crosstab.FROZEN_TAB_ENVIRONMENT"}};k.isArray=Array.isArray||function(e){return e instanceof Array},k.isNumber=function(e){return"number"==typeof e},k.isFunction=function(e){return"function"==typeof e},k.forEachObj=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.call(e,e[n],n,e)},k.forEachArr=function(e,t){for(var n=e.length,r=0;r<n;r++)t.call(e,e[r],r,e)},k.forEach=function(e,t){k.isArray(e)?k.forEachArr(e,t):k.forEachObj(e,t)},k.map=function(e,t){var n=[];return k.forEach(e,function(e,r,i){n.push(t(e,r,i))}),n},k.filter=function(e,t){var n=k.isArray(e),r=n?[]:{};return n?k.forEachArr(e,function(e,n){t(e,n)&&r.push(e)}):k.forEachObj(e,function(e,n){t(e,n)&&(r[n]=e)}),r},k.reduce=function(e,t,n){var r=arguments.length<3;return k.forEach(e,function(e,i,o){r?(n=e,r=!1):n=t(n,e,i,o)}),n},k.now=function(){return(new Date).getTime()},k.tabs=function(){var e=s(k.keys.TABS_KEY);return k.tabs=e||k.tabs||{},k.tabs}(),k.eventTypes={becomeMaster:"becomeMaster",demoteFromMaster:"demotedFromMaster",tabUpdated:"tabUpdated",tabClosed:"tabClosed",tabPromoted:"tabPromoted"},k.storageEventKeys=k.reduce(k.keys,function(e,t){return e[t]=1,e},{}),k.createEventHandler=function(){var e={},t={},n=function(e,n){var r;return t[e]&&(r=t[e][n]),r},r=function(t,n){var r=-1,i=e[t];if(i&&n)for(var o=i.length||0,a=0;a<o;a++)if(i[a]===n){r=a;break}return r},i=function(e,i,o){var a,s=c(e),u=n(e,o);return void 0===u?(a=s.length,s[a]=i,t[e]||(t[e]={}),o&&(t[e][o]=i)):(a=r(e,u),s[a]=i),o||i},o=function(i,o){var a=k.isFunction(o)?o:n(i,o),s=r(i,a);return-1!==s&&(!(!e[i]||!e[i][s])&&(e[i].splice(s,1),delete t[i][o],!0))},a=function(n){var r=!1;return n?(e[n]&&(delete e[n],r=!0),t[n]&&(delete t[n],r=r&&!0)):(e={},t={},r=!0),r},s=function(e){var t=Array.prototype.slice.call(arguments,1),n=c(e);k.forEach(n,function(e){k.isFunction(e)&&e.apply(this,t)})},u=function(e,t,r){for(;!r||void 0!==n(e,r);)r=k.generateId();return i(e,function(){o(e,r);var n=Array.prototype.slice.call(arguments);t.apply(this,n)},r),r},c=function(t){return e[t]=e[t]||[]};return{addListener:i,destructor:function(){clearInterval(F.keepAliveInterval),a()},on:i,off:function(e,t){var n=arguments.length;return n?1===n?a(e):o(e,t):a()},once:u,emit:s,listeners:c,removeListener:o,removeAllListeners:a}};var P=k.createEventHandler();k.events={addListener:P.addListener,on:P.on,off:P.off,once:P.once,emit:P.emit,listeners:P.listeners,removeListener:P.removeListener,removeAllListeners:P.removeAllListeners,destructor:P.destructor};var j,D;P.addListener(k.eventTypes.tabClosed,function(e){var t=e.data;t in k.tabs&&delete k.tabs[t];var n=p();n&&n.id!==t?n.id===F.id&&S():(n&&m(),y())}),P.addListener(k.eventTypes.tabUpdated,function(e){var t=e.data;k.tabs[t.id]=t,p()||y(),g()===t.id&&v(t),_()&&S()});var L;P.addListener(k.eventTypes.tabPromoted,function(e){var t=e.data,n=e.timestamp,r=g();if(F.id<t)return void(L||(L=setTimeout(function(){L=0,w(k.eventTypes.tabPromoted,F.id)},0)));v({id:t,lastUpdated:n}),_()&&S(),_()&&r!==F.id?k.events.emit(k.eventTypes.becomeMaster):_()||r!==F.id||k.events.emit(k.eventTypes.demoteFromMaster)}),k.generateId=function(){return k.now().toString()+b(2147483647*Math.random()|0,10)};var U=!1;k.events.once("setupComplete",function(){U=!0});var F=function(e){U?e():k.events.once("setupComplete",e)};F.id=k.generateId(),F.supported=!!x&&r.addEventListener&&!I&&C,F.util=k,F.broadcast=w,F.broadcastMaster=$,F.on=k.events.on,F.once=k.events.once,F.off=k.events.off;if(!U&&F.supported){var q=u(k.keys.FROZEN_TAB_ENVIRONMENT);if(q.timestamp){var B=q.data;k.now()-q.timestamp>6e5?x.removeItem(k.keys.FROZEN_TAB_ENVIRONMENT):!0===B&&E()}var H=u(k.keys.SUPPORTED_KEY);if(H.timestamp){var z=H.data;k.now()-H.timestamp>6e5?x.removeItem(k.keys.SUPPORTED_KEY):!1!==z&&!0!==z||(F.supported=z,k.events.emit("setupComplete"))}}var G=5e3,V=500;F.supported?(r.addEventListener("storage",o,!1),r.addEventListener("beforeunload",d,!1),r.addEventListener("unload",l,!1),r.addEventListener("DOMContentLoaded",h,!1),R&&k.events.on("PING",function(e){e.destination&&e.destination===F.id&&k.now()-e.timestamp<V&&F.broadcast("PONG",null,e.origin)}),F.keepAliveInterval=setInterval(M,3e3),M()):F.broadcast=i,n.exports=F}.call(t,n,t,e))&&(e.exports=i)}("object"==typeof window?window:r,n(289))}).call(t,n(19))},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return 100*Date.now()+Math.floor(100*Math.random())}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(10),d=n(11),l=function(){function e(t){i(this,e),(0,u.default)(this),this._tabMgr=t,this._requests={}}return a(e,[{key:"broadcast",value:function(){}},{key:"unicast",value:function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.isString)(n)||(n=this.getMasterId()),n===this.getId()){e.next=3;break}return e.abrupt("return");case 3:this.emit(d.REQUEST_RECEIVED,{message:t});case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){(0,c.isString)(t)||(t=n.getMasterId());var a=o();n._requests[a]={target:t,message:e,respond:function(e){r(e.message)},reject:i},t===n.getId()&&n.emit(d.REQUEST_RECEIVED,{requestId:a,message:e})})}},{key:"respond",value:function(e,t){this._requests[e]&&(this._requests[e].respond({message:t}),delete this._requests[e])}},{key:"getParticipants",value:function(){return[{id:this.getId(),mode:d.MODE_ACTIVE,group:"normal"}]}},{key:"getId",value:function(){return this._tabMgr.getId()}},{key:"getMasterId",value:function(){return this.getId()}},{key:"isActive",value:function(){return!0}},{key:"deinit",value:function(){}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return e.devices.map(function(e){return{id:e.id,applicationIdentifier:e.application_identifier,model:e.device_model,os:e.os_version,platform:e.platform,browser:e.browser,ip:e.ip,country:e.country,city:e.city,lastSeen:e.last_seen_timestamp}})}function s(e){if(e&&"ErrorResponse"===e["@type"]){var t=e.error,n=e.message;switch(t){case"INVALID_SOURCE_DEVICE":throw new L.ValidationError(n);default:throw new Error(t+" Error: "+n)}}}function u(e){if(e.error){var t=e.error,n=t.code,r=t.message;switch(n){case z.VALIDATION_REQUIRED_FOR_SIGNUP:throw new L.ForbiddenError("Authentication required: "+r);default:throw new Error("Unknown error: "+r)}}}function c(e){throw(0,H.createErrorFromErrorStanza)(e)}function d(e,t){var n=1e3*t;return(0,b.default)(n).then(function(){throw new L.TimeoutError("Timeout reached for "+e+".")})}function l(e,t){var n=e.applicationKey,r=(new Date).toUTCString(),i=m.default.v4().replace("-",""),o=(0,A.default)(JSON.stringify(e)).toString(x.default);return{"X-M-Date":r,"X-M-Nonce":i,"content-md5":o,Authorization:f(n,t,o,r,i)}}function f(e,t,n,r,i){var o=k.default.uniqueId,a=o+"\n"+n+"\napplication/json;charset=UTF-8\n"+r+"\n"+i,s=(0,I.default)(a,t).toString(x.default);return"Basic "+btoa(e+":"+s)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),v=n(188),m=r(v),g=n(5),_=r(g),y=n(59),b=r(y),w=n(55),$=r(w),E=n(3),S=r(E),O=n(196),A=r(O),M=n(607),x=r(M),T=n(608),I=r(T),C=n(124),R=n(148),N=n(46),k=r(N),P=n(609),j=n(612),D=n(613),L=n(0),U=n(197),F=r(U),q=n(17),B=n(40),H=n(7),z=n(618),G=n(199),V=n(619),J=r(V),K="profile.update",Y="echo.profile.updated",W={domain:"mgmt.maaii.com",ns:"jabber:iq:maaii:management"};p.Strophe.addConnectionPlugin("DeviceRegistration",J.default);var X=function(){function e(t,n,r,i){var a=this;o(this,e),(0,_.default)(this),this._connectService=n,this._notificationService=r,this._configService=i,t.subscribe("plugin.device.update",this._onReceivedDeviceUpdate.bind(this)),t.subscribe("plugin.update",this._onConnectionUpdate.bind(this)),r.on(C.NOTIFICATION_RECEIVED,function(e){var t=e.type;t!==K&&t!==Y||a.emit(R.PROFILE_UPDATED_NOTIFICATION_RECEIVED,e)})}return h(e,[{key:"signUp",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Promise.resolve().then(function(){(0,S.default)("baseUrl",e,B.isValidBaseUrl,"Invalid baseUrl argument.");var i=n._doSignUp(e,t),o=d("signUp",r);return Promise.race([i,o])}).then(D.parseSignUpResponse)}},{key:"login",value:function(e){var t=Object.assign({},e,{"@type":"UserLoginRequest"});return this._send(t).then(D.parseLogInResponse).catch(c)}},{key:"updateProfile",value:function(e){var t=Object.assign({},e,{"@type":"UpdateUserProfileRequest"});return this._send(t)}},{key:"getProfile",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._getCurrentUserBareJid(),r=this._composeQueryContactStanza(n,t),e.next=4,this._sendIqRequest(r);case 4:return i=e.sent,e.abrupt("return",(0,H.parseQueryContactResponse)(i));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"fetchActiveDeviceList",value:function(){var e={"@type":"ActiveDeviceListRequest"};return this._sendDeviceQuery(e).then(a).catch(c)}},{key:"deactivateDevice",value:function(e){var t={"@type":"DeactivateDeviceRequest",target_device_id:e};return this._sendDeviceQuery(t).then(s).catch(c)}},{key:"deactivateAllDevices",value:function(e){var t=this,n=k.default.uniqueId,r={"@type":"DeactivateAllDevices",include_this:!!e};return this._sendDeviceQuery(r).then(s).catch(c).then(function(){if(e)return t.deactivateDevice(n)})}},{key:"_doSignUp",value:function(e,t){var n=e+"/v2/users",r=(0,$.default)(t,["developerKey"]),i=l(r,t.developerKey),o={parameters:r,headers:i};return F.default.post(n,o).then(function(e){return u(e),(0,B.validateBySchema)(e,j.SignUpResponseSchema,L.UnexpectedResponseError),e})}},{key:"_sendDeviceQuery",value:function(e){var t=this;return new Promise(function(n){var r=t._connectService.getStropheConnection();if(!r)throw new L.InvalidOperationError("No available connection.");n((0,P.sendDeviceQuery)(r,e,t._configService.getXmppTimeout()))})}},{key:"_composeQueryContactStanza",value:function(e,t){var n=this._connectService.getJid();return(0,H.composeQueryContactStanza)(e,n,t,(0,q.generateIqId)(n))}},{key:"_send",value:function(e){var t=this;return new Promise(function(n){var r=t._connectService.getStropheConnection();if(!r)throw new L.InvalidOperationError("No available connection.");n((0,P.sendMaaiiRequest)(r,W,e,t._configService.getXmppTimeout()))})}},{key:"_sendIqRequest",value:function(e){return(0,H.sendIqRequest)(this._connectService.getStropheConnection(),e,this._configService.getXmppTimeout())}},{key:"_getCurrentUserBareJid",value:function(){return p.Strophe.getBareJidFromJid(this._connectService.getJid())}},{key:"_onReceivedDeviceUpdate",value:function(e){this.emit(G.DEVICE_LIST_RECEIVED,e)}},{key:"_onConnectionUpdate",value:function(e){var t=e["sso:token"];t&&this.emit(R.SSO_TOKEN_UPDATED,{token:t})}}]),e}();t.default=X,e.exports=t.default},function(e,t,n){!function(r,i){e.exports=t=i(n(29))}(0,function(e){return e.enc.Hex})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(29),n(125),n(195))}(0,function(e){return e.HmacSHA256})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;return new Promise(function(i,o){var s=d.default.generateIqId(u.Strophe.getBareJidFromJid(e.jid)),c=a(s,t,n);e.sendIQ(c,function(e){try{var t=JSON.parse((0,f.default)(e).findFirst("maaii-response").content());i(t)}catch(e){o(new p.UnexpectedResponseError("Unable to parse response. "+e.message,e))}},function(e){if(v.warn("Maaii request error:",e),null===e)return void o(new p.TimeoutError("Network Error"));o(e)},r)})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return new Promise(function(r,i){var o=d.default.generateIqId(u.Strophe.getBareJidFromJid(e.jid)),a=s(o,t);e.sendIQ(a,function(e){try{var t=(0,f.default)(e).findFirst("query").content();if(!t)return void r();var n=JSON.parse(t);r(n)}catch(e){i(new p.UnexpectedResponseError("Unable to parse response. "+e.message,e))}},function(e){if(v.warn("Device query request error:",e),null===e)return void i(new p.TimeoutError("Network Error"));i(e)},n)})}function a(e,t,n){var r=t.domain,i=t.ns,o=u.Strophe.xmlGenerator().createCDATASection(JSON.stringify(n)),a=(0,u.$iq)({type:"set",to:r,id:e});return a.c("maaii-request",{xmlns:i}).node.appendChild(o),a}function s(e,t){var n=u.Strophe.xmlGenerator().createCDATASection(JSON.stringify(t)),r=(0,u.$iq)({type:"set",id:e});return r.c("query",{xmlns:"urn:maaii:rpc",node:"device.manager"}).node.appendChild(n),r}Object.defineProperty(t,"__esModule",{value:!0}),t.sendMaaiiRequest=i,t.sendDeviceQuery=o;var u=n(1),c=n(17),d=r(c),l=n(6),f=r(l),h=n(4),p=n(0),v=h.LoggerFactory.getInstance().getLogger("core/xmpp/request"),m=5e3},function(e,t,n){var r,i,o;!function(n,a){i=[],r=a,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(){var e=function(e){return e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},t=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},n=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},r=function(e){var n=e.value;return" "+e.name+'="'+t(n)+'"'},i=function(e){var t=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(t=t.toLowerCase()),t},o=function(e,t){return Array.prototype.map.call(e.attributes||e.attrs,function(e){return e.name}).indexOf("xmlns")>=0||!t&&e.namespaceURI===e.parentNode.namespaceURI?"":' xmlns="'+e.namespaceURI+'"'},a=function(e){return Array.prototype.map.call(e.childNodes,function(e){return l(e)}).join("")},s=function(e,t){var n="<"+i(e);return n+=o(e,t),Array.prototype.forEach.call(e.attributes||e.attrs,function(e){n+=r(e)}),e.childNodes.length>0?(n+=">",n+=a(e),n+="</"+i(e)+">"):n+="/>",n},u=function(e){var t=e.nodeValue||e.value||"";return n(t)},c=function(e){return"\x3c!--"+e.data.replace(/-/g,"&#45;")+"--\x3e"},d=function(e){return"<![CDATA["+e.nodeValue+"]]>"},l=function(e,t){var n=t&&t.rootNode;return"#document"===e.nodeName||"#document-fragment"===e.nodeName?a(e):e.tagName?s(e,n):"#text"===e.nodeName?u(e):"#comment"===e.nodeName?c(e):"#cdata-section"===e.nodeName?d(e):void 0};return{serializeToString:function(t){return e(l(t,{rootNode:!0}))}}})},function(e,t){/**
* pretty-data - nodejs plugin to pretty-print or minify data in XML, JSON and CSS formats.
*  
* Version - 0.40.0
* Copyright (c) 2012 Vadim Kiryukhin
* vkiryukhin @ gmail.com
* http://www.eslinstructor.net/pretty-data/
* 
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*	pd.xml(data ) - pretty print XML;
*	pd.json(data) - pretty print JSON;
*	pd.css(data ) - pretty print CSS;
*	pd.sql(data)  - pretty print SQL;
*
*	pd.xmlmin(data [, preserveComments] ) - minify XML; 
*	pd.jsonmin(data)                      - minify JSON; 
*	pd.cssmin(data [, preserveComments] ) - minify CSS; 
*	pd.sqlmin(data)                       - minify SQL; 
*
* PARAMETERS:
*
*	@data  			- String; XML, JSON, CSS or SQL text to beautify;
* 	@preserveComments	- Bool (optional, used in minxml and mincss only); 
*				  Set this flag to true to prevent removing comments from @text; 
*	@Return 		- String;
*	
* USAGE:
*	
*	var pd  = require('pretty-data').pd;
*
*	var xml_pp   = pd.xml(xml_text);
*	var xml_min  = pd.xmlmin(xml_text [,true]);
*	var json_pp  = pd.json(json_text);
*	var json_min = pd.jsonmin(json_text);
*	var css_pp   = pd.css(css_text);
*	var css_min  = pd.cssmin(css_text [, true]);
*	var sql_pp   = pd.sql(sql_text);
*	var sql_min  = pd.sqlmin(sql_text);
*
* TEST:
*	comp-name:pretty-data$ node ./test/test_xml
*	comp-name:pretty-data$ node ./test/test_json
*	comp-name:pretty-data$ node ./test/test_css
*	comp-name:pretty-data$ node ./test/test_sql
*/
function n(e){if(e=e||{},this.shift=["\n"],this.step="  ",e.step){this.step="";for(var t=0;t<e.step;t++)this.step+=" "}var n=e.maxdeep||100,r=0;for(r=0;r<n;r++)this.shift.push(this.shift[r]+this.step)}function r(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function i(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/~::~{1,}/g,"~::~").split("~::~")}n.prototype.xml=function(e){var t=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").split("~::~"),n=t.length,r=!1,i=0,o="",a=0;for(a=0;a<n;a++)t[a].search(/<!/)>-1?(o+=this.shift[i]+t[a],r=!0,(t[a].search(/-->/)>-1||t[a].search(/\]>/)>-1||t[a].search(/!DOCTYPE/)>-1)&&(r=!1)):t[a].search(/-->/)>-1||t[a].search(/\]>/)>-1?(o+=t[a],r=!1):/^<\w/.exec(t[a-1])&&/^<\/\w/.exec(t[a])&&/^<[\w:\-\.\,]+/.exec(t[a-1])==/^<\/[\w:\-\.\,]+/.exec(t[a])[0].replace("/","")?(o+=t[a],r||i--):t[a].search(/<\w/)>-1&&-1==t[a].search(/<\//)&&-1==t[a].search(/\/>/)?o=o+=r?t[a]:this.shift[i++]+t[a]:t[a].search(/<\w/)>-1&&t[a].search(/<\//)>-1?o=o+=r?t[a]:this.shift[i]+t[a]:t[a].search(/<\//)>-1?o=o+=r?t[a]:this.shift[--i]+t[a]:t[a].search(/\/>/)>-1?o=o+=r?t[a]:this.shift[i]+t[a]:t[a].search(/<\?/)>-1?o+=this.shift[i]+t[a]:t[a].search(/xmlns\:/)>-1||t[a].search(/xmlns\=/)>-1?o+=this.shift[i]+t[a]:o+=t[a];return"\n"==o[0]?o.slice(1):o},n.prototype.json=function(e){return"string"==typeof e?JSON.stringify(JSON.parse(e),null,this.step):"object"==typeof e?JSON.stringify(e,null,this.step):null},n.prototype.css=function(e){var t=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),n=t.length,r=0,i="",o=0;for(o=0;o<n;o++)/\{/.exec(t[o])?i+=this.shift[r++]+t[o]:/\}/.exec(t[o])?i+=this.shift[--r]+t[o]:(/\*\\/.exec(t[o]),i+=this.shift[r]+t[o]);return i.replace(/^\n{1,}/,"")},n.prototype.sql=function(e){var t=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),n=t.length,o=[],a=0,s=this.step,u=0,c="",d=0;for(d=0;d<n;d++)o=d%2?o.concat(t[d]):o.concat(i(t[d],s));for(n=o.length,d=0;d<n;d++)u=r(o[d],u),/\s{0,}\s{0,}SELECT\s{0,}/.exec(o[d])&&(o[d]=o[d].replace(/\,/g,",\n"+s+s)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(o[d])?(a++,c+=this.shift[a]+o[d]):/\'/.exec(o[d])?(u<1&&a&&a--,c+=o[d]):(c+=this.shift[a]+o[d],u<1&&a&&a--);return c=c.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},n.prototype.xmlmin=function(e,t){var n=e;return t&&e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,""),n.replace(/>\s{0,}</g,"><").replace(/\<([^>]+)\>/g,function(e){return e.replace(/\n/g," ").replace(/\s+/g," ")})},n.prototype.jsonmin=function(e){return e.replace(/\s{0,}\{\s{0,}/g,"{").replace(/\s{0,}\[$/g,"[").replace(/\[\s{0,}/g,"[").replace(/:\s{0,}\[/g,":[").replace(/\s{0,}\}\s{0,}/g,"}").replace(/\s{0,}\]\s{0,}/g,"]").replace(/\"\s{0,}\,/g,'",').replace(/\,\s{0,}\"/g,',"').replace(/\"\s{0,}:/g,'":').replace(/:\s{0,}\"/g,':"').replace(/:\s{0,}\[/g,":[").replace(/\,\s{0,}\[/g,",[").replace(/\,\s{2,}/g,", ").replace(/\]\s{0,},\s{0,}\[/g,"],[")},n.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},n.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},e.exports={pp:n,pd:new n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SignUpRequestSchema={$schema:"http://json-schema.org/draft-04/schema#",title:"SignUpRequest",description:"XMPP API Sign Up Request params to sign up",type:"object",properties:{"@type":{type:"string",pattern:"^UserSignupRequestV2$"},carrierIdentifier:{type:"string"},applicationKey:{type:"string"},maaiiId:{type:"string"},validationType:{type:"string"},userSelectedLanguage:{type:"string"},nonVerifiedMode:{type:"boolean"},userIdentity:{type:"object",properties:{countryCode:{type:"string"},identifier:{type:"string"},identifierType:{type:"string"},profileAttributes:{type:"array",items:{type:"object",properties:{name:{type:"string"},value:{type:"string"}}},uniqueItems:!0},required:["identifier","identifierType"]}},mobileDevice:{type:"object",properties:{hardwareIdentifier:{type:"string"},osIdentifier:{type:"string"},uniqueIdentifier:{type:"string"},platformIdentifier:{type:"string"},language:{type:"string"},timezone:{type:"string"},currentMNC:{type:"string"},msisdn:{type:"string"},resolution:{type:"string"},cpuClock:{type:"string"},ramSize:{type:"string"},imsi:{type:"string"},application:{type:"object",properties:{identifier:{type:"string"},versionMajor:{type:"integer"},versionMinor:{type:"integer"},versionPatch:{type:"integer"}},required:["identifier","versionMajor","versionMinor","versionPatch"]},required:["hardwareIdentifier","osIdentifier","uniqueIdentifier","platformIdentifier","application","language","timezone"]},maaiiId:{type:"string"},smsValidationCode:{type:"string"},validationRequestId:{type:"string"},nonVerifiedMode:{type:"boolean"},sdkVersion:{type:"string"},passiveValidation:{type:"boolean"},inetAddress:{type:"string"},userSelectedLanguage:{type:"string"},userIdentity:{type:"object",properties:{identifier:{type:"string"},identifierType:{type:"string"},countryCode:{type:"string"},primary:{type:"string"},profileAttributes:{type:"string"}},required:["identifier","identifierType"]}},required:["@type","carrierIdentifier","applicationKey","validationType","userSelectedLanguage","mobileDevice"]}},t.SignUpResponseSchema={$schema:"http://json-schema.org/draft-04/schema#",title:"UserSignupResponse",description:"XMPP API Response params after sign up",type:"object",properties:{"@type":{type:"string",pattern:"^UserSignupResponseV2$"},requestId:{type:"string"},username:{type:"string"},password:{type:"string"},carrierName:{type:"string"},deviceSecret:{type:"string"},ssoToken:{type:"string"},provisionalInformation:{type:"object",properties:{allocations:{type:"array"}}}},required:["@type","requestId","username","password","carrierName","deviceSecret","ssoToken","provisionalInformation"]}},function(e,t,n){"use strict";function r(e){return(0,c.isArray)(e)?(0,l.parseNameValueObjectArray)(e):{}}function i(e){var t=Object.assign({},e);return(0,u.default)(t,function(e,t,n){var i=e.type,o=e.port,a=e.attributes;return-1===i.indexOf(".sbc")&&(n[t].port=(0,d.toPrimitiveValue)(o),n[t].attributes=r(a),!0)})}function o(e){var t=Object.assign({},e),n=t.provisionalInformation.allocations;t.provisionalInformation.allocations=i(n);var o=t.provisionalInformation.attributes;t.provisionalInformation.attributes=r(o);var a=t.userProfile;return t.userProfile=r(a),t}function a(e){var t=Object.assign({},e),n=t.provisionalInformation.allocations;t.provisionalInformation.allocations=i(n);var o=t.provisionalInformation.attributes;return t.provisionalInformation.attributes=r(o),t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseSignUpResponse=o,t.parseLogInResponse=a;var s=n(310),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(10),d=n(34),l=n(58)},function(e,t,n){function r(e,t){var n=[];return i(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}var i=n(71);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=e.findFirst("profile"),n={};if(!t)throw new f.NotFoundError("The profile not exist");return t.children().forEach(function(e){var t=e.attr("name"),r=t.split("."),i=r[r.length-1];n[i]=e.content()}),n}function o(e){return(0,d.default)("response",e),e.attributes.reduce(function(e,t){var n=t.name.split("com.maaii.user.profile.")[1];return Object.assign(e,r({},n,t.value))},{})}function a(e){var t=(0,l.parseMaaiiResponse)(e),n=JSON.parse(t);if(!n.queryResponses||!n.queryResponses[0]){var r=new f.UnexpectedResponseError("User profile not found in response");throw r.details={responseBody:n},r}return o(n.queryResponses[0])}function s(e,t,n,r){var i=u.Strophe.getNodeFromJid(t),o=u.Strophe.getDomainFromJid(t),a=u.Strophe.getNodeFromJid(e),s=u.Strophe.getDomainFromJid(e),c={"@type":"GetUserProfileRequest",applicationKey:n,carrierName:o,username:i,targetProfileQuery:[{username:a,carrierName:s,allAttributes:!0}]},d={id:r,to:"mgmt."+o,type:"set"},f=[{name:"maaii-request",attributes:{xmlns:"jabber:iq:maaii:management"},body:JSON.stringify(c)}];return(0,l.composeIq)(d,f)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseContactListUserProfile=i,t.parseQueryContactAttributes=o,t.parseQueryContactResponse=a,t.composeQueryContactStanza=s;var u=n(1),c=n(57),d=function(e){return e&&e.__esModule?e:{default:e}}(c),l=n(135),f=n(0)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){var t=(0,$.default)(e);if("groupchat"!==t.attr("type"))return!1;if(!t.children().find(function(e){return"thread"===e.name()}))return!1;var n=t.findFirst("group");return!(!n||!n.attr("version"))}function o(e){if(!i(e))return!1;var t=(0,$.default)(e).findFirst("joined",E.MAAII_GROUP);if(!t)return!1;var n=t.findFirst("group");return!!n&&!!n.attr("version")}function a(e){if(!i(e))return!1;var t=(0,$.default)(e).findFirst("joined",E.MAAII_GROUP);return!!t&&!t.findFirst("group")}function s(e){return!!i(e)&&!!(0,$.default)(e).findFirst("left",E.MAAII_GROUP)}function u(e){return!!i(e)&&!!(0,$.default)(e).findFirst("roles",E.MAAII_GROUP)}function c(e){return!!i(e)&&!!(0,$.default)(e).findFirst("properties",E.MAAII_GROUP)}function d(e){return!!i(e)&&!!(0,$.default)(e).findFirst("subject")}function l(e){if(!i(e))return!1;var t=(0,$.default)(e);return!!(t.findFirst("joined",E.MAAII_GROUP)||t.findFirst("left",E.MAAII_GROUP)||t.findFirst("roles",E.MAAII_GROUP)||t.findFirst("subject")||t.findFirst("properties",E.MAAII_GROUP))}function f(e){var t=(0,$.default)(e);return t.attr("xmlns")===E.JABBER_CLIENT&&i(t)&&!l(t)}function h(e){var t=(0,$.default)(e).findFirst("thread");return t?t.content():null}function p(e){var t=(0,$.default)(e).findFirst("group");if(!t)return null;var n=t.attr("version");return n?parseInt(n,10):null}function v(e){if(!(0,b.isResultIq)(e))return null;var t=(0,$.default)(e),n=t.findFirst("group");return n?{id:n.attr("id"),version:parseInt(n.attr("version"),10)}:null}function m(e){var t=e.attr("jid"),n=e.attr("role"),r=e.findFirst("nick");return{jid:t,role:n,nickname:r&&r.content()}}function g(e){return e.find("member").map(m)}function _(e){return{name:e.attr("name"),value:e.attr("value"),scope:e.attr("scope"),setOn:e.attr("setOn"),content:e.content()}}function y(e){var t=_(e);return{name:t.name,data:r(t,["name"])}}Object.defineProperty(t,"__esModule",{value:!0}),t.isGroupNotification=i,t.isGroupSelfJoinedNotification=o,t.isGroupOthersJoinedNotification=a,t.isGroupLeftNotification=s,t.isGroupRolesNotification=u,t.isGroupPropertiesNotification=c,t.isGroupSubjectNotification=d,t.isGroupMetadata=l,t.isGroupChat=f,t.getGroupId=h,t.getGroupVersion=p,t.getGroupInfoFromResultIq=v,t.parseMemberNode=m,t.parseMemberNodes=g,t.getParsedPropertyData=y;var b=n(135),w=n(6),$=function(e){return e&&e.__esModule?e:{default:e}}(w),E=n(36)},function(e,t,n){"use strict";function r(e){return!(0,u.isNotification)(e)&&!!(0,d.default)(e).children().find(function(e){return"body"===e.name()})}function i(e){return!(0,u.isNotification)(e)&&!!(0,d.default)(e).children().find(function(e){return"file"===e.name()})}function o(e){return!!(0,d.default)(e).findFirst("received")}function a(e){return!!(0,d.default)(e).findFirst("request",l.RECEIPTS)}function s(e){return!!(0,d.default)(e).children().find(function(e){return"displayed"===e.name()&&e.attr("xmlns")===l.MAAII_RECEIPTS})}Object.defineProperty(t,"__esModule",{value:!0}),t.isTextMessage=r,t.isFileMessage=i,t.isAckMessage=o,t.isDeliveryReceiptRequest=a,t.isDisplayedReceipt=s;var u=n(135),c=n(6),d=function(e){return e&&e.__esModule?e:{default:e}}(c),l=n(36)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VALIDATION_REQUIRED_FOR_SIGNUP=20103},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(28),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a={init:function(e){this._conn=e},statusChanged:function(e){switch(e){case r.Strophe.Status.CONNECTED:case r.Strophe.Status.ATTACHED:this._addDeviceRegistrationListener();break;case r.Strophe.Status.DISCONNECTED:this._removeDeviceRegistrationListener()}},_addDeviceRegistrationListener:function(){this._deviceRegistrationSubscription=o.default.subscribe("plugin.notification.device.registration",this._onReceivedDeviceRegistration.bind(this))},_removeDeviceRegistrationListener:function(){o.default.unsubscribe(this._deviceRegistrationSubscription)},_onReceivedDeviceRegistration:function(e){var t=e.d,n=e.a,r=e.m,i=e.p,a=e.o,s=e.ip,u=e.ct,c=e.c,d=e.w,l=e.ts,f={id:t,applicationIdentifier:n,model:r,platform:i,os:a,ip:s,country:u,city:c,browser:d,registrationTime:new Date(l).getTime()};o.default.publish("plugin.device.update",[f])}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=D.getItem(C.SSO_TOKEN),t=void 0;if(e){var n=(0,R.getUserTokenFromStorage)();try{t=(0,N.decrypt)(e,n)}catch(e){t=void 0}}return t}function s(e){var t,n=a();return Object.assign({},e,(t={},o(t,j,n),o(t,"xmlns:sso",P),t))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e[j]){var t=(0,R.getUserTokenFromStorage)();D.setItem(C.SSO_TOKEN,(0,N.encrypt)(e[j],t))}}function c(e){var t=new Error("Cannot connect: "+e.type);return t.details={context:e},t}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=n(5),h=r(f),p=n(12),v=r(p),m=n(621),g=r(m),_=n(624),y=r(_),b=n(625),w=r(b),$=n(626),E=r($),S=n(627),O=r(S),A=n(35),M=r(A),x=n(41),T=n(37),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(T),C=n(14),R=n(133),N=n(47),k=n(0);l.Strophe.addConnectionPlugin("Connect",g.default),l.Strophe.addConnectionPlugin("Update",y.default),l.Strophe.addConnectionPlugin("Notification",w.default),l.Strophe.addConnectionPlugin("Ping",E.default);var P="urn:maaii:sso",j="sso:token",D=(0,M.default)(localStorage),L=function(){function e(t){i(this,e),(0,h.default)(this),this.pubsub=t,this.user=null,this.status=I.DISCONNECTED}return d(e,[{key:"connect",value:function(e,t,n,r){var i=this;this.connectorEventHandler&&this.connectorEventHandler.reset(),this.connector&&this.connector.reset(),this.connectionUpdateSubscription=this.pubsub.subscribe("plugin.update",u);var o=s(n);return this.connector=new O.default(this.pubsub,e,t,o,r),this.changeStatus(I.CONNECTING),this.connector.restore().catch(function(){return i.connector.connect()}).then(function(){i.user=t,i.changeStatus(I.CONNECTED);var e=i.connectorEventHandler=new v.default(i.connector);Object.keys(I).forEach(function(t){e.add(I[t],function(e){i.changeStatus(I[t],e)})})}).catch(function(e){throw i.changeStatus(I.DISCONNECTED,e),c(e)})}},{key:"reconnect",value:function(){var e=this;return this.connector?this.connector.getStatus()!==I.DISCONNECTED?Promise.reject(new k.InvalidOperationError("Not disconnected")):this.connector.restore().catch(function(){return e.connector.connect()}).catch(function(e){throw c(e)}):Promise.reject(new k.InvalidOperationError("No existing connection"))}},{key:"disconnect",value:function(){var e=this;return this.connector?(this.pubsub.unsubscribe(this.connectionUpdateSubscription),this.connector.disconnect().then(function(t){return e.user=null,t})):Promise.reject(new k.InvalidOperationError("No existing connection"))}},{key:"sendPresence",value:function(e){var t=this.getStropheConnection();if(!t)throw new k.InvalidOperationError("No available connection.");t.send((0,l.$pres)(e).tree())}},{key:"getStatus",value:function(){return this.status}},{key:"getEndpoint",value:function(){return this.connector?this.connector.getEndpoint():null}},{key:"getStropheConnection",value:function(){return this.connector?this.connector.getXmppConnection():null}},{key:"getJid",value:function(){return this.user?this.user.jid:null}},{key:"getPassword",value:function(){return this.user?this.user.password:null}},{key:"getCarrier",value:function(){return this.user?l.Strophe.getDomainFromJid(this.user.jid):null}},{key:"changeStatus",value:function(e,t){e!==this.status&&(this.status=e,this.reason=t,this.emit(x.STATUS_CHANGED,{status:e,reason:t}))}}]),e}();t.default=L,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(28),o=function(e){return e&&e.__esModule?e:{default:e}}(i);n(622),n(623),r.Strophe.addNamespace("MAAII","urn:maaii");var a={init:function(e){this._conn=e,this._boshBodyAttrs={}},setBoshBodyAttrs:function(e){this._boshBodyAttrs=e},getBoshBodyAttrs:function(){return this._boshBodyAttrs},statusChanged:function(e,t){o.default.publish("plugin.connection-status",[{status:e,condition:t}])}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(36),a=i.LoggerFactory.getInstance().getLogger("core/xmpp/strophe/Bosh");r.Strophe.Bosh.prototype._connect=function(e,t,n){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;var i={to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmlns:xmpp":r.Strophe.NS.BOSH,"xmpp:version":"1.1.SSO","xmlns:maaii":o.MAAII,from:this._conn.jid},s=this._conn.Connect.getBoshBodyAttrs();Object.assign(i,s);var u=this._buildBody().attrs(i);a.info("Using Maaii Connection protocol"),n&&u.attrs({route:n});var c=this._conn._connect_cb;this._requests.push(new r.Strophe.Request(u.tree(),this._onRequestStateChange.bind(this,c.bind(this._conn)),u.tree().getAttribute("rid"))),this._throttledRequestHandler()}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,o=n(1),a=n(281),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(4),c=n(229),d=u.LoggerFactory.getInstance().getLogger("core/xmpp/strophe/Connection");d.trace=s.default;var l=(i={},r(i,o.Strophe.LogLevel.DEBUG,c.LogLevel.TRACE),r(i,o.Strophe.LogLevel.INFO,c.LogLevel.DEBUG),r(i,o.Strophe.LogLevel.WARN,c.LogLevel.INFO),r(i,o.Strophe.LogLevel.ERROR,c.LogLevel.WARN),r(i,o.Strophe.LogLevel.FATAL,c.LogLevel.ERROR),i);o.Strophe.log=function(e,t){var n=l[e];d[n](t)},o.Strophe.Connection.prototype._connect_cb=function(e,t,n){o.Strophe.info("_connect_cb was called"),this.connected=!0;var r=void 0;try{r=this._proto._reqToData(e)}catch(e){if("badformat"!==e)throw e;this._changeConnectStatus(o.Strophe.Status.CONNFAIL,"bad-format"),this._doDisconnect("bad-format")}if(r){this.xmlInput!==o.Strophe.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==o.Strophe.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(o.Strophe.serialize(r)));if(this._proto._connect_cb(r)!==o.Strophe.Status.CONNFAIL){if(r.getElementsByTagName("success").length>0)return o.Strophe.info("server declares authentication succeeded before SASL"),"function"==typeof t&&t(),this.authenticated=!0,void this._changeConnectStatus(o.Strophe.Status.CONNECTED);var i=[],a=void 0,s=void 0,u=r.getElementsByTagName("mechanism");if(u.length>0)for(a=0;a<u.length;a++)s=o.Strophe.getText(u[a]),this.mechanisms[s]&&i.push(this.mechanisms[s]);i.length||i.push(this.mechanisms["DIGEST-MD5"]),!1!==this.do_authentication&&this.authenticate(i)}}},o.Strophe.Connection.prototype._sasl_success_cb=function(e){var t=this;if(this._sasl_data["server-signature"]){var n=void 0,r=atob(o.Strophe.getText(e)),i=/([a-z]+)=([^,]+)(,|$)/,a=r.match(i);if("v"===a[1]&&(n=a[2]),n!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}return o.Strophe.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sendRestart(),setTimeout(function(){t.authenticated=!0,t._changeConnectStatus(o.Strophe.Status.CONNECTED,null)},100),!1},o.Strophe.Connection.prototype._onDisconnectTimeout=function(){return o.Strophe.info("[M800 Web SDK]_onDisconnectTimeout was called"),this._changeConnectStatus(o.Strophe.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect("timeout"),!1};o.Strophe.Connection.prototype._dataRecv=function(e,t){o.Strophe.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){this.xmlInput!==o.Strophe.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==o.Strophe.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(o.Strophe.serialize(n)));for(var r=void 0,i=void 0;this.removeHandlers.length>0;)i=this.removeHandlers.pop(),(r=this.handlers.indexOf(i))>=0&&this.handlers.splice(r,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();if("terminate"===n.getAttribute("type")){if(this.disconnecting)return;var a=n.getAttribute("condition");if(null!==a){if("remote-stream-error"===a){if(n.getElementsByTagName("conflict").length>0)a="conflict";else{for(var s=n.getElementsByTagName("error"),u=void 0,c=0,d=s.length;c<d;c++)if("urn:maaii:xmpp-stream"===s[c].getAttribute("xmlns")){u=s[c];break}if(u){"UNIQUE_ACTIVE_RESOURCE"===u.getAttribute("name")&&(a="kick")}}}this._changeConnectStatus(o.Strophe.Status.CONNFAIL,a)}else this._changeConnectStatus(o.Strophe.Status.CONNFAIL,"unknown");return void this._doDisconnect(a)}var l=this;o.Strophe.forEachChild(n,null,function(e){var t=l.handlers;for(l.handlers=[],r=0;r<t.length;r++){i=t[r];try{!i.isMatch(e)||!l.authenticated&&i.user?l.handlers.push(i):i.run(e)&&l.handlers.push(i)}catch(e){o.Strophe.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(28),a=r(o),s=n(6),u=r(s),c=n(17),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),l=n(36);t.default={init:function(e){this._conn=e},statusChanged:function(e){e!==i.Strophe.Status.CONNECTED&&e!==i.Strophe.Status.ATTACHED||d.addStanzaHandler(this._conn,{name:"update",namespace:l.MAAII},this._onUpdate.bind(this))},_onUpdate:function(e){var t=JSON.parse((0,u.default)(e).content());return a.default.publish("plugin.update",[t]),!0}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),a=n(28),s=r(a),u=n(6),c=r(u),d=n(200),l=r(d),f=n(7),h=n(17),p=n(56),v=n(36);t.default={init:function(e){this._conn=e},statusChanged:function(e){var t=void 0;switch(e){case o.Strophe.Status.CONNECTED:t=h.addStanzaHandler;break;case o.Strophe.Status.ATTACHED:t=h.addDelayedStanzaHandler;break;default:return}t(this._conn,{name:"message",type:"normal",namespace:v.MAAII},this._notificationReceived.bind(this),p.STANZA_DELAY_MS)},_notificationReceived:function(e){if(!(0,f.isNotification)(e))return!0;var t=(0,c.default)(e).attr("to"),n=JSON.parse((0,c.default)(e).findFirst("body").content()),r=(0,l.default)(n).type();return s.default.publish("plugin.notification."+r,[i({},n,{currentJid:t,type:r})]),!0}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i={_c:null,init:function(e){this._c=e,r.Strophe.addNamespace("PING","urn:xmpp:ping")},ping:function(e,t,n,i){var o=this._c.getUniqueId("ping"),a=(0,r.$iq)({type:"get",to:e,id:o}).c("ping",{xmlns:r.Strophe.NS.PING});this._c.sendIQ(a,t,n,i)},pong:function(e){var t=e.getAttribute("from"),n=e.getAttribute("id"),i=(0,r.$iq)({type:"result",to:t,id:n});this._c.sendIQ(i)},addPingHandler:function(e){return this._c.addHandler(e,r.Strophe.NS.PING,"iq","get")}};i.pong=function(e){var t=e.getAttribute("from"),n=e.getAttribute("id"),i={type:"result",id:n};t&&(i.from=t);var o=(0,r.$iq)(i);this._c.send(o)},t.default={init:function(e){this._conn=e,i.init(e)},statusChanged:function(e,t){e!==r.Strophe.Status.CONNECTED&&e!==r.Strophe.Status.ATTACHED||i.addPingHandler(function(e){return i.pong(e),!0})}},e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=b.UNKNOWN;return{conflict:b.CONFLICT,kick:b.KICKED,timeout:b.NETWORK,"item-not-found":b.EXPIRED,"remote-connection-failed":b.REMOTE_FAILED}[e]||t}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=n(5),l=i(d),f=n(3),h=i(f),p=n(4),v=n(17),m=n(40),g=n(37),_=r(g),y=n(105),b=r(y),w=p.LoggerFactory.getInstance().getLogger("core/xmpp/Connector"),$=12,E=2,S=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};o(this,e),(0,h.default)("endpoint",n,m.isValidBaseUrl,"Invalid IM server url."),(0,l.default)(this),this.credentials=r,this._connTimeout=a.timeout||$,this.userInvokedDisconnection=!1,this.status=_.DISCONNECTED,this._endpoint=n,i.route&&(i=Object.assign({},i,{route:i.route.replace("://",":")})),this.xmppConn=(0,v.createXmppConn)(this._endpoint,i,s({},a,{withCredentials:!0})),this.xmppConn.maxRetries=a.maxRetries||E,this._pubsub=t,this._subscription=t.subscribe("plugin.connection-status",this.onStropheStatusChange.bind(this))}return u(e,[{key:"restore",value:function(){var e=this;return new Promise(function(t,n){e.xmppConn.restore(e.credentials.jid,function(r,i){switch(w.info("[strophe] restore - "+r+":  "+i),r){case c.Strophe.Status.CONNECTED:case c.Strophe.Status.ATTACHED:t(i);break;case c.Strophe.Status.DISCONNECTED:case c.Strophe.Status.ERROR:n(e.reason)}},e._connTimeout)})}},{key:"connect",value:function(){var e=this;return new Promise(function(t,n){e.xmppConn.connect(e.credentials.jid,e.credentials.password,function(r,i){switch(w.info("[strophe] connect - "+r+":  "+i),r){case c.Strophe.Status.CONNECTED:case c.Strophe.Status.ATTACHED:t(i);break;case c.Strophe.Status.DISCONNECTED:case c.Strophe.Status.ERROR:n(e.reason)}},e._connTimeout)})}},{key:"disconnect",value:function(){var e=this;return this.userInvokedDisconnection=!0,new Promise(function(t){e.once(_.DISCONNECTED,function(n){e.xmppConn.reset(),t(n)}),e.xmppConn.disconnect()})}},{key:"changeStatus",value:function(e,t){this.status=e,this.reason=t,this.emit(e,t)}},{key:"onStropheStatusChange",value:function(e){var t=e.status,n=e.condition;switch(t){case c.Strophe.Status.CONNECTING:w.info("[strophe] connecting: "+n),this.changeStatus(_.CONNECTING);break;case c.Strophe.Status.AUTHFAIL:w.info("[strophe] authfail: "+n),this.changeStatus(_.DISCONNECTED,{type:b.AUTH_FAIL});break;case c.Strophe.Status.ATTACHED:w.info("[strophe] attached: "+n),this.changeStatus(_.CONNECTED,n);break;case c.Strophe.Status.CONNECTED:w.info("[strophe] connected: "+n),this.changeStatus(_.CONNECTED,n);break;case c.Strophe.Status.CONNFAIL:w.info("[strophe] connfail: "+n),"unknown"===n&&this.changeStatus(_.DISCONNECTED,{type:b.KICKED});break;case c.Strophe.Status.DISCONNECTING:w.info("[strophe] disconnecting: "+n);break;case c.Strophe.Status.DISCONNECTED:if(w.info("[strophe] disconnected: "+n),this._userInvokedDisconnection)return this._userInvokedDisconnection=!1,this.changeStatus(_.DISCONNECTED,{type:b.EXPLICIT}),void this._xmppConn.reset();this.changeStatus(_.DISCONNECTED,{type:a(n)});break;case c.Strophe.Status.ERROR:w.info("[strophe] error: "+n),this.changeStatus(_.DISCONNECTED,{type:b.UNKNOWN})}}},{key:"getXmppConnection",value:function(){return this.xmppConn}},{key:"getEndpoint",value:function(){return this._endpoint}},{key:"getStatus",value:function(){return this.status}},{key:"getDisconnectReason",value:function(){return this.reason}},{key:"reset",value:function(){this._pubsub.unsubscribe(this._subscription),this.xmppConn.disconnect(),this.xmppConn=null,this.status=null,this.reason=null}}]),e}();t.default=S,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=r(o),s=n(311),u=r(s),c=n(201),d=r(c),l=n(630),f=r(l),h=n(632),p=r(h),v=n(124),m=function e(t){var n=this;i(this,e),(0,a.default)(this),this._notificationsArray=[],t.subscribe("plugin.notification",function(e){var t=(0,p.default)(n._notificationsArray,function(t){return(0,d.default)(t.notification,e)});if(t)return void t.removeNotification();var r=(0,u.default)(function(){(0,f.default)(n._notificationsArray,function(t){return(0,d.default)(t.notification,e)})},5e3),i={removeNotification:r,notification:e};n._notificationsArray.push(i),r(),n.emit(v.NOTIFICATION_RECEIVED,e)})};t.default=m,e.exports=t.default},function(e,t,n){var r=n(18),i=function(){return r.Date.now()};e.exports=i},function(e,t,n){function r(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],s=e.length;for(t=i(t,3);++r<s;){var u=e[r];t(u,r,e)&&(n.push(u),a.push(r))}return o(e,a),n}var i=n(27),o=n(631);e.exports=r},function(e,t,n){function r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==u){var u=a;o(a)?s.call(e,a,1):i(e,a)}}return e}var i=n(265),o=n(65),a=Array.prototype,s=a.splice;e.exports=r},function(e,t,n){var r=n(633),i=n(634),o=r(i);e.exports=o},function(e,t,n){function r(e){return function(t,n,r){var s=Object(t);if(!o(t)){var u=i(n,3);t=a(t),n=function(e){return u(s[e],e,s)}}var c=e(t,n,r);return c>-1?s[u?t[c]:c]:void 0}}var i=n(27),o=n(33),a=n(38);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var u=null==n?0:a(n);return u<0&&(u=s(r+u,0)),i(e,o(t,3),u)}var i=n(273),o=n(27),a=n(90),s=Math.max;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,r){var i={id:(0,$.generateIqId)(t),to:t,type:"get"},o=[{name:"query",attributes:{xmlns:"jabber:iq:roster",ver:e,source:"native",extendedDetails:"true"},body:[{name:"set",attributes:{xmlns:"http://jabber.org/protocol/rsm"},body:[{name:"max",body:n.toString()},{name:"index",body:r.toString()}]}]}];return(0,b.composeIq)(i,o)}function s(e){var t=(0,y.default)(e),n=t.findFirst("query");if(!n)throw new S.UnexpectedResponseError("<query> tag not found.");var r=n.attr("seconds");if(!r)throw new S.UnexpectedResponseError("timestamp not found.");return r}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=n(57),l=r(d),f=n(3),h=r(f),p=n(5),v=r(p),m=n(636),g=r(m),_=n(6),y=r(_),b=n(7),w=n(34),$=n(17),E=n(4),S=n(0),O=n(40),A=n(202),M=E.LoggerFactory.getInstance().getLogger("user/xmpp/MaaiiContactService");c.Strophe.addConnectionPlugin("ContactList",g.default);var x=function(){function e(t,n){o(this,e),(0,v.default)(this),this._connectService=n,t.subscribe("plugin.contactList.subscription",this._onReceivedSubscription.bind(this)),t.subscribe("plugin.contactList.profile",this._onReceivedProfile.bind(this)),t.subscribe("plugin.contactList.presence",this._onReceivedPresence.bind(this)),t.subscribe("plugin.contactList.error",this._onReceivedError.bind(this))}return u(e,[{key:"fetchContactList",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,n,r){var i,o,s,u,c,d,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.default)("param",n,O.isPositiveInteger,"Number of items in a page should be a positive integer."),(0,h.default)("param",r,O.isNonNegativeInteger,"Page number should be a non negative integer."),i=this._connectService.getJid(),o=a(t,i,n,r),e.next=6,this._sendIqRequest(o);case 6:if(s=e.sent,e.prev=7,u=(0,y.default)(s),c=u.findFirst("query")){e.next=12;break}return e.abrupt("return",{version:t,contacts:[]});case 12:return d=c.attr("ver")||"",l=u.find("item"),f=[],l.forEach(function(e){var t=e.attr("subscription"),n=e.attr("jid");if(!t)return void M.error("User profile embedded in stanza "+u.attr("id")+" doesn't contain direction.",e);if("none"!==t)try{var r=(0,b.parseContactListUserProfile)(e);f.push({direction:t,jid:n,profile:r})}catch(t){M.error("User profile embedded in stanza "+u.attr("id")+" cannot be parsed: "+t.message,e)}else f.push({direction:t,jid:n})}),e.abrupt("return",{version:d,contacts:f});case 19:throw e.prev=19,e.t0=e.catch(7),new S.UnexpectedResponseError("Received malformed response.",e.t0);case 22:case"end":return e.stop()}},e,this,[[7,19]])}));return e}()},{key:"queryContact",value:function(){function e(e,n){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.default)("param",t,"jid is required."),r=this._composeQueryContactStanza(t,n),e.next=4,this._sendIqRequest(r);case 4:return i=e.sent,e.abrupt("return",(0,b.parseQueryContactResponse)(i));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"addFriend",value:function(e,t){var n=this;return Promise.resolve().then(function(){(0,h.default)("jid",e,w.isNonEmptyString,"Expect `jid` to be non empty string.");var r=n._composeAddFriendStanza(e,t);return n._send(r)})}},{key:"acceptFriendRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.default)("jid",t,w.isNonEmptyString,"Expect `jid` to be non empty string."),n=this._composeAcceptFriendStanza(t),e.abrupt("return",this._send(n));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"deleteFriend",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.default)("jid",t,w.isNonEmptyString,"Expect `jid` to be non empty string."),n=this._composeUnsubscribeFriendStanza(t),e.abrupt("return",this._send(n));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectFriendRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.default)("jid",t,w.isNonEmptyString,"Expect `jid` to be non empty string."),n=this._composeUnsubscribeFriendStanza(t),e.abrupt("return",this._send(n));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"cancelFriendRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.default)("jid",t,w.isNonEmptyString,"Expect `jid` to be non empty string."),n=this._composeUnsubscribeFriendStanza(t),e.abrupt("return",this._send(n));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"getLastSeen",value:function(e){var t=this;return Promise.resolve().then(function(){(0,l.default)("param",e,"jid is required.");var n=t._composeGetLastSeenStanza(e);return t._sendIqRequest(n).then(s)})}},{key:"_sendIqRequest",value:function(e){return(0,b.sendIqRequest)(this._connectService.getStropheConnection(),e,1e4)}},{key:"_send",value:function(e){var t=this;return new Promise(function(n){t._connectService.getStropheConnection().send(e),n()})}},{key:"_composeAddFriendStanza",value:function(e,t){var n=this._connectService.getJid(),r={from:n,to:e,type:"subscribe"},i=void 0;return(0,w.isNonEmptyString)(t)&&(i={name:"note",attributes:{xmlns:"urn:maaii:xmpp:presence:note"},body:t}),(0,b.composePresence)(r,i)}},{key:"_composeAcceptFriendStanza",value:function(e){var t=this._connectService.getJid(),n={from:t,to:e,type:"subscribed"};return(0,b.composePresence)(n)}},{key:"_composeUnsubscribeFriendStanza",value:function(e){var t=this._connectService.getJid(),n={from:t,to:e,type:"unsubscribe"};return(0,b.composePresence)(n)}},{key:"_composeQueryContactStanza",value:function(e,t){var n=this._connectService.getJid();return(0,b.composeQueryContactStanza)(e,n,t,(0,$.generateIqId)(n))}},{key:"_composeGetLastSeenStanza",value:function(e){var t=this._connectService.getJid(),n={id:(0,$.generateIqId)(t),to:e,type:"get"},r=[{name:"query",attributes:{xmlns:"jabber:iq:last"}}];return(0,b.composeIq)(n,r)}},{key:"_onReceivedSubscription",value:function(e){var t=this;e.forEach(function(e){t.emit(A.SUBSCRIPTION,e)})}},{key:"_onReceivedProfile",value:function(e){var t=this;e.forEach(function(e){t.emit(A.PROFILE,e)})}},{key:"_onReceivedPresence",value:function(e){var t=this;e.forEach(function(e){t.emit(A.PRESENCE,e)})}},{key:"_onReceivedError",value:function(e){this.emit(A.ERROR,e)}}]),e}();t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(6),a=r(o),s=n(28),u=r(s),c=n(7),d=n(4),l=n(17),f=n(312),h=n(56),p=d.LoggerFactory.getInstance().getLogger("user/xmpp/strophe/plugin/ContactList");t.default={init:function(e){this._conn=e},statusChanged:function(e){var t=void 0;switch(e){case i.Strophe.Status.CONNECTED:t=l.addStanzaHandler;break;case i.Strophe.Status.ATTACHED:t=l.addDelayedStanzaHandler;break;default:return}t(this._conn,{name:"iq",type:"set"},this._onIqReceived.bind(this),h.STANZA_DELAY_MS),t(this._conn,{name:"presence"},this._onPresenceReceived.bind(this),h.STANZA_DELAY_MS)},_onIqReceived:function(e){var t=(0,a.default)(e),n=t.find("item"),r=[],i=[];return n.forEach(function(e){var n=e.attr("subscription"),o=e.attr("jid");switch(n){case"both":case"to":var a=void 0;try{e.findFirst("profile")&&(a=(0,c.parseContactListUserProfile)(e)),r.push({direction:n,jid:o,profile:a})}catch(n){p.error("User profile in stanza "+t.attr("id")+" cannot be parsed: "+n.message,e)}return;case"from":case"none":if("subscribe"===e.attr("ask"))return void i.push({type:f.OUTGOING,jid:o});i.push({type:f.REMOVE,jid:o})}}),r.length>0&&u.default.publish("plugin.contactList.profile",[r]),i.length>0&&u.default.publish("plugin.contactList.subscription",[i]),!0},_onPresenceReceived:function(e){var t=(0,a.default)(e),n=t.attr("type"),r=t.attr("from"),i=void 0,o=void 0;switch(n){case"subscribe":o=t.findFirst("note"),i=null!==o?o.content():"",u.default.publish("plugin.contactList.subscription",[[{type:f.INCOMING,jid:r,note:i}]]);break;case"subscribed":u.default.publish("plugin.contactList.profile",[[{direction:"both",jid:r}]]);break;case"unsubscribe":case"unsubscribed":u.default.publish("plugin.contactList.subscription",[[{type:f.REMOVE,jid:r}]]);break;case"unavailable":u.default.publish("plugin.contactList.presence",[[{type:"offline",jid:r}]]);break;case"error":var s=(0,c.createErrorFromErrorStanza)(t);u.default.publish("plugin.contactList.error",[{jid:r,error:s}]);break;case null:u.default.publish("plugin.contactList.presence",[[{type:"online",jid:r}]])}return!0}},e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=n(57),c=i(u),d=n(3),l=i(d),f=n(4),h=n(17),p=r(h),v=n(203),m=r(v),g=n(6),_=i(g),y=n(638),b=n(0),w=f.LoggerFactory.getInstance().getLogger("file/xmpp/MaaiiFileService"),$=function(){function e(t){o(this,e),this.connectService=t}return a(e,[{key:"requestUpload",value:function(e,t){var n=this;return new Promise(function(r,i){(0,c.default)("storageType",e,"`storageType` missing"),(0,l.default)("recipients",t,function(e){return e&&e.length},"`recipients` should contain at least one entry");var o=s.Strophe.getBareJidFromJid(n.connectService.getJid()),a={name:"iq",attributes:{type:"get",id:p.generateIqId(o)},body:[{name:"allocate",attributes:{type:e,xmlns:"urn:maaii:filesharing"},body:[{name:"addresses",attributes:{xmlns:"http://jabber.org/protocol/address"},body:t.map(function(e){return{name:"address",attributes:{type:"to",jid:e}}})}]}]};n.connectService.getStropheConnection().sendIQ(_.default.build(a),function(e){try{r(n.parseResponse(e))}catch(e){i(e)}},function(e){w.error("Unable to allocate resource for upload: ",e),i(new Error("Unable to allocate upload."))},3e3)})}},{key:"parseResponse",value:function(e){try{var t=(0,_.default)(e).findFirst("allocate").attr("type"),n=void 0;switch(t){case m.MAAII_FILE_SERVER:n=(0,y.parseMfs)(e);break;case m.AMAZON_S3_STORAGE:n=(0,y.parseAws)(e);break;default:throw new b.UnexpectedResponseError("Unknown storage type received. ",t)}return n}catch(e){throw w.error("Unexpected stanza format. ",e.stack),new b.UnexpectedResponseError("Unexpected stanza format "+e.message)}}}]),e}();t.default=$,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t={},n=(0,u.default)(e),r=n.findFirst("url").content(),i=n.findFirst("token").content();return Object.defineProperties(t,{type:{enumerable:!0,value:a.MAAII_FILE_SERVER},url:{enumerable:!0,value:r},token:{enumerable:!0,value:i}}),t}function i(e){var t={},n=(0,u.default)(e),r=n.findFirst("aws-access-key-id").content(),i=n.findFirst("aws-secret-access-key").content();return Object.defineProperties(t,{type:{enumerable:!0,value:a.AMAZON_S3_STORAGE},accessKeyId:{enumerable:!0,value:r},secretAccessKey:{enumerable:!0,value:i}}),t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(203),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s=n(6),u=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={parseMfs:r,parseAws:i},e.exports=t.default},function(e,t,n){e.exports=n(640)},function(e,t,n){function r(e,t){return(s(e)?i:o)(e,a(t))}var i=n(176),o=n(71),a=n(641),s=n(2);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:i}var i=n(51);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UpdateProfileRequestSchema={$schema:"http://json-schema.org/draft-04/schema#",title:"UpdateProfileRequest",description:"XMPP API Request params to update user profile",type:"object",properties:{deviceId:{type:"string"},username:{type:"string"},applicationKey:{type:"string"},carrierName:{type:"string"},requestId:{type:"string"},userProfile:{type:"array",minItems:1,uniqueItems:!0,items:{type:"object"}}},required:["deviceId","username","applicationKey","carrierName","userProfile"]},t.UpdateProfileResponseSchema={$schema:"http://json-schema.org/draft-04/schema#",title:"UpdateProfileResponse",description:"XMPP API Response params after updated user profile",type:"object",properties:{"@type":{type:"string",pattern:"^UpdateUserProfileResponse$"}},required:["@type"]}},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Promise.resolve().then(function(){Array.isArray(e)||(e=[e]),e.forEach(function(e){(0,a.default)("endpoint",e,u.isValidBaseUrl,"Invalid url for endpoint.")}),(0,a.default)("action",t,s.isFunction,"Expect 'action' to be function, but got '"+(void 0===t?"undefined":i(t))+"'."),(0,a.default)("opts.retryPredicate",n.retryPredicate,function(e){return void 0===e||(0,s.isFunction)(e)},"Expect the specified 'opts.retryPredicate' to be function,\n          but got '"+i(n.retryPredicate)+"'.");var r=n.maxRetries,o=void 0===r?2:r,c=e.length,d=(o+1)*c,l=n.retryPredicate||function(){return!0};return function n(r){var i=e[r%c];return t(i).catch(function(e){if(++r>=d||!l(e))throw e;return n(r)})}(0)})}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.requestWithFallback=r;var o=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(10),u=n(40)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.COMMAND_FETCH_CONTACT_LIST="Contact:fetchContactList",t.COMMAND_GET_CONTACT="Contact:getContact",t.COMMAND_GET_LAST_SEEN="Contact:getLastSeen",t.COMMAND_ACCEPT_FRIEND_REQUEST="Contact:acceptFriendRequest",t.COMMAND_REJECT_FRIEND_REQUEST="Contact:rejectFriendRequest",t.COMMAND_CANCEL_FRIEND_REQUEST="Contact:cancelFriendRequest",t.COMMAND_ADD_FRIEND="Contact:addFriend",t.COMMAND_DELETE_FRIEND="Contact:deleteFriend"},function(e,t,n){function r(e,t,n){return e=s(e),n=null==n?0:i(a(n),0,e.length),t=o(t),e.slice(n,n+t.length)==t}var i=n(646),o=n(158),a=n(90),s=n(157);e.exports=r},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t,n){var r=n(103),i=n(50),o=n(225),a=n(33),s=n(80),u=n(38),c=Object.prototype,d=c.hasOwnProperty,l=o(function(e,t){if(s(t)||a(t))return void i(t,u(t),e);for(var n in t)d.call(t,n)&&r(e,n,t[n])});e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=n(5),u=r(s),c=n(57),d=r(c),l=n(77),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),h=n(0),p="pending",v=function(){function e(t,n,r){var o=r.applicationIdentifier,s=r.deviceId,c=r.jid,l=r.ssoToken,f=r.subResource;i(this,e),(0,d.default)("config",o,"`config.applicationIdentifier` is missing"),(0,d.default)("config",s,"`config.deviceId` is missing"),(0,d.default)("config",c,"`config.jid` is missing"),(0,d.default)("config",l,"`config.ssoToken` is missing"),(0,u.default)(this),this._file=t,this._endpoint=n,this._applicationIdentifier=o,this._deviceId=s,this._jid=a.Strophe.getBareJidFromJid(c),this._ssoToken=l,this._subResource=f||{},this.status=p}return o(e,[{key:"_onSuccess",value:function(e){var t=e.fileId,n=e.expires;this.emit(f.UPLOAD_SUCCESS,{fileId:t,expires:n})}},{key:"_onFailure",value:function(e){this.emit(f.UPLOAD_FAILURE,{error:e})}},{key:"_onProgress",value:function(e,t){var n=Math.round(100*e/t);this.emit(f.UPLOAD_PROGRESS,{loaded:e,total:t,progress:n})}},{key:"_onCancel",value:function(){this.emit(f.UPLOAD_CANCEL)}},{key:"_sendFile",value:function(e){var t=this,n=this._xhr=new XMLHttpRequest,r=new FormData;r.append("file",this._file),n.open("POST",e,!0);var i=function(){n.onload=n.onerror=n.upload.onprogress=n.onabort=null};n.onload=function(){t.status="finished",t._onSuccess(JSON.parse(n.responseText)),i()},n.onerror=function(){t.status="finished",t._onFailure(new Error(n.status+" Upload failed. "+n.statusText)),i()},n.onabort=function(){t.status="cancelled",t._onCancel(),i()},n.upload.onprogress=function(e){e.lengthComputable&&t._onProgress(e.loaded,e.total)},n.setRequestHeader("Authorization",'MAAII-SSO token="'+this._ssoToken+'", aid="'+this._applicationIdentifier+'", did="'+this._deviceId+'"'),n.send(r)}},{key:"upload",value:function(){if("sending"===this.status)throw new h.InvalidOperationError("The upload is already in progress");if("finished"===this.status)throw new h.InvalidOperationError("The upload has already finished");if("cancelled"===this.status)throw new h.InvalidOperationError("The upload has been cancelled");var e=this._endpoint+"files/"+this._jid,t=this._subResource,n=t.type,r=t.value;n&&r&&(e=""+this._endpoint+this._jid+"/"+n+"/"+r),this._sendFile(e)}},{key:"cancel",value:function(){if("finished"===this.status)throw new h.InvalidOperationError("The upload has already finished");if("cancelled"===this.status)throw new h.InvalidOperationError("The upload has been cancelled");this._xhr&&this._xhr.abort(),this.status="cancelled"}}]),e}();t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){return Promise.resolve(URL.createObjectURL(e))}function i(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){r.onload=null,r.onerror=null,t(r)},r.onerror=function(e){r.onload=null,r.onerror=null,n(e)},r.src=e})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r(e).then(i)},e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=URL.createObjectURL(e),n=document.createElement("video");return new Promise(function(e,r){var i=function(){n.removeEventListener("loadedmetadata",s),n.removeEventListener("error",c),n.removeEventListener("loadeddata",u)},o={},a=function(t){o[t]=!0,o.onLoadData&&o.onLoadedMetadata&&(i(),e(n))},s=function(){if(0===n.videoWidth||0===n.videoHeight)return void c(new Error("Cannot load the video. Maybe the file is corrupted or not supported by this browser."));n.width=n.videoWidth,n.height=n.videoHeight,a("onLoadedMetadata")},u=function(){a("onLoadData")},c=function(e){i(),n.src="",n.load(),r(e)};n.addEventListener("loadedmetadata",s),n.addEventListener("error",c),n.addEventListener("loadeddata",u),n.src=t,n.load()})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(131);t.default=(0,i.timeout)(r,5e3),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=URL.createObjectURL(e),i=document.createElement("audio"),o=function(){i.removeEventListener("loadedmetadata",o),i.removeEventListener("error",a),t(i)},a=function(e){i.removeEventListener("loadedmetadata",o),i.removeEventListener("error",a),i.src="",i.load(),n(e)};i.addEventListener("loadedmetadata",o),i.addEventListener("error",a),i.src=r,i.load()})},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){var r=document.createElement("canvas"),i=r.getContext("2d");r.width=e.width/2,r.height=e.height/2,i.drawImage(e,0,0,r.width,r.height);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=r.width/2,o.height=r.height/2,a.drawImage(r,0,0,o.width,o.height);var s=document.createElement("canvas"),u=s.getContext("2d");return s.width=t,s.height=n,u.fillStyle="white",u.fillRect(0,0,t,n),u.drawImage(o,0,0,t,n),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default={bicubic:r},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){return e>t?{width:n,height:Math.floor(t/e*n)}:{width:Math.floor(e/t*n),height:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.max,r=t.quality,i=t.time;return new Promise(function(t,o){e.onseeked=function(){e.pause();var i=(0,u.default)(e,{max:n,quality:r});e.onseeked=null,e.onerror=null,t(i)},e.onerror=function(t){e.onseeked=null,e.onerror=null,o(t)};var s=(0,a.default)(i,e.duration)?i:e.duration/2;e.currentTime=s})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(655),a=r(o),s=n(321),u=r(s);e.exports=t.default},function(e,t,n){function r(e,t,n){return t=o(t),void 0===n?(n=t,t=0):n=o(n),e=a(e),i(e,t,n)}var i=n(656),o=n(263),a=n(174);e.exports=r},function(e,t){function n(e,t,n){return e>=i(t,n)&&e<r(t,n)}var r=Math.max,i=Math.min;e.exports=n},function(e,t,n){"use strict";function r(e){return{width:e.width,height:e.height}}function i(e){return{width:e.videoWidth,height:e.videoHeight,duration:e.duration}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=r,t.loadVideo=i},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_QUERY=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(0),c=n(325),d=(t.DEFAULT_QUERY=Object.freeze({currency:64,type:c.CALL}),function(){function e(){i(this,e)}return o(e,[{key:"getRate",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.default)("query",t,function(e){return!!e}),n=t.number,r=t.country,n||r){e.next=4;break}throw new u.ArgumentError("Argument query should contain either number or country, not none.");case 4:return e.abrupt("return",{destination:"US",deviceCategory:"Landline",connectionFee:.2,currency:t.currency,rate:.12,rateUnit:"min"});case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"getCallRateByCountry",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",getRate({type:c.CALL,currency:840,country:t}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getCallRateByNumber",value:function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",getRate({type:c.CALL,currency:840,number:t}));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),e}());t.default=d},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.RateUnit=t.QueryType=void 0;var i=n(325),o=r(i),a=n(660),s=r(a);t.QueryType=o,t.RateUnit=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SECOND="second",t.MINUTE="min"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){function e(e){if(!e)return new Uint8Array;for(var t=[],n=0,r=e.length;n<r;n+=2)t.push(parseInt(e.substr(n,2),16));return new Uint8Array(t)}var t=void 0,n=void 0,r="m800-super-security";a.Strophe.Bosh.prototype._processRequest=function(e){var s=this,c=this._requests[e],l=this._getRequestStatus(c,-1);if(c.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var f=c.age(),h=!isNaN(f)&&f>Math.floor(a.Strophe.TIMEOUT*this.wait),p=null!==c.dead&&c.timeDead()>Math.floor(a.Strophe.SECONDARY_TIMEOUT*this.wait),v=4===c.xhr.readyState&&(l<1||l>=500);if((h||p||v)&&(p&&a.Strophe.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),c.abort=!0,c.xhr.abort(),c.xhr.onreadystatechange=function(){},this._requests[e]=new a.Strophe.Request(c.xmlData,c.origFunc,c.rid,c.sends),c=this._requests[e]),0===c.xhr.readyState){a.Strophe.debug("request id "+c.id+"."+c.sends+" posting");try{var m=this._conn.options.contentType||"text/plain; charset=utf-8";c.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==c.xhr.setRequestHeader&&c.xhr.setRequestHeader("Content-Type",m),this._conn.options.withCredentials&&(c.xhr.withCredentials=!0)}catch(e){return a.Strophe.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(a.Strophe.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var g=function(){c.date=new Date;var e=s._conn.options.customHeaders,a=void 0,l=r;if(t)a={"x-bosh-session-id":btoa(s.sid),"x-secure-request":"active"},l=t;else{n=u.default.createDiffieHellman(r),n.generateKeys();a={"x-secure-mixture":n.getPublicKey().toString("hex")}}c.data=d.default.encrypt(c.data,l).toString(),Object.entries(o({},e,a)).forEach(function(e){var t=i(e,2),n=t[0],r=t[1];c.xhr.setRequestHeader(n,r)}),c.xhr.send(c.data)};if(c.sends>1){var _=1e3*Math.min(Math.floor(a.Strophe.TIMEOUT*this.wait),Math.pow(c.sends,3));setTimeout(function(){g()},_)}else g();c.sends++,this._conn.xmlOutput!==a.Strophe.Connection.prototype.xmlOutput&&(c.xmlData.nodeName===this.strip&&c.xmlData.childNodes.length?this._conn.xmlOutput(c.xmlData.childNodes[0]):this._conn.xmlOutput(c.xmlData)),this._conn.rawOutput!==a.Strophe.Connection.prototype.rawOutput&&this._conn.rawOutput(c.data)}else a.Strophe.debug("_processRequest: "+(0===e?"first":"second")+" request\n        has readyState of "+c.xhr.readyState)};var s=a.Strophe.Request.prototype.getResponse;a.Strophe.Request.prototype.getResponse=function(){if(!this.xhr.getResponseHeader("x-secure-request"))return s.call(this);var r=this.xhr.responseText;if(!r)throw v.error("No text response received from secure request."),"badformat";var i=this.xhr.getResponseHeader("x-secure-mixture");if(i){var o=e(i);t=n.computeSecret(o).toString("hex")}try{var u=d.default.decrypt(r,t).toString(f.default),c=a.Strophe.xmlHtmlNode(u);return(0,h.getFirstElementChild)(c)}catch(e){throw t=null,v.error("Failed to decrypt and parse the response: ",e),"badformat"}};var c=a.Strophe.Connection.prototype._doDisconnect;a.Strophe.Connection.prototype._doDisconnect=function(e){c.call(this,e),t=null}};var a=n(1),s=n(662),u=r(s),c=n(294),d=r(c),l=n(296),f=r(l),h=n(329),p=n(4),v=p.LoggerFactory.getInstance().getLogger("core/xmpp/strophe/enableEncryptedBoshTransport");e.exports=t.default},function(e,t,n){(function(e){function r(t){var n=new e(a[t].prime,"hex"),r=new e(a[t].gen,"hex");return new s(n,r)}function i(t,n,r,a){return e.isBuffer(n)||void 0===u[n]?i(t,"binary",n,r):(n=n||"binary",a=a||"binary",r=r||new e([2]),e.isBuffer(r)||(r=new e(r,a)),"number"==typeof t?new s(o(t,r),r,!0):(e.isBuffer(t)||(t=new e(t,n)),new s(t,r,!0)))}var o=n(326),a=n(670),s=n(671),u={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=r,t.createDiffieHellman=t.DiffieHellman=i}).call(t,n(204).Buffer)},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new f(o(e,i,a)),u=0,c=a>0?i-4:i,d=0;d<c;d+=4)t=l[e.charCodeAt(d)]<<18|l[e.charCodeAt(d+1)]<<12|l[e.charCodeAt(d+2)]<<6|l[e.charCodeAt(d+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=l[e.charCodeAt(d)]<<2|l[e.charCodeAt(d+1)]>>4,s[u++]=255&t),1===a&&(t=l[e.charCodeAt(d)]<<10|l[e.charCodeAt(d+1)]<<4|l[e.charCodeAt(d+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return d[e>>18&63]+d[e>>12&63]+d[e>>6&63]+d[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(u(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(d[t>>2]+d[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(d[t>>10]+d[t>>4&63]+d[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=c;for(var d=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,v=h.length;p<v;++p)d[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,d=-7,l=n?i-1:0,f=n?-1:1,h=e[t+l];for(l+=f,o=h&(1<<-d)-1,h>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=f,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,d=(1<<c)-1,l=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?f/u:f*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=n(204),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t){},function(e,t,n){function r(e){this.rand=e}var i;if(e.exports=function(e){return i||(i=new r(null)),i.generate(e)},e.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},r.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(669);if("function"!=typeof o.randomBytes)throw new Error("Not supported");r.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){}},function(e,t){},function(e,t){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(e,t,n){(function(t){function r(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._pub=new u(e),this}function i(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._priv=new u(e),this}function o(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in _)return _[r];var i=0;if(e.isEven()||!m.simpleSieve||!m.fermatTest(e)||!d.test(e))return i+=1,i+="02"===n||"05"===n?8:4,_[r]=i,i;d.test(e.shrn(1))||(i+=2);var o;switch(n){case"02":e.mod(l).cmp(f)&&(i+=8);break;case"05":o=e.mod(h),o.cmp(p)&&o.cmp(v)&&(i+=8);break;default:i+=4}return _[r]=i,i}function a(e,t,n){this.setGenerator(t),this.__prime=new u(e),this._prime=u.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=r,this.setPrivateKey=i):this._primeCode=8}function s(e,n){var r=new t(e.toArray());return n?r.toString(n):r}var u=n(205),c=n(328),d=new c,l=new u(24),f=new u(11),h=new u(10),p=new u(3),v=new u(7),m=n(326),g=n(327);e.exports=a;var _={};Object.defineProperty(a.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=o(this.__prime,this.__gen)),this._primeCode}}),a.prototype.generateKeys=function(){return this._priv||(this._priv=new u(g(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(e){e=new u(e),e=e.toRed(this._prime);var n=e.redPow(this._priv).fromRed(),r=new t(n.toArray()),i=this.getPrime();if(r.length<i.length){var o=new t(i.length-r.length);o.fill(0),r=t.concat([o,r])}return r},a.prototype.getPublicKey=function(e){return s(this._pub,e)},a.prototype.getPrivateKey=function(e){return s(this._priv,e)},a.prototype.getPrime=function(e){return s(this.__prime,e)},a.prototype.getGenerator=function(e){return s(this._gen,e)},a.prototype.setGenerator=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.__gen=e,this._gen=new u(e),this}}).call(t,n(204).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){r.Strophe.Bosh.prototype._restore=function(e,t,n,i,o){var a=JSON.parse(atob(localStorage.getItem(s)));if(!(void 0!==a&&null!==a&&a.rid&&a.sid&&a.jid)||void 0!==e&&null!==e&&r.Strophe.getBareJidFromJid(a.jid)!==r.Strophe.getBareJidFromJid(e))throw{name:"StropheSessionError",message:"_restore: no restorable session."};this._conn.restored=!0,this._attach(a.jid,a.sid,a.rid,t,n,i,o)},r.Strophe.Bosh.prototype._cacheSession=function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&localStorage.setItem(s,btoa(JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid}))):localStorage.removeItem(s)},r.Strophe.Bosh.prototype._doDisconnect=function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&localStorage.removeItem(s),this._conn.nextValidRid(this.rid)},r.Strophe.Bosh.prototype._reset=function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&localStorage.removeItem(s),this._conn.nextValidRid(this.rid)}};var r=n(1),i=n(125),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(14),s=(0,o.default)(a.BOSH_SESSION).toString();e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(315),a=r(o),s=n(319),u=r(s),c=n(316),d=r(c);t.default=i({ContactManager:a.default,DeviceManager:u.default,constants:d.default},d.default),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(320),a=r(o),s=n(675),u=r(s);t.default=i({FileManager:a.default,constants:u.default},u.default),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(77),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.default={FileEvent:i},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(323),o=r(i),a=n(322),s=r(a);t.default={createAudioRecorderFactory:o.default,MediaManager:s.default},e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.domNode=t.xmpp=t.validate=t.string=t.peer=t.diff=t.error=t.strophe=t.stanza=t.serializeXml=t.request=t.parseSemVer=t.object=t.notification=t.eventHook=t.collection=t.array=void 0;var o=n(131);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var a=n(58),s=i(a),u=n(134),c=i(u),d=n(678),l=i(d),f=n(200),h=i(f),p=n(10),v=r(p),m=n(307),g=i(m),_=n(197),y=i(_),b=n(309),w=i(b),$=n(6),E=i($),S=n(17),O=i(S),A=n(31),M=r(A),x=n(298),T=r(x),I=n(132),C=r(I),R=n(34),N=r(R),k=n(40),P=r(k),j=n(7),D=r(j),L=n(329),U=r(L);t.array=s.default,t.collection=c.default,t.eventHook=l.default,t.notification=h.default,t.object=v,t.parseSemVer=g.default,t.request=y.default,t.serializeXml=w.default,t.stanza=E.default,t.strophe=O.default,t.error=M,t.diff=T,t.peer=C,t.string=N,t.validate=P,t.xmpp=D,t.domNode=U},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e||"function"!=typeof e.emit)throw new TypeError("`emitter` is not an emitter");if(e.__mEventHook)return e;var t=e.emit.bind(e);return e.emit=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,["pre:"+e].concat(r)),t.apply(void 0,[e].concat(r)),t.apply(void 0,["post:"+e].concat(r))},e.__mEventHook=!0,e},e.exports=t.default}])});